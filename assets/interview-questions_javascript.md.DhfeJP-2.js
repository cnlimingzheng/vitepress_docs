import{_ as i,c as a,o as t,aj as n}from"./chunks/framework.CfRS2ZWq.js";const g=JSON.parse('{"title":"JS é¢è¯•é¢˜","description":"","frontmatter":{},"headers":[],"relativePath":"interview-questions/javascript.md","filePath":"interview-questions/javascript.md"}'),h={name:"interview-questions/javascript.md"};function l(e,s,k,p,r,d){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="js-é¢è¯•é¢˜" tabindex="-1">JS é¢è¯•é¢˜ <a class="header-anchor" href="#js-é¢è¯•é¢˜" aria-label="Permalink to â€œJS é¢è¯•é¢˜â€">â€‹</a></h1><h2 id="jsåŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›åŠå®ƒä»¬çš„åŒºåˆ«" tabindex="-1">jsåŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›åŠå®ƒä»¬çš„åŒºåˆ« <a class="header-anchor" href="#jsåŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›åŠå®ƒä»¬çš„åŒºåˆ«" aria-label="Permalink to â€œjsåŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›åŠå®ƒä»¬çš„åŒºåˆ«â€">â€‹</a></h2><p>JavaScript æœ‰ <strong>7 ç§åŸºæœ¬ï¼ˆåŸå§‹ï¼‰æ•°æ®ç±»å‹</strong>ï¼ˆES2022 èµ·ï¼‰ï¼š</p><hr><h3 id="ä¸€ã€åŸºæœ¬æ•°æ®ç±»å‹-primitive-types" tabindex="-1">ä¸€ã€åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive Typesï¼‰ <a class="header-anchor" href="#ä¸€ã€åŸºæœ¬æ•°æ®ç±»å‹-primitive-types" aria-label="Permalink to â€œä¸€ã€åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive Typesï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><code>number</code></td><td><code>42</code>, <code>3.14</code>, <code>NaN</code>, <code>Infinity</code></td><td>æ‰€æœ‰æ•°å­—ï¼ˆå«æµ®ç‚¹ï¼‰ï¼ŒIEEE 754 åŒç²¾åº¦</td></tr><tr><td><code>string</code></td><td><code>&#39;hello&#39;</code>, <code>&quot;world&quot;</code></td><td>ä¸å¯å˜ï¼ŒUTF-16 ç¼–ç </td></tr><tr><td><code>boolean</code></td><td><code>true</code>, <code>false</code></td><td>é€»è¾‘å€¼</td></tr><tr><td><code>undefined</code></td><td><code>let a;</code> â†’ <code>a</code> ä¸º <code>undefined</code></td><td>å£°æ˜æœªèµ‹å€¼</td></tr><tr><td><code>null</code></td><td><code>let b = null;</code></td><td>è¡¨ç¤ºâ€œç©ºå€¼â€ï¼Œ<strong>æ˜¯å¯¹è±¡å¼•ç”¨çš„æœ‰æ„ç¼ºå¤±</strong></td></tr><tr><td><code>bigint</code></td><td><code>123n</code>, <code>-456n</code></td><td>ä»»æ„ç²¾åº¦æ•´æ•°ï¼ˆES2020+ï¼‰</td></tr><tr><td><code>symbol</code></td><td><code>Symbol(&#39;id&#39;)</code></td><td>å”¯ä¸€ä¸”ä¸å¯å˜ï¼Œå¸¸ç”¨äºå¯¹è±¡å±æ€§é”®ï¼ˆES2015+ï¼‰</td></tr></tbody></table><blockquote><p>âœ… <strong>å…±æ€§</strong>ï¼šæŒ‰å€¼å­˜å‚¨ã€ä¸å¯å˜ã€ç›´æ¥æ“ä½œå€¼ã€‚</p></blockquote><hr><h3 id="äºŒã€å…³é”®åŒºåˆ«" tabindex="-1">äºŒã€å…³é”®åŒºåˆ« <a class="header-anchor" href="#äºŒã€å…³é”®åŒºåˆ«" aria-label="Permalink to â€œäºŒã€å…³é”®åŒºåˆ«â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å¯¹æ¯”é¡¹</th><th><code>null</code> vs <code>undefined</code></th><th><code>number</code> vs <code>bigint</code></th><th><code>symbol</code> ç‰¹æ€§</th></tr></thead><tbody><tr><td><strong>å«ä¹‰</strong></td><td><code>null</code> æ˜¯èµ‹å€¼çš„ç©ºï¼›<code>undefined</code> æ˜¯æœªåˆå§‹åŒ–</td><td><code>number</code> æœ‰ç²¾åº¦é™åˆ¶ï¼ˆ<code>Number.MAX_SAFE_INTEGER</code>ï¼‰ï¼›<code>bigint</code> æ— </td><td>æ¯æ¬¡ <code>Symbol()</code> éƒ½å”¯ä¸€ï¼Œå³ä½¿æè¿°ç›¸åŒ</td></tr><tr><td><strong>ç±»å‹</strong></td><td><code>typeof null</code> â†’ <code>&#39;object&#39;</code>ï¼ˆå†å² bugï¼‰<br><code>typeof undefined</code> â†’ <code>&#39;undefined&#39;</code></td><td><code>typeof 123</code> â†’ <code>&#39;number&#39;</code><br><code>typeof 123n</code> â†’ <code>&#39;bigint&#39;</code></td><td><code>typeof Symbol()</code> â†’ <code>&#39;symbol&#39;</code></td></tr><tr><td><strong>è½¬æ¢</strong></td><td><code>null == undefined</code> â†’ <code>true</code><br><code>null === undefined</code> â†’ <code>false</code></td><td>ä¸èƒ½ç›´æ¥è¿ç®—ï¼š<code>1n + 1</code> âŒï¼Œéœ€æ˜¾å¼è½¬æ¢</td><td>ä¸èƒ½è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ï¼ˆé¿å…æ„å¤–å±æ€§è®¿é—®ï¼‰</td></tr></tbody></table><hr><h3 id="ä¸‰ã€å¦‚ä½•åˆ¤æ–­" tabindex="-1">ä¸‰ã€å¦‚ä½•åˆ¤æ–­ï¼Ÿ <a class="header-anchor" href="#ä¸‰ã€å¦‚ä½•åˆ¤æ–­" aria-label="Permalink to â€œä¸‰ã€å¦‚ä½•åˆ¤æ–­ï¼Ÿâ€">â€‹</a></h3><ul><li><strong><code>typeof</code></strong>ï¼šå¯åŒºåˆ†é™¤ <code>null</code> å¤–çš„æ‰€æœ‰åŸºæœ¬ç±»å‹<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // &#39;object&#39; âŒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // &#39;undefined&#39; âœ…</span></span></code></pre></div></li><li><strong><code>Object.prototype.toString.call()</code></strong>ï¼šç²¾å‡†åˆ¤æ–­<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Null]&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Undefined]&#39;</span></span></code></pre></div></li></ul><hr><h3 id="å››ã€æ³¨æ„" tabindex="-1">å››ã€æ³¨æ„ <a class="header-anchor" href="#å››ã€æ³¨æ„" aria-label="Permalink to â€œå››ã€æ³¨æ„â€">â€‹</a></h3><ul><li><strong>åŸºæœ¬ç±»å‹ â‰  å¯¹è±¡</strong>ï¼šä½†å¯é€šè¿‡â€œè£…ç®±â€ä¸´æ—¶è½¬ä¸ºå¯¹è±¡ï¼ˆå¦‚ <code>&#39;hello&#39;.toUpperCase()</code>ï¼‰ï¼›</li><li><strong><code>NaN</code> å±äº <code>number</code></strong>ï¼Œä¸” <code>NaN !== NaN</code>ï¼Œç”¨ <code>Number.isNaN()</code> åˆ¤æ–­ã€‚</li></ul><blockquote><p>ğŸ’¡ è®°ä½ï¼šJS ä¸­åªæœ‰è¿™ 7 ç§åŸå§‹ç±»å‹ï¼Œå…¶ä½™ï¼ˆå¦‚æ•°ç»„ã€å‡½æ•°ã€æ—¥æœŸï¼‰éƒ½æ˜¯ <code>object</code>ã€‚</p></blockquote><h2 id="æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼æœ‰å“ªäº›" tabindex="-1">æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼æœ‰å“ªäº› <a class="header-anchor" href="#æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼æœ‰å“ªäº›" aria-label="Permalink to â€œæ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼æœ‰å“ªäº›â€">â€‹</a></h2><p>JavaScript ä¸­æ£€æµ‹æ•°æ®ç±»å‹ä¸»è¦æœ‰ä»¥ä¸‹ <strong>5 ç§æ–¹å¼</strong>ï¼Œå„æœ‰é€‚ç”¨åœºæ™¯å’Œå±€é™ï¼š</p><hr><h3 id="_1-typeof-é€‚åˆåŸºæœ¬ç±»å‹" tabindex="-1">1. <strong><code>typeof</code></strong>ï¼ˆé€‚åˆåŸºæœ¬ç±»å‹ï¼‰ <a class="header-anchor" href="#_1-typeof-é€‚åˆåŸºæœ¬ç±»å‹" aria-label="Permalink to â€œ1. typeofï¼ˆé€‚åˆåŸºæœ¬ç±»å‹ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // &#39;number&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;hello&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // &#39;string&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // &#39;boolean&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // &#39;undefined&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;symbol&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 123</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">n</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // &#39;bigint&#39;ï¼ˆES2020+ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;object&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;object&#39; âŒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // &#39;object&#39; âŒï¼ˆå†å² bugï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;function&#39; âœ…</span></span></code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šå¿«é€Ÿåˆ¤æ–­åŸºæœ¬ç±»å‹ + å‡½æ•°<br> âŒ ç¼ºç‚¹ï¼šæ— æ³•åŒºåˆ† <code>null</code>ã€æ•°ç»„ã€æ™®é€šå¯¹è±¡</p><hr><h3 id="_2-instanceof-åˆ¤æ–­å¼•ç”¨ç±»å‹æ„é€ å‡½æ•°" tabindex="-1">2. <strong><code>instanceof</code></strong>ï¼ˆåˆ¤æ–­å¼•ç”¨ç±»å‹æ„é€ å‡½æ•°ï¼‰ <a class="header-anchor" href="#_2-instanceof-åˆ¤æ–­å¼•ç”¨ç±»å‹æ„é€ å‡½æ•°" aria-label="Permalink to â€œ2. instanceofï¼ˆåˆ¤æ–­å¼•ç”¨ç±»å‹æ„é€ å‡½æ•°ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">abc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegExp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // true</span></span></code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šå¯è¯†åˆ«è‡ªå®šä¹‰ç±»ã€å†…ç½®å¼•ç”¨ç±»å‹<br> âŒ ç¼ºç‚¹ï¼š</p><ul><li>è·¨ iframe/window å¤±æ•ˆï¼ˆä¸åŒå…¨å±€ç¯å¢ƒï¼‰ï¼›</li><li>æ— æ³•ç”¨äºåŸºæœ¬ç±»å‹ï¼ˆå¦‚ <code>42 instanceof Number</code> â†’ falseï¼‰</li></ul><hr><h3 id="_3-object-prototype-tostring-call-æœ€å‡†ç¡®é€šç”¨" tabindex="-1">3. <strong><code>Object.prototype.toString.call()</code></strong>ï¼ˆæœ€å‡†ç¡®é€šç”¨ï¼‰ <a class="header-anchor" href="#_3-object-prototype-tostring-call-æœ€å‡†ç¡®é€šç”¨" aria-label="Permalink to â€œ3. Object.prototype.toString.call()ï¼ˆæœ€å‡†ç¡®é€šç”¨ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Number]&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object String]&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Null]&#39; âœ…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Undefined]&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([])        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Array]&#39; âœ…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;[object Date]&#39;</span></span></code></pre></div><p>âœ… ä¼˜ç‚¹ï¼š<strong>å”¯ä¸€èƒ½å‡†ç¡®åŒºåˆ†æ‰€æœ‰å†…ç½®ç±»å‹</strong>çš„æ–¹æ³•<br> âŒ ç¼ºç‚¹ï¼šå†™æ³•ç•¥é•¿ï¼Œéœ€è°ƒç”¨ <code>call</code></p><blockquote><p>ğŸ“Œ æ¨èå°è£…ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> toType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.toString.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div></blockquote><hr><h3 id="_4-array-isarray-ä¸“ç”¨äºæ•°ç»„" tabindex="-1">4. <strong><code>Array.isArray()</code></strong>ï¼ˆä¸“ç”¨äºæ•°ç»„ï¼‰ <a class="header-anchor" href="#_4-array-isarray-ä¸“ç”¨äºæ•°ç»„" aria-label="Permalink to â€œ4. Array.isArray()ï¼ˆä¸“ç”¨äºæ•°ç»„ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([])      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({})      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre></div><p>âœ… ä¼˜ç‚¹ï¼šå¯é ã€ç®€æ´ã€è·¨ frame å®‰å…¨<br> âŒ ç¼ºç‚¹ï¼šä»…é™æ•°ç»„</p><hr><h3 id="_5-constructor-å±æ€§-ä¸æ¨è" tabindex="-1">5. <strong><code>constructor</code> å±æ€§</strong>ï¼ˆä¸æ¨èï¼‰ <a class="header-anchor" href="#_5-constructor-å±æ€§-ä¸æ¨è" aria-label="Permalink to â€œ5. constructor å±æ€§ï¼ˆä¸æ¨èï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Number  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div><p>âŒ ç¼ºç‚¹ï¼š</p><ul><li>å¯è¢«ç¯¡æ”¹ï¼ˆ<code>obj.constructor = AnotherClass</code>ï¼‰ï¼›</li><li>åŸå‹é“¾æ–­è£‚æ—¶å¤±æ•ˆï¼›</li><li><code>null</code>/<code>undefined</code> æ—  <code>constructor</code></li></ul><hr><h3 id="æ€»ç»“-å¦‚ä½•é€‰æ‹©" tabindex="-1">æ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ <a class="header-anchor" href="#æ€»ç»“-å¦‚ä½•é€‰æ‹©" aria-label="Permalink to â€œæ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ³•</th></tr></thead><tbody><tr><td>åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼ˆé™¤ <code>null</code>ï¼‰</td><td><code>typeof</code></td></tr><tr><td>åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„</td><td><code>Array.isArray()</code></td></tr><tr><td>ç²¾ç¡®åˆ¤æ–­ä»»æ„ç±»å‹ï¼ˆåŒ…æ‹¬ <code>null</code>ã€<code>Date</code>ã€<code>RegExp</code> ç­‰ï¼‰</td><td><code>Object.prototype.toString.call()</code></td></tr><tr><td>åˆ¤æ–­è‡ªå®šä¹‰ç±»å®ä¾‹ï¼ˆåŒçª—å£ï¼‰</td><td><code>instanceof</code></td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>é»„é‡‘ç»„åˆ</strong>ï¼š</p><ul><li>åŸºæœ¬ç±»å‹ â†’ <code>typeof</code></li><li>æ•°ç»„ â†’ <code>Array.isArray()</code></li><li>å…¶ä»–å¯¹è±¡ â†’ <code>toString.call()</code></li></ul></blockquote><h2 id="è¯·ç®€è¿°-js-ä¸­çš„-this" tabindex="-1">è¯·ç®€è¿° JS ä¸­çš„ <code>this</code> <a class="header-anchor" href="#è¯·ç®€è¿°-js-ä¸­çš„-this" aria-label="Permalink to â€œè¯·ç®€è¿° JS ä¸­çš„ thisâ€">â€‹</a></h2><p><code>this</code> æ˜¯ JavaScript ä¸­çš„<strong>è¿è¡Œæ—¶ä¸Šä¸‹æ–‡å¯¹è±¡</strong>ï¼Œå…¶å€¼ç”±<strong>å‡½æ•°è°ƒç”¨æ–¹å¼</strong>å†³å®šï¼Œè€Œéå®šä¹‰ä½ç½®ã€‚</p><hr><h3 id="ä¸€ã€ç»‘å®šè§„åˆ™-ä¼˜å…ˆçº§ä»é«˜åˆ°ä½" tabindex="-1">ä¸€ã€ç»‘å®šè§„åˆ™ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ <a class="header-anchor" href="#ä¸€ã€ç»‘å®šè§„åˆ™-ä¼˜å…ˆçº§ä»é«˜åˆ°ä½" aria-label="Permalink to â€œä¸€ã€ç»‘å®šè§„åˆ™ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰â€">â€‹</a></h3><ol><li><p><strong>new ç»‘å®š</strong><br> ä½¿ç”¨ <code>new</code> è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œ<code>this</code> æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this â†’ obj</span></span></code></pre></div></li><li><p><strong>æ˜¾å¼ç»‘å®š</strong>ï¼ˆ<code>call</code> / <code>apply</code> / <code>bind</code>ï¼‰<br> å¼ºåˆ¶æŒ‡å®š <code>this</code>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this â†’ obj</span></span></code></pre></div></li><li><p><strong>éšå¼ç»‘å®š</strong>ï¼ˆå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼‰<br> å‡½æ•°ä½œä¸ºå¯¹è±¡å±æ€§è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code> æŒ‡å‘è¯¥å¯¹è±¡ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this â†’ obj</span></span></code></pre></div><p>âš ï¸ æ³¨æ„â€œéšå¼ä¸¢å¤±â€ï¼š<code>const fn = obj.method; fn();</code> â†’ <code>this</code> å˜ä¸ºå…¨å±€æˆ– <code>undefined</code>ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰</p></li><li><p><strong>é»˜è®¤ç»‘å®š</strong></p><ul><li>éä¸¥æ ¼æ¨¡å¼ï¼š<code>this</code> â†’ å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯ <code>window</code>ï¼‰</li><li>ä¸¥æ ¼æ¨¡å¼ï¼š<code>this</code> â†’ <code>undefined</code></li></ul></li></ol><hr><h3 id="äºŒã€ç‰¹æ®Šåœºæ™¯" tabindex="-1">äºŒã€ç‰¹æ®Šåœºæ™¯ <a class="header-anchor" href="#äºŒã€ç‰¹æ®Šåœºæ™¯" aria-label="Permalink to â€œäºŒã€ç‰¹æ®Šåœºæ™¯â€">â€‹</a></h3><ul><li><p><strong>ç®­å¤´å‡½æ•°</strong>ï¼šæ²¡æœ‰è‡ªå·±çš„ <code>this</code>ï¼Œç»§æ‰¿<strong>å¤–å±‚ä½œç”¨åŸŸçš„ <code>this</code></strong>ï¼ˆå®šä¹‰æ—¶ç¡®å®šï¼Œä¸å¯æ”¹å˜ï¼‰</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this ä¸æ˜¯ objï¼Œè€Œæ˜¯å¤–å±‚ï¼ˆå¦‚ windowï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li><li><p><strong>äº‹ä»¶å›è°ƒ</strong>ï¼š<code>this</code> æŒ‡å‘è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ </p></li><li><p><strong>å®šæ—¶å™¨å›è°ƒ</strong>ï¼ˆ<code>setTimeout</code>ï¼‰ï¼š<code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰</p></li></ul><hr><h3 id="ä¸‰ã€æ€»ç»“å£è¯€" tabindex="-1">ä¸‰ã€æ€»ç»“å£è¯€ <a class="header-anchor" href="#ä¸‰ã€æ€»ç»“å£è¯€" aria-label="Permalink to â€œä¸‰ã€æ€»ç»“å£è¯€â€">â€‹</a></h3><blockquote><p><strong>è°è°ƒç”¨ï¼Œthis å°±æ˜¯è°ï¼›<br> ç®­å¤´å‡½æ•°çœ‹å¤–å±‚ï¼›<br> new å‡ºæ¥æ˜¯å®ä¾‹ï¼›<br> æ˜¾å¼ç»‘å®šæœ€ä¼˜å…ˆã€‚</strong></p></blockquote><blockquote><p>ğŸ’¡ å®è·µå»ºè®®ï¼šé¿å…ä¾èµ–åŠ¨æ€ <code>this</code>ï¼Œå¯ç”¨ç®­å¤´å‡½æ•°æˆ– <code>.bind()</code> å›ºåŒ–ä¸Šä¸‹æ–‡ã€‚</p></blockquote><h2 id="new-æ“ä½œç¬¦åšäº†ä»€ä¹ˆ" tabindex="-1"><code>new</code> æ“ä½œç¬¦åšäº†ä»€ä¹ˆ <a class="header-anchor" href="#new-æ“ä½œç¬¦åšäº†ä»€ä¹ˆ" aria-label="Permalink to â€œnew æ“ä½œç¬¦åšäº†ä»€ä¹ˆâ€">â€‹</a></h2><p><code>new</code> æ“ä½œç¬¦ç”¨äºåˆ›å»ºä¸€ä¸ª<strong>ç”¨æˆ·å®šä¹‰å¯¹è±¡ç±»å‹</strong>æˆ–<strong>å†…ç½®å¯¹è±¡ç±»å‹</strong>çš„å®ä¾‹ï¼Œå…¶å†…éƒ¨æ‰§è¡Œä»¥ä¸‹ <strong>4 ä¸ªæ­¥éª¤</strong>ï¼š</p><hr><h3 id="_1-åˆ›å»ºä¸€ä¸ªæ–°ç©ºå¯¹è±¡" tabindex="-1">1. <strong>åˆ›å»ºä¸€ä¸ªæ–°ç©ºå¯¹è±¡</strong> <a class="header-anchor" href="#_1-åˆ›å»ºä¸€ä¸ªæ–°ç©ºå¯¹è±¡" aria-label="Permalink to â€œ1. åˆ›å»ºä¸€ä¸ªæ–°ç©ºå¯¹è±¡â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span></code></pre></div><h3 id="_2-é“¾æ¥åŸå‹-è®¾ç½®-proto" tabindex="-1">2. <strong>é“¾æ¥åŸå‹ï¼ˆè®¾ç½® <code>__proto__</code>ï¼‰</strong> <a class="header-anchor" href="#_2-é“¾æ¥åŸå‹-è®¾ç½®-proto" aria-label="Permalink to â€œ2. é“¾æ¥åŸå‹ï¼ˆè®¾ç½® __proto__ï¼‰â€">â€‹</a></h3><p>å°†æ–°å¯¹è±¡çš„ <code>[[Prototype]]</code>ï¼ˆå³ <code>__proto__</code>ï¼‰æŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__proto__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="_3-ç»‘å®š-this-å¹¶æ‰§è¡Œæ„é€ å‡½æ•°" tabindex="-1">3. <strong>ç»‘å®š <code>this</code> å¹¶æ‰§è¡Œæ„é€ å‡½æ•°</strong> <a class="header-anchor" href="#_3-ç»‘å®š-this-å¹¶æ‰§è¡Œæ„é€ å‡½æ•°" aria-label="Permalink to â€œ3. ç»‘å®š this å¹¶æ‰§è¡Œæ„é€ å‡½æ•°â€">â€‹</a></h3><p>å°†æ„é€ å‡½æ•°å†…çš„ <code>this</code> æŒ‡å‘æ–°å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå‡½æ•°ä½“ï¼ˆå¯ç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§/æ–¹æ³•ï¼‰ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Constructor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span></code></pre></div><h3 id="_4-è¿”å›æ–°å¯¹è±¡-é™¤éæ„é€ å‡½æ•°æ˜¾å¼è¿”å›å¼•ç”¨ç±»å‹" tabindex="-1">4. <strong>è¿”å›æ–°å¯¹è±¡ï¼ˆé™¤éæ„é€ å‡½æ•°æ˜¾å¼è¿”å›å¼•ç”¨ç±»å‹ï¼‰</strong> <a class="header-anchor" href="#_4-è¿”å›æ–°å¯¹è±¡-é™¤éæ„é€ å‡½æ•°æ˜¾å¼è¿”å›å¼•ç”¨ç±»å‹" aria-label="Permalink to â€œ4. è¿”å›æ–°å¯¹è±¡ï¼ˆé™¤éæ„é€ å‡½æ•°æ˜¾å¼è¿”å›å¼•ç”¨ç±»å‹ï¼‰â€">â€‹</a></h3><ul><li>å¦‚æœæ„é€ å‡½æ•° <strong>è¿”å›åŸºæœ¬ç±»å‹</strong>ï¼ˆæˆ–æ—  <code>return</code>ï¼‰ï¼Œåˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼›</li><li>å¦‚æœ <strong>è¿”å›å¯¹è±¡/å‡½æ•°ç­‰å¼•ç”¨ç±»å‹</strong>ï¼Œåˆ™è¿”å›è¯¥å¼•ç”¨å€¼ï¼ˆè¦†ç›–é»˜è®¤å®ä¾‹ï¼‰ã€‚</li></ul><hr><h3 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to â€œç¤ºä¾‹â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // return {};</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // è‹¥å–æ¶ˆæ³¨é‡Šï¼Œåˆ™ new Person() è¿”å› {} è€Œéå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­‰ä»·äºï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. const p = {}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. p.__proto__ = Person.prototype</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. Person.call(p, &#39;Alice&#39;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4. return p</span></span></code></pre></div><blockquote><p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼š<code>new</code> çš„æ ¸å¿ƒæ˜¯ <strong>å»ºç«‹åŸå‹é“¾ + ç»‘å®š this</strong>ï¼Œå®ç°é¢å‘å¯¹è±¡çš„å®ä¾‹åŒ–ã€‚</p></blockquote><h2 id="amd-å’Œ-commonjs-çš„åŒºåˆ«" tabindex="-1">AMD å’Œ CommonJS çš„åŒºåˆ« <a class="header-anchor" href="#amd-å’Œ-commonjs-çš„åŒºåˆ«" aria-label="Permalink to â€œAMD å’Œ CommonJS çš„åŒºåˆ«â€">â€‹</a></h2><p>AMDï¼ˆAsynchronous Module Definitionï¼‰å’Œ CommonJS æ˜¯ä¸¤ç§ <strong>JavaScript æ¨¡å—è§„èŒƒ</strong>ï¼Œä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒå·®å¼‚" tabindex="-1">ä¸€ã€æ ¸å¿ƒå·®å¼‚ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒå·®å¼‚" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒå·®å¼‚â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><strong>AMD</strong></th><th><strong>CommonJS</strong></th></tr></thead><tbody><tr><td><strong>åŠ è½½æ–¹å¼</strong></td><td><strong>å¼‚æ­¥åŠ è½½</strong>ï¼ˆé€‚åˆæµè§ˆå™¨ï¼‰</td><td><strong>åŒæ­¥åŠ è½½</strong>ï¼ˆé€‚åˆæœåŠ¡ç«¯ï¼‰</td></tr><tr><td><strong>è¯­æ³•</strong></td><td><code>define([&#39;dep&#39;], function(dep) { ... })</code></td><td><code>const dep = require(&#39;dep&#39;);</code><br><code>module.exports = ...</code></td></tr><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>ä¾èµ–åŠ è½½å®Œå<strong>å›è°ƒæ‰§è¡Œ</strong></td><td><strong>é¡ºåºæ‰§è¡Œ</strong>ï¼Œé‡ <code>require</code> ç«‹å³åŠ è½½</td></tr><tr><td><strong>é€‚ç”¨ç¯å¢ƒ</strong></td><td>æµè§ˆå™¨ï¼ˆå¦‚ RequireJSï¼‰</td><td>Node.jsï¼ˆåŸç”Ÿæ”¯æŒï¼‰</td></tr><tr><td><strong>åŠ¨æ€ require</strong></td><td>ä¸æ”¯æŒï¼ˆä¾èµ–éœ€å‰ç½®å£°æ˜ï¼‰</td><td>æ”¯æŒï¼ˆå¯åœ¨å‡½æ•°å†… <code>require</code>ï¼‰</td></tr></tbody></table><hr><h3 id="äºŒã€ä»£ç ç¤ºä¾‹" tabindex="-1">äºŒã€ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#äºŒã€ä»£ç ç¤ºä¾‹" aria-label="Permalink to â€œäºŒã€ä»£ç ç¤ºä¾‹â€">â€‹</a></h3><h4 id="amd-requirejs" tabindex="-1">AMDï¼ˆRequireJSï¼‰ <a class="header-anchor" href="#amd-requirejs" aria-label="Permalink to â€œAMDï¼ˆRequireJSï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®šä¹‰æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./math&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">math</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    add: math.add</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">myModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  myModule.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h4 id="commonjs-node-js" tabindex="-1">CommonJSï¼ˆNode.jsï¼‰ <a class="header-anchor" href="#commonjs-node-js" aria-label="Permalink to â€œCommonJSï¼ˆNode.jsï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// math.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> math</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./math&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><hr><h3 id="ä¸‰ã€ä¸ºä»€ä¹ˆæœ‰è¿™ç§åŒºåˆ«" tabindex="-1">ä¸‰ã€ä¸ºä»€ä¹ˆæœ‰è¿™ç§åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#ä¸‰ã€ä¸ºä»€ä¹ˆæœ‰è¿™ç§åŒºåˆ«" aria-label="Permalink to â€œä¸‰ã€ä¸ºä»€ä¹ˆæœ‰è¿™ç§åŒºåˆ«ï¼Ÿâ€">â€‹</a></h3><ul><li><strong>æµè§ˆå™¨ç¯å¢ƒ</strong>ï¼šJS æ–‡ä»¶é€šè¿‡ <code>&lt;script&gt;</code> åŠ è½½ï¼Œ<strong>ç½‘ç»œ I/O æ…¢</strong> â†’ éœ€å¼‚æ­¥é¿å…é˜»å¡ï¼›</li><li><strong>æœåŠ¡ç«¯ç¯å¢ƒ</strong>ï¼šæ–‡ä»¶åœ¨æœ¬åœ°ç£ç›˜ï¼Œ<strong>è¯»å–å¿«</strong> â†’ åŒæ­¥æ›´ç®€å•ç›´è§‚ã€‚</li></ul><hr><h3 id="å››ã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆ" tabindex="-1">å››ã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆ <a class="header-anchor" href="#å››ã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆ" aria-label="Permalink to â€œå››ã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆâ€">â€‹</a></h3><ul><li><strong>ES Modulesï¼ˆESMï¼‰</strong>ï¼š <ul><li>æ ‡å‡†åŒ–ï¼ˆ<code>import</code> / <code>export</code>ï¼‰</li><li>æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼ˆ<code>&lt;script type=&quot;module&quot;&gt;</code>ï¼‰</li><li>Node.js ä¹Ÿå·²æ”¯æŒï¼ˆ<code>.mjs</code> æˆ– <code>package.json</code> ä¸­è®¾ <code>&quot;type&quot;: &quot;module&quot;</code>ï¼‰</li></ul></li></ul><blockquote><p>ğŸ’¡ <strong>ç°çŠ¶</strong>ï¼šAMD å·²åŸºæœ¬æ·˜æ±°ï¼›CommonJS ä»åœ¨ Node.js å¹¿æ³›ä½¿ç”¨ï¼›<strong>æ–°é¡¹ç›®ä¼˜å…ˆç”¨ ESM</strong>ã€‚</p></blockquote><h2 id="es6-æ¨¡å—ä¸-commonjs-æ¨¡å—æœ‰ä»€ä¹ˆå¼‚åŒ" tabindex="-1">ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ <a class="header-anchor" href="#es6-æ¨¡å—ä¸-commonjs-æ¨¡å—æœ‰ä»€ä¹ˆå¼‚åŒ" aria-label="Permalink to â€œES6 æ¨¡å—ä¸ CommonJS æ¨¡å—æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿâ€">â€‹</a></h2><p>ES6 æ¨¡å—ï¼ˆESMï¼‰å’Œ CommonJSï¼ˆCJSï¼‰æ˜¯ä¸¤ç§ä¸»æµçš„ JavaScript æ¨¡å—ç³»ç»Ÿï¼Œæ ¸å¿ƒå¼‚åŒå¦‚ä¸‹ï¼š</p><hr><h3 id="ä¸€ã€ç›¸åŒç‚¹" tabindex="-1">ä¸€ã€<strong>ç›¸åŒç‚¹</strong> <a class="header-anchor" href="#ä¸€ã€ç›¸åŒç‚¹" aria-label="Permalink to â€œä¸€ã€ç›¸åŒç‚¹â€">â€‹</a></h3><ul><li>éƒ½ç”¨äº<strong>ç»„ç»‡ä»£ç </strong>ã€<strong>ç®¡ç†ä¾èµ–</strong>ã€<strong>é¿å…å…¨å±€æ±¡æŸ“</strong>ï¼›</li><li>éƒ½æ”¯æŒ<strong>å¯¼å‡º/å¯¼å…¥</strong>å€¼ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰ã€‚</li></ul><hr><h3 id="äºŒã€æ ¸å¿ƒåŒºåˆ«" tabindex="-1">äºŒã€<strong>æ ¸å¿ƒåŒºåˆ«</strong> <a class="header-anchor" href="#äºŒã€æ ¸å¿ƒåŒºåˆ«" aria-label="Permalink to â€œäºŒã€æ ¸å¿ƒåŒºåˆ«â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><strong>ES6 æ¨¡å—ï¼ˆESMï¼‰</strong></th><th><strong>CommonJSï¼ˆCJSï¼‰</strong></th></tr></thead><tbody><tr><td><strong>åŠ è½½æ–¹å¼</strong></td><td><strong>ç¼–è¯‘æ—¶é™æ€åˆ†æ</strong>ï¼ˆ<code>import</code> å¿…é¡»åœ¨é¡¶å±‚ï¼‰</td><td><strong>è¿è¡Œæ—¶åŠ¨æ€åŠ è½½</strong>ï¼ˆ<code>require()</code> å¯åœ¨ä»»æ„ä½ç½®ï¼‰</td></tr><tr><td><strong>å¯¼å‡ºæœ¬è´¨</strong></td><td><strong>å€¼çš„å®æ—¶åªè¯»å¼•ç”¨</strong>ï¼ˆlive bindingï¼‰</td><td><strong>å€¼çš„æµ…æ‹·è´</strong>ï¼ˆå¯¼å‡ºæ—¶å³å›ºå®šï¼‰</td></tr><tr><td><strong>è¯­æ³•</strong></td><td><code>import ... from ...</code><br><code>export default / {}</code></td><td><code>const x = require(&#39;x&#39;)</code><br><code>module.exports = ...</code></td></tr><tr><td><strong>å¼‚æ­¥æ”¯æŒ</strong></td><td>åŸç”Ÿæ”¯æŒ Top-level <code>await</code>ï¼ˆES2022ï¼‰</td><td>éœ€åœ¨ async å‡½æ•°å†…ä½¿ç”¨ <code>await</code></td></tr><tr><td><strong>å¾ªç¯ä¾èµ–</strong></td><td>æ›´å®‰å…¨ï¼ˆå›  live bindingï¼‰</td><td>å®¹æ˜“å‡ºé”™ï¼ˆå¯èƒ½æ‹¿åˆ°æœªåˆå§‹åŒ–çš„å€¼ï¼‰</td></tr><tr><td><strong>é€‚ç”¨ç¯å¢ƒ</strong></td><td>æµè§ˆå™¨åŸç”Ÿæ”¯æŒ<br>Node.jsï¼ˆéœ€ <code>.mjs</code> æˆ– <code>&quot;type&quot;: &quot;module&quot;</code>ï¼‰</td><td>Node.js åŸç”Ÿæ”¯æŒ<br>æµè§ˆå™¨éœ€æ‰“åŒ…å·¥å…·</td></tr></tbody></table><hr><h3 id="ä¸‰ã€å…³é”®è¡Œä¸ºå¯¹æ¯”" tabindex="-1">ä¸‰ã€å…³é”®è¡Œä¸ºå¯¹æ¯” <a class="header-anchor" href="#ä¸‰ã€å…³é”®è¡Œä¸ºå¯¹æ¯”" aria-label="Permalink to â€œä¸‰ã€å…³é”®è¡Œä¸ºå¯¹æ¯”â€">â€‹</a></h3><h4 id="_1-å¯¼å‡ºæ˜¯å¼•ç”¨-vs-æ‹·è´" tabindex="-1">1. <strong>å¯¼å‡ºæ˜¯å¼•ç”¨ vs æ‹·è´</strong> <a class="header-anchor" href="#_1-å¯¼å‡ºæ˜¯å¼•ç”¨-vs-æ‹·è´" aria-label="Permalink to â€œ1. å¯¼å‡ºæ˜¯å¼•ç”¨ vs æ‹·è´â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// counter.js (ESM)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js (ESM)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { count, inc } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./counter.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">inc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 â†’ å®æ—¶åæ˜ å˜åŒ–</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CJS ç­‰æ•ˆï¼šmain.js ä¸­ count å§‹ç»ˆä¸º 0ï¼ˆæ‹·è´ï¼‰</span></span></code></pre></div><h4 id="_2-é™æ€-vs-åŠ¨æ€" tabindex="-1">2. <strong>é™æ€ vs åŠ¨æ€</strong> <a class="header-anchor" href="#_2-é™æ€-vs-åŠ¨æ€" aria-label="Permalink to â€œ2. é™æ€ vs åŠ¨æ€â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ESM âŒ æŠ¥é”™ï¼šimport å¿…é¡»åœ¨é¡¶å±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condition) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> foo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CJS âœ… åˆæ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condition) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> foo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="_3-é»˜è®¤å¯¼å‡º" tabindex="-1">3. <strong>é»˜è®¤å¯¼å‡º</strong> <a class="header-anchor" href="#_3-é»˜è®¤å¯¼å‡º" aria-label="Permalink to â€œ3. é»˜è®¤å¯¼å‡ºâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ESM</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯åŒ¿å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myFunc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åå­—å¯è‡ªå®šä¹‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CJS</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myFunc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./mod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼•ç”¨æ•´ä¸ªå¯¼å‡ºå¯¹è±¡</span></span></code></pre></div><hr><h3 id="å››ã€äº’æ“ä½œ-node-js-ä¸­" tabindex="-1">å››ã€äº’æ“ä½œï¼ˆNode.js ä¸­ï¼‰ <a class="header-anchor" href="#å››ã€äº’æ“ä½œ-node-js-ä¸­" aria-label="Permalink to â€œå››ã€äº’æ“ä½œï¼ˆNode.js ä¸­ï¼‰â€">â€‹</a></h3><ul><li><strong>ESM å¯¼å…¥ CJS</strong>ï¼šâœ… æ”¯æŒï¼ˆ<code>import fs from &#39;fs&#39;</code>ï¼‰</li><li><strong>CJS å¯¼å…¥ ESM</strong>ï¼šâŒ ä¸æ”¯æŒï¼ˆ<code>require()</code> æ— æ³•åŠ è½½ ESMï¼‰</li></ul><blockquote><p>âš ï¸ æ··ç”¨éœ€è°¨æ…ï¼Œå»ºè®®é¡¹ç›®ç»Ÿä¸€æ¨¡å—è§„èŒƒã€‚</p></blockquote><hr><h3 id="äº”ã€æ€»ç»“" tabindex="-1">äº”ã€æ€»ç»“ <a class="header-anchor" href="#äº”ã€æ€»ç»“" aria-label="Permalink to â€œäº”ã€æ€»ç»“â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨è</th></tr></thead><tbody><tr><td>æ–°é¡¹ç›®ï¼ˆå‰ç«¯/å…¨æ ˆï¼‰</td><td><strong>ESM</strong>ï¼ˆæ ‡å‡†ã€é™æ€åˆ†æã€Tree-shaking å‹å¥½ï¼‰</td></tr><tr><td>Node.js è€é¡¹ç›®</td><td><strong>CommonJS</strong></td></tr><tr><td>éœ€åŠ¨æ€åŠ è½½</td><td>CJSï¼ˆæˆ– ESM çš„ <code>import()</code> åŠ¨æ€å¯¼å…¥ï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>è¶‹åŠ¿</strong>ï¼šESM æ˜¯ JS å®˜æ–¹æ ‡å‡†ï¼Œæœªæ¥ä¸»æµï¼›ç°ä»£æ„å»ºå·¥å…·ï¼ˆViteã€Webpackï¼‰å‡ä¼˜å…ˆæ”¯æŒ ESMã€‚</p></blockquote><h2 id="letã€constã€varçš„åŒºåˆ«" tabindex="-1">letã€constã€varçš„åŒºåˆ« <a class="header-anchor" href="#letã€constã€varçš„åŒºåˆ«" aria-label="Permalink to â€œletã€constã€varçš„åŒºåˆ«â€">â€‹</a></h2><p><code>let</code>ã€<code>const</code> å’Œ <code>var</code> æ˜¯ JavaScript ä¸­å£°æ˜å˜é‡çš„ä¸‰ç§æ–¹å¼ï¼Œæ ¸å¿ƒåŒºåˆ«å¦‚ä¸‹ï¼š</p><hr><h3 id="ä¸€ã€ä½œç”¨åŸŸ-scope" tabindex="-1">ä¸€ã€ä½œç”¨åŸŸï¼ˆScopeï¼‰ <a class="header-anchor" href="#ä¸€ã€ä½œç”¨åŸŸ-scope" aria-label="Permalink to â€œä¸€ã€ä½œç”¨åŸŸï¼ˆScopeï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å£°æ˜æ–¹å¼</th><th>ä½œç”¨åŸŸ</th></tr></thead><tbody><tr><td><code>var</code></td><td><strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ï¼ˆfunction-scopedï¼‰</td></tr><tr><td><code>let</code> / <code>const</code></td><td><strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼ˆblock-scopedï¼Œå¦‚ <code>{}</code>ã€<code>if</code>ã€<code>for</code> å†…ï¼‰</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 âœ…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ReferenceError âŒ</span></span></code></pre></div><hr><h3 id="äºŒã€å˜é‡æå‡-hoisting" tabindex="-1">äºŒã€å˜é‡æå‡ï¼ˆHoistingï¼‰ <a class="header-anchor" href="#äºŒã€å˜é‡æå‡-hoisting" aria-label="Permalink to â€œäºŒã€å˜é‡æå‡ï¼ˆHoistingï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å£°æ˜æ–¹å¼</th><th>æå‡è¡Œä¸º</th></tr></thead><tbody><tr><td><code>var</code></td><td>å£°æ˜å’Œåˆå§‹åŒ–éƒ½è¢«æå‡ï¼ˆåˆå§‹å€¼ä¸º <code>undefined</code>ï¼‰</td></tr><tr><td><code>let</code> / <code>const</code></td><td><strong>ä»…å£°æ˜æå‡</strong>ï¼Œä½†å­˜åœ¨<strong>æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰</strong>ï¼Œè®¿é—®ä¼šæŠ¥é”™</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ReferenceErrorï¼ˆTDZï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><hr><h3 id="ä¸‰ã€é‡å¤å£°æ˜" tabindex="-1">ä¸‰ã€é‡å¤å£°æ˜ <a class="header-anchor" href="#ä¸‰ã€é‡å¤å£°æ˜" aria-label="Permalink to â€œä¸‰ã€é‡å¤å£°æ˜â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å£°æ˜æ–¹å¼</th><th>èƒ½å¦é‡å¤å£°æ˜</th></tr></thead><tbody><tr><td><code>var</code></td><td>âœ… å…è®¸ï¼ˆè¦†ç›–ï¼‰</td></tr><tr><td><code>let</code> / <code>const</code></td><td>âŒ åŒä¸€ä½œç”¨åŸŸå†…ç¦æ­¢é‡å¤å£°æ˜</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OK</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// SyntaxError</span></span></code></pre></div><hr><h3 id="å››ã€èµ‹å€¼ä¸å¯å˜æ€§" tabindex="-1">å››ã€èµ‹å€¼ä¸å¯å˜æ€§ <a class="header-anchor" href="#å››ã€èµ‹å€¼ä¸å¯å˜æ€§" aria-label="Permalink to â€œå››ã€èµ‹å€¼ä¸å¯å˜æ€§â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å£°æ˜æ–¹å¼</th><th>æ˜¯å¦å¯é‡æ–°èµ‹å€¼</th></tr></thead><tbody><tr><td><code>var</code> / <code>let</code></td><td>âœ… å¯é‡æ–°èµ‹å€¼</td></tr><tr><td><code>const</code></td><td>âŒ <strong>ä¸èƒ½é‡æ–°èµ‹å€¼</strong>ï¼ˆä½†å¯¹è±¡/æ•°ç»„å†…å®¹å¯å˜ï¼‰</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Bob&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… å…è®¸ï¼ˆä¿®æ”¹å±æ€§ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ TypeErrorï¼ˆä¸èƒ½é‡æ–°èµ‹å€¼ï¼‰</span></span></code></pre></div><hr><h3 id="äº”ã€å…¨å±€å¯¹è±¡ç»‘å®š" tabindex="-1">äº”ã€å…¨å±€å¯¹è±¡ç»‘å®š <a class="header-anchor" href="#äº”ã€å…¨å±€å¯¹è±¡ç»‘å®š" aria-label="Permalink to â€œäº”ã€å…¨å±€å¯¹è±¡ç»‘å®šâ€">â€‹</a></h3><ul><li><code>var</code> åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡ä¼š<strong>æŒ‚è½½åˆ°å…¨å±€å¯¹è±¡</strong>ï¼ˆæµè§ˆå™¨ä¸­æ˜¯ <code>window</code>ï¼‰ï¼›</li><li><code>let</code> / <code>const</code> <strong>ä¸ä¼š</strong>æŒ‚è½½ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window.a); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window.b); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre></div><hr><h3 id="æ€»ç»“å»ºè®®" tabindex="-1">æ€»ç»“å»ºè®® <a class="header-anchor" href="#æ€»ç»“å»ºè®®" aria-label="Permalink to â€œæ€»ç»“å»ºè®®â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨è</th></tr></thead><tbody><tr><td>å¸¸é‡ï¼ˆä¸é‡æ–°èµ‹å€¼ï¼‰</td><td><code>const</code>ï¼ˆä¼˜å…ˆï¼‰</td></tr><tr><td>å˜é‡ï¼ˆéœ€é‡æ–°èµ‹å€¼ï¼‰</td><td><code>let</code></td></tr><tr><td>é¿å…ä½¿ç”¨</td><td><code>var</code>ï¼ˆæ˜“å¼•å‘ä½œç”¨åŸŸå’Œæå‡é—®é¢˜ï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>åŸåˆ™</strong>ï¼šé»˜è®¤ç”¨ <code>const</code>ï¼Œéœ€è¦é‡èµ‹å€¼æ—¶æ”¹ç”¨ <code>let</code>ï¼Œ<strong>æ°¸è¿œä¸ç”¨ <code>var</code></strong>ã€‚</p></blockquote><h2 id="tdz-æš‚æ—¶æ€§æ­»åŒº" tabindex="-1">TDZ æš‚æ—¶æ€§æ­»åŒº <a class="header-anchor" href="#tdz-æš‚æ—¶æ€§æ­»åŒº" aria-label="Permalink to â€œTDZ æš‚æ—¶æ€§æ­»åŒºâ€">â€‹</a></h2><hr><h3 id="ä¸€ã€å®šä¹‰" tabindex="-1">ä¸€ã€å®šä¹‰ <a class="header-anchor" href="#ä¸€ã€å®šä¹‰" aria-label="Permalink to â€œä¸€ã€å®šä¹‰â€">â€‹</a></h3><p><strong>TDZ æ˜¯æŒ‡åœ¨ä»£ç å—ä¸­ï¼Œä»ä½œç”¨åŸŸå¼€å§‹åˆ°å˜é‡å®é™…å£°æ˜ï¼ˆåˆå§‹åŒ–ï¼‰ä¹‹é—´çš„åŒºåŸŸ</strong>ã€‚<br> åœ¨æ­¤åŒºåŸŸå†…è®¿é—® <code>let</code> / <code>const</code> å£°æ˜çš„å˜é‡ä¼šæŠ›å‡º <strong><code>ReferenceError</code></strong>ã€‚</p><hr><h3 id="äºŒã€ä¸ºä»€ä¹ˆå­˜åœ¨-tdz" tabindex="-1">äºŒã€ä¸ºä»€ä¹ˆå­˜åœ¨ TDZï¼Ÿ <a class="header-anchor" href="#äºŒã€ä¸ºä»€ä¹ˆå­˜åœ¨-tdz" aria-label="Permalink to â€œäºŒã€ä¸ºä»€ä¹ˆå­˜åœ¨ TDZï¼Ÿâ€">â€‹</a></h3><ul><li><code>let</code> / <code>const</code> è™½ç„¶å­˜åœ¨<strong>å˜é‡æå‡</strong>ï¼ˆhoistingï¼‰ï¼Œä½†<strong>ä¸ä¼šåƒ <code>var</code> é‚£æ ·åˆå§‹åŒ–ä¸º <code>undefined</code></strong>ï¼›</li><li>å¼•æ“åœ¨è¿›å…¥ä½œç”¨åŸŸæ—¶å°±â€œé¢„ç•™â€äº†å˜é‡åï¼Œä½†åœ¨æ‰§è¡Œåˆ°å£°æ˜è¯­å¥å‰ç¦æ­¢è®¿é—®ï¼Œä»¥é˜²æ­¢æ„å¤–ä½¿ç”¨æœªåˆå§‹åŒ–çš„å€¼ã€‚</li></ul><hr><h3 id="ä¸‰ã€ç¤ºä¾‹" tabindex="-1">ä¸‰ã€ç¤ºä¾‹ <a class="header-anchor" href="#ä¸‰ã€ç¤ºä¾‹" aria-label="Permalink to â€œä¸‰ã€ç¤ºä¾‹â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ReferenceError: Cannot access &#39;a&#39; before initialization</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TDZ èŒƒå›´ï¼šä»å—å¼€å§‹ â†’ åˆ° let/const å£°æ˜å¤„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TDZ ä¸­ï¼ŒæŠ¥é”™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>âœ… å¯¹æ¯” <code>var</code>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefinedï¼ˆæ—  TDZï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></blockquote><hr><h3 id="å››ã€tdz-çš„è¾¹ç•Œ" tabindex="-1">å››ã€TDZ çš„è¾¹ç•Œ <a class="header-anchor" href="#å››ã€tdz-çš„è¾¹ç•Œ" aria-label="Permalink to â€œå››ã€TDZ çš„è¾¹ç•Œâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>TDZ èµ·æ­¢ä½ç½®</th></tr></thead><tbody><tr><td>å—çº§ä½œç”¨åŸŸ</td><td><code>{</code> å¼€å§‹ â†’ <code>let/const</code> å£°æ˜å¤„</td></tr><tr><td>å‡½æ•°å‚æ•°</td><td>é»˜è®¤å€¼è¡¨è¾¾å¼ä¸­ï¼Œåç»­å‚æ•°å¯¹å‰é¢å‚æ•°æœ‰ TDZ</td></tr><tr><td>å…¨å±€ä½œç”¨åŸŸ</td><td>è„šæœ¬å¼€å§‹ â†’ <code>let/const</code> å£°æ˜å¤„</td></tr></tbody></table><h4 id="å‚æ•°-tdz-ç¤ºä¾‹" tabindex="-1">å‚æ•° TDZ ç¤ºä¾‹ï¼š <a class="header-anchor" href="#å‚æ•°-tdz-ç¤ºä¾‹" aria-label="Permalink to â€œå‚æ•° TDZ ç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ æŠ¥é”™ï¼a çš„é»˜è®¤å€¼ä¸­ b å¤„äº TDZ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b) { } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… åˆæ³•</span></span></code></pre></div><hr><h3 id="äº”ã€å¦‚ä½•é¿å…-tdz-é”™è¯¯" tabindex="-1">äº”ã€å¦‚ä½•é¿å… TDZ é”™è¯¯ï¼Ÿ <a class="header-anchor" href="#äº”ã€å¦‚ä½•é¿å…-tdz-é”™è¯¯" aria-label="Permalink to â€œäº”ã€å¦‚ä½•é¿å… TDZ é”™è¯¯ï¼Ÿâ€">â€‹</a></h3><ol><li><strong>å§‹ç»ˆå…ˆå£°æ˜å†ä½¿ç”¨</strong>ï¼›</li><li><strong>é¿å…åœ¨å£°æ˜å‰é€šè¿‡å‡½æ•°é—´æ¥è®¿é—®</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x); }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ å³ä½¿ x åœ¨åé¢å£°æ˜ï¼Œè°ƒç”¨æ—¶ä»åœ¨ TDZ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li></ol><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>TDZ æ˜¯ <code>let</code>/<code>const</code> çš„å®‰å…¨æœºåˆ¶ï¼šç¦æ­¢åœ¨å£°æ˜å‰è®¿é—®å˜é‡ï¼Œé¿å… <code>undefined</code> æ„å¤–æ±¡æŸ“é€»è¾‘ã€‚</strong></p></blockquote><h2 id="æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•" tabindex="-1">æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿ <a class="header-anchor" href="#æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•" aria-label="Permalink to â€œæ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿâ€">â€‹</a></h2><p>JavaScript æ•°ç»„çš„åŸç”Ÿæ–¹æ³•å¯åˆ†ä¸º <strong>7 å¤§ç±»</strong>ï¼Œå…± <strong>30+ ä¸ªå¸¸ç”¨æ–¹æ³•</strong>ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒæ–¹æ³•åˆ†ç±»ä¸ç”¨é€”ï¼ˆES5+ï¼‰ï¼š</p><hr><h3 id="ä¸€ã€å¢åˆ æ”¹-ä¼šæ”¹å˜åŸæ•°ç»„" tabindex="-1">ä¸€ã€<strong>å¢åˆ æ”¹ï¼ˆä¼šæ”¹å˜åŸæ•°ç»„ï¼‰</strong> <a class="header-anchor" href="#ä¸€ã€å¢åˆ æ”¹-ä¼šæ”¹å˜åŸæ•°ç»„" aria-label="Permalink to â€œä¸€ã€å¢åˆ æ”¹ï¼ˆä¼šæ”¹å˜åŸæ•°ç»„ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>push()</code></td><td>æœ«å°¾æ·»åŠ å…ƒç´ </td><td>æ–°é•¿åº¦</td></tr><tr><td><code>pop()</code></td><td>åˆ é™¤æœ«å°¾å…ƒç´ </td><td>è¢«åˆ å…ƒç´ </td></tr><tr><td><code>unshift()</code></td><td>å¼€å¤´æ·»åŠ å…ƒç´ </td><td>æ–°é•¿åº¦</td></tr><tr><td><code>shift()</code></td><td>åˆ é™¤å¼€å¤´å…ƒç´ </td><td>è¢«åˆ å…ƒç´ </td></tr><tr><td><code>splice(start, deleteCount, ...items)</code></td><td>åˆ é™¤/æ’å…¥/æ›¿æ¢</td><td>è¢«åˆ å…ƒç´ æ•°ç»„</td></tr></tbody></table><hr><h3 id="äºŒã€æŸ¥æ‰¾ä¸åˆ¤æ–­" tabindex="-1">äºŒã€<strong>æŸ¥æ‰¾ä¸åˆ¤æ–­</strong> <a class="header-anchor" href="#äºŒã€æŸ¥æ‰¾ä¸åˆ¤æ–­" aria-label="Permalink to â€œäºŒã€æŸ¥æ‰¾ä¸åˆ¤æ–­â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>indexOf()</code> / <code>lastIndexOf()</code></td><td>æŸ¥æ‰¾å…ƒç´ ç´¢å¼•</td><td>ç´¢å¼•ï¼ˆ-1 æœªæ‰¾åˆ°ï¼‰</td></tr><tr><td><code>includes()</code></td><td>åˆ¤æ–­æ˜¯å¦åŒ…å«</td><td><code>true</code>/<code>false</code></td></tr><tr><td><code>find()</code></td><td>æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ </td><td>å…ƒç´ ï¼ˆundefined æœªæ‰¾åˆ°ï¼‰</td></tr><tr><td><code>findIndex()</code></td><td>æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ç´¢å¼•</td><td>ç´¢å¼•ï¼ˆ-1 æœªæ‰¾åˆ°ï¼‰</td></tr><tr><td><code>some()</code></td><td>æ˜¯å¦æœ‰å…ƒç´ æ»¡è¶³æ¡ä»¶</td><td><code>true</code>/<code>false</code></td></tr><tr><td><code>every()</code></td><td>æ˜¯å¦æ‰€æœ‰å…ƒç´ æ»¡è¶³æ¡ä»¶</td><td><code>true</code>/<code>false</code></td></tr></tbody></table><hr><h3 id="ä¸‰ã€éå†" tabindex="-1">ä¸‰ã€<strong>éå†</strong> <a class="header-anchor" href="#ä¸‰ã€éå†" aria-label="Permalink to â€œä¸‰ã€éå†â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>å›è°ƒå‚æ•° <code>(item, index, arr)</code></th></tr></thead><tbody><tr><td><code>forEach()</code></td><td>éå†æ‰§è¡Œ</td><td>æ— è¿”å›å€¼</td></tr><tr><td><code>map()</code></td><td>æ˜ å°„æ–°æ•°ç»„</td><td><strong>æ–°æ•°ç»„</strong></td></tr><tr><td><code>filter()</code></td><td>è¿‡æ»¤å…ƒç´ </td><td><strong>æ–°æ•°ç»„</strong></td></tr><tr><td><code>reduce()</code> / <code>reduceRight()</code></td><td>ç´¯è®¡è®¡ç®—</td><td>ç´¯è®¡ç»“æœ</td></tr></tbody></table><hr><h3 id="å››ã€æ’åºä¸åè½¬" tabindex="-1">å››ã€<strong>æ’åºä¸åè½¬</strong> <a class="header-anchor" href="#å››ã€æ’åºä¸åè½¬" aria-label="Permalink to â€œå››ã€æ’åºä¸åè½¬â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>æ˜¯å¦æ”¹å˜åŸæ•°ç»„</th></tr></thead><tbody><tr><td><code>sort(compareFn)</code></td><td>æ’åºï¼ˆé»˜è®¤è½¬å­—ç¬¦ä¸²ï¼‰</td><td>âœ…</td></tr><tr><td><code>reverse()</code></td><td>åè½¬æ•°ç»„</td><td>âœ…</td></tr></tbody></table><blockquote><p>âš ï¸ <code>sort()</code> é»˜è®¤æŒ‰ Unicode æ’ï¼Œæ•°å­—éœ€ä¼ æ¯”è¾ƒå‡½æ•°ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‡åº</span></span></code></pre></div></blockquote><hr><h3 id="äº”ã€è¿æ¥ä¸æˆªå–-ä¸æ”¹å˜åŸæ•°ç»„" tabindex="-1">äº”ã€<strong>è¿æ¥ä¸æˆªå–ï¼ˆä¸æ”¹å˜åŸæ•°ç»„ï¼‰</strong> <a class="header-anchor" href="#äº”ã€è¿æ¥ä¸æˆªå–-ä¸æ”¹å˜åŸæ•°ç»„" aria-label="Permalink to â€œäº”ã€è¿æ¥ä¸æˆªå–ï¼ˆä¸æ”¹å˜åŸæ•°ç»„ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>concat()</code></td><td>åˆå¹¶æ•°ç»„</td><td>æ–°æ•°ç»„</td></tr><tr><td><code>slice(start, end)</code></td><td>æˆªå–ç‰‡æ®µ</td><td>æ–°æ•°ç»„</td></tr><tr><td><code>join(separator)</code></td><td>æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²</td><td>å­—ç¬¦ä¸²</td></tr></tbody></table><hr><h3 id="å…­ã€è½¬æ¢" tabindex="-1">å…­ã€<strong>è½¬æ¢</strong> <a class="header-anchor" href="#å…­ã€è½¬æ¢" aria-label="Permalink to â€œå…­ã€è½¬æ¢â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>Array.from()</code></td><td>ç±»æ•°ç»„ â†’ çœŸæ•°ç»„</td></tr><tr><td><code>Array.of()</code></td><td>åˆ›å»ºå«æŒ‡å®šå…ƒç´ çš„æ•°ç»„ï¼ˆé¿å… <code>new Array(3)</code> çš„é™·é˜±ï¼‰</td></tr><tr><td><code>flat(depth)</code></td><td>æ‰å¹³åŒ–åµŒå¥—æ•°ç»„ï¼ˆES2019ï¼‰</td></tr><tr><td><code>flatMap()</code></td><td><code>map</code> + <code>flat(1)</code>ï¼ˆES2019ï¼‰</td></tr></tbody></table><hr><h3 id="ä¸ƒã€å…¶ä»–" tabindex="-1">ä¸ƒã€<strong>å…¶ä»–</strong> <a class="header-anchor" href="#ä¸ƒã€å…¶ä»–" aria-label="Permalink to â€œä¸ƒã€å…¶ä»–â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>toString()</code> / <code>toLocaleString()</code></td><td>è½¬å­—ç¬¦ä¸²</td></tr><tr><td><code>at(index)</code></td><td>æ”¯æŒè´Ÿç´¢å¼•å–å€¼ï¼ˆES2022ï¼Œå¦‚ <code>arr.at(-1)</code>ï¼‰</td></tr><tr><td><code>copyWithin(target, start, end)</code></td><td>æµ…å¤åˆ¶éƒ¨åˆ†åˆ°è‡ªèº«ï¼ˆæ”¹å˜åŸæ•°ç»„ï¼‰</td></tr><tr><td><code>fill(value, start, end)</code></td><td>å¡«å……å›ºå®šå€¼ï¼ˆæ”¹å˜åŸæ•°ç»„ï¼‰</td></tr></tbody></table><hr><h3 id="âœ…-ä½¿ç”¨å»ºè®®" tabindex="-1">âœ… ä½¿ç”¨å»ºè®®ï¼š <a class="header-anchor" href="#âœ…-ä½¿ç”¨å»ºè®®" aria-label="Permalink to â€œâœ… ä½¿ç”¨å»ºè®®ï¼šâ€">â€‹</a></h3><ul><li><strong>ä¸å¯å˜æ“ä½œ</strong>ï¼ˆå¦‚ <code>map</code>, <code>filter</code>, <code>slice</code>ï¼‰ä¼˜å…ˆç”¨äºå‡½æ•°å¼ç¼–ç¨‹ï¼›</li><li><strong>å¯å˜æ“ä½œ</strong>ï¼ˆå¦‚ <code>push</code>, <code>splice</code>, <code>sort</code>ï¼‰æ³¨æ„å‰¯ä½œç”¨ï¼›</li><li><strong>æ€§èƒ½æ•æ„Ÿåœºæ™¯</strong>ï¼šé¿å…åœ¨å¾ªç¯ä¸­ç”¨ <code>forEach</code>ï¼ˆå¯ç”¨ <code>for</code> å¾ªç¯æ›¿ä»£ï¼‰ã€‚</li></ul><blockquote><p>ğŸ’¡ è®°ä½ï¼š<strong>é™¤äº† <code>map</code>/<code>filter</code>/<code>slice</code>/<code>concat</code> ç­‰å°‘æ•°æ–¹æ³•ï¼Œå¤§å¤šæ•°æ•°ç»„æ–¹æ³•ä¼šä¿®æ”¹åŸæ•°ç»„ï¼</strong></p></blockquote><h2 id="for-in-å’Œ-for-of-çš„åŒºåˆ«" tabindex="-1"><code>for in</code> å’Œ <code>for of</code> çš„åŒºåˆ« <a class="header-anchor" href="#for-in-å’Œ-for-of-çš„åŒºåˆ«" aria-label="Permalink to â€œfor in å’Œ for of çš„åŒºåˆ«â€">â€‹</a></h2><p><code>for...in</code> å’Œ <code>for...of</code> æ˜¯ JavaScript ä¸­ä¸¤ç§ä¸åŒçš„éå†è¯­æ³•ï¼Œæ ¸å¿ƒåŒºåˆ«å¦‚ä¸‹ï¼š</p><hr><h3 id="ä¸€ã€éå†ç›®æ ‡ä¸åŒ" tabindex="-1">ä¸€ã€éå†ç›®æ ‡ä¸åŒ <a class="header-anchor" href="#ä¸€ã€éå†ç›®æ ‡ä¸åŒ" aria-label="Permalink to â€œä¸€ã€éå†ç›®æ ‡ä¸åŒâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>è¯­æ³•</th><th>éå†å†…å®¹</th><th>é€‚ç”¨å¯¹è±¡</th></tr></thead><tbody><tr><td><code>for...in</code></td><td><strong>å¯¹è±¡çš„å¯æšä¸¾å±æ€§åï¼ˆkeyï¼‰</strong></td><td>æ™®é€šå¯¹è±¡ã€æ•°ç»„ï¼ˆä¸æ¨èï¼‰</td></tr><tr><td><code>for...of</code></td><td><strong>å¯è¿­ä»£å¯¹è±¡çš„å€¼ï¼ˆvalueï¼‰</strong></td><td>æ•°ç»„ã€å­—ç¬¦ä¸²ã€Mapã€Setã€NodeList ç­‰ï¼ˆéœ€å®ç° <code>[Symbol.iterator]</code>ï¼‰</td></tr></tbody></table><hr><h3 id="äºŒã€å…³é”®å·®å¼‚å¯¹æ¯”" tabindex="-1">äºŒã€å…³é”®å·®å¼‚å¯¹æ¯” <a class="header-anchor" href="#äºŒã€å…³é”®å·®å¼‚å¯¹æ¯”" aria-label="Permalink to â€œäºŒã€å…³é”®å·®å¼‚å¯¹æ¯”â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><code>for...in</code></th><th><code>for...of</code></th></tr></thead><tbody><tr><td><strong>éå†æ•°ç»„</strong></td><td>è¿”å›<strong>ç´¢å¼•ï¼ˆå­—ç¬¦ä¸²ï¼‰</strong></td><td>è¿”å›<strong>å…ƒç´ å€¼</strong></td></tr><tr><td><strong>éå†é¡ºåº</strong></td><td>ä»»æ„é¡ºåºï¼ˆè§„èŒƒä¸ä¿è¯ï¼‰</td><td>æŒ‰è¿­ä»£å™¨å®šä¹‰é¡ºåºï¼ˆå¦‚æ•°ç»„æŒ‰ç´¢å¼•å‡åºï¼‰</td></tr><tr><td><strong>åŸå‹é“¾</strong></td><td>ä¼šéå†<strong>åŸå‹é“¾ä¸Šçš„å¯æšä¸¾å±æ€§</strong></td><td><strong>ä¸éå†åŸå‹é“¾</strong></td></tr><tr><td><strong>Symbol å±æ€§</strong></td><td>è·³è¿‡</td><td>å¯éå†ï¼ˆå¦‚æœè¿­ä»£å™¨åŒ…å«ï¼‰</td></tr><tr><td><strong>ä¸å¯è¿­ä»£å¯¹è±¡</strong></td><td>å¯ç”¨ï¼ˆå¦‚æ™®é€šå¯¹è±¡ï¼‰</td><td>æŠ¥é”™ï¼ˆ<code>TypeError: not iterable</code>ï¼‰</td></tr></tbody></table><hr><h3 id="ä¸‰ã€ä»£ç ç¤ºä¾‹" tabindex="-1">ä¸‰ã€ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#ä¸‰ã€ä»£ç ç¤ºä¾‹" aria-label="Permalink to â€œä¸‰ã€ä»£ç ç¤ºä¾‹â€">â€‹</a></h3><h4 id="_1-éå†æ•°ç»„" tabindex="-1">1. éå†æ•°ç»„ <a class="header-anchor" href="#_1-éå†æ•°ç»„" aria-label="Permalink to â€œ1. éå†æ•°ç»„â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for...inï¼ˆä¸æ¨èç”¨äºæ•°ç»„ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;0&#39; &#39;string&#39;, &#39;1&#39; &#39;string&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for...ofï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;a&#39;, &#39;b&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-éå†å¯¹è±¡" tabindex="-1">2. éå†å¯¹è±¡ <a class="header-anchor" href="#_2-éå†å¯¹è±¡" aria-label="Permalink to â€œ2. éå†å¯¹è±¡â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for...inï¼ˆå”¯ä¸€é€‰æ‹©ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwnProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å»ºè®®è¿‡æ»¤åŸå‹å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key, obj[key]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;a&#39; 1, &#39;b&#39; 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for...of âŒ æŠ¥é”™ï¼šobj is not iterable</span></span></code></pre></div><h4 id="_3-éå†å­—ç¬¦ä¸²" tabindex="-1">3. éå†å­—ç¬¦ä¸² <a class="header-anchor" href="#_3-éå†å­—ç¬¦ä¸²" aria-label="Permalink to â€œ3. éå†å­—ç¬¦ä¸²â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> char </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;hi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(char); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;h&#39;, &#39;i&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for...in ä¼šè¾“å‡º &#39;0&#39;, &#39;1&#39;ï¼ˆç´¢å¼•ï¼‰</span></span></code></pre></div><hr><h3 id="å››ã€ä½¿ç”¨å»ºè®®" tabindex="-1">å››ã€ä½¿ç”¨å»ºè®® <a class="header-anchor" href="#å››ã€ä½¿ç”¨å»ºè®®" aria-label="Permalink to â€œå››ã€ä½¿ç”¨å»ºè®®â€">â€‹</a></h3><ul><li>âœ… <strong>éå†æ•°ç»„/å¯è¿­ä»£å¯¹è±¡</strong> â†’ ç”¨ <code>for...of</code></li><li>âœ… <strong>éå†æ™®é€šå¯¹è±¡é”®å</strong> â†’ ç”¨ <code>for...in</code> + <code>hasOwnProperty</code> è¿‡æ»¤</li><li>âŒ <strong>ä¸è¦ç”¨ <code>for...in</code> éå†æ•°ç»„</strong>ï¼ˆå¯èƒ½éå†åˆ°éæ•°å­—å±æ€§ï¼Œé¡ºåºä¸ç¡®å®šï¼‰</li></ul><blockquote><p>ğŸ’¡ <strong>å£è¯€</strong>ï¼š</p><ul><li><code>in</code> â†’ <strong>key</strong>ï¼ˆé€‚åˆå¯¹è±¡ï¼‰</li><li><code>of</code> â†’ <strong>value</strong>ï¼ˆé€‚åˆæ•°ç»„/è¿­ä»£å™¨ï¼‰</li></ul></blockquote><h2 id="å¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£" tabindex="-1">å¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£ <a class="header-anchor" href="#å¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£" aria-label="Permalink to â€œå¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£â€">â€‹</a></h2><h3 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒæ¦‚å¿µâ€">â€‹</a></h3><h4 id="_1-åŸå‹-prototype" tabindex="-1">1. <strong>åŸå‹ï¼ˆPrototypeï¼‰</strong> <a class="header-anchor" href="#_1-åŸå‹-prototype" aria-label="Permalink to â€œ1. åŸå‹ï¼ˆPrototypeï¼‰â€">â€‹</a></h4><ul><li>æ¯ä¸ªå‡½æ•°ï¼ˆé™¤ç®­å¤´å‡½æ•°ï¼‰éƒ½æœ‰ä¸€ä¸ª <code>prototype</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼›</li><li>æ¯ä¸ªå¯¹è±¡ï¼ˆé™¤ <code>Object.create(null)</code>ï¼‰éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ <code>[[Prototype]]</code>ï¼ˆå¯é€šè¿‡ <code>__proto__</code> æˆ– <code>Object.getPrototypeOf()</code> è®¿é—®ï¼‰ï¼ŒæŒ‡å‘å…¶<strong>æ„é€ å‡½æ•°çš„ <code>prototype</code></strong>ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__proto__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div><blockquote><p>âœ… <strong>ä½œç”¨</strong>ï¼šè®©å®ä¾‹å…±äº«æ–¹æ³•/å±æ€§ï¼ŒèŠ‚çœå†…å­˜ã€‚</p></blockquote><hr><h4 id="_2-åŸå‹é“¾-prototype-chain" tabindex="-1">2. <strong>åŸå‹é“¾ï¼ˆPrototype Chainï¼‰</strong> <a class="header-anchor" href="#_2-åŸå‹é“¾-prototype-chain" aria-label="Permalink to â€œ2. åŸå‹é“¾ï¼ˆPrototype Chainï¼‰â€">â€‹</a></h4><ul><li>å½“è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼Œè‹¥è‡ªèº«æ²¡æœ‰ï¼Œåˆ™æ²¿ <code>[[Prototype]]</code> å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ° <code>null</code>ï¼ˆ<code>Object.prototype.__proto__ === null</code>ï¼‰ï¼›</li><li>è¿™æ¡æŸ¥æ‰¾é“¾å°±æ˜¯<strong>åŸå‹é“¾</strong>ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// p è‡ªèº«æ—  toString â†’ æŸ¥æ‰¾ Person.prototype â†’ æŸ¥æ‰¾ Object.prototype â†’ æ‰¾åˆ°</span></span></code></pre></div><hr><h3 id="äºŒã€å…³é”®è§„åˆ™" tabindex="-1">äºŒã€å…³é”®è§„åˆ™ <a class="header-anchor" href="#äºŒã€å…³é”®è§„åˆ™" aria-label="Permalink to â€œäºŒã€å…³é”®è§„åˆ™â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å…³ç³»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>obj.__proto__ === Constructor.prototype</code></td><td>å®ä¾‹çš„ <code>__proto__</code> æŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code></td></tr><tr><td><code>Constructor.prototype.constructor === Constructor</code></td><td>åŸå‹å¯¹è±¡çš„ <code>constructor</code> æŒ‡å›æ„é€ å‡½æ•°</td></tr><tr><td><code>Object.prototype</code> æ˜¯åŸå‹é“¾é¡¶ç«¯</td><td>æ‰€æœ‰å¯¹è±¡æœ€ç»ˆç»§æ‰¿è‡ªå®ƒ</td></tr><tr><td><code>Function.__proto__ === Function.prototype</code></td><td>å‡½æ•°æ—¢æ˜¯å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå…¶åŸå‹æ˜¯ <code>Function.prototype</code></td></tr></tbody></table><hr><h3 id="ä¸‰ã€å›¾è§£ç®€åŒ–åŸå‹é“¾" tabindex="-1">ä¸‰ã€å›¾è§£ç®€åŒ–åŸå‹é“¾ <a class="header-anchor" href="#ä¸‰ã€å›¾è§£ç®€åŒ–åŸå‹é“¾" aria-label="Permalink to â€œä¸‰ã€å›¾è§£ç®€åŒ–åŸå‹é“¾â€">â€‹</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>p (å®ä¾‹)</span></span>
<span class="line"><span>  â†“ __proto__</span></span>
<span class="line"><span>Person.prototype</span></span>
<span class="line"><span>  â†“ __proto__</span></span>
<span class="line"><span>Object.prototype</span></span>
<span class="line"><span>  â†“ __proto__</span></span>
<span class="line"><span>null</span></span></code></pre></div><hr><h3 id="å››ã€å¸¸è§è¯¯åŒº" tabindex="-1">å››ã€å¸¸è§è¯¯åŒº <a class="header-anchor" href="#å››ã€å¸¸è§è¯¯åŒº" aria-label="Permalink to â€œå››ã€å¸¸è§è¯¯åŒºâ€">â€‹</a></h3><ul><li>âŒ â€œåŸå‹é“¾æ˜¯æ„é€ å‡½æ•°ä¹‹é—´çš„é“¾â€ â†’ å®é™…æ˜¯<strong>å¯¹è±¡ä¹‹é—´çš„é“¾</strong>ï¼ˆ<code>__proto__</code> é“¾ï¼‰ï¼›</li><li>âŒ â€œ<code>prototype</code> æ˜¯å¯¹è±¡çš„å±æ€§â€ â†’ åªæœ‰<strong>å‡½æ•°</strong>æ‰æœ‰ <code>prototype</code>ï¼›</li><li>âœ… å¯¹è±¡é€šè¿‡ <code>__proto__</code> æ‰¾åŸå‹ï¼Œå‡½æ•°é€šè¿‡ <code>prototype</code> æä¾›åŸå‹ã€‚</li></ul><hr><h3 id="äº”ã€es6-class-æœ¬è´¨" tabindex="-1">äº”ã€ES6 class æœ¬è´¨ <a class="header-anchor" href="#äº”ã€es6-class-æœ¬è´¨" aria-label="Permalink to â€œäº”ã€ES6 class æœ¬è´¨â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­‰ä»·äº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><ul><li><code>class</code> åªæ˜¯è¯­æ³•ç³–ï¼Œåº•å±‚ä»æ˜¯<strong>åŸå‹é“¾</strong>æœºåˆ¶ã€‚</li></ul><hr><h3 id="å…­ã€ç”¨é€”" tabindex="-1">å…­ã€ç”¨é€” <a class="header-anchor" href="#å…­ã€ç”¨é€”" aria-label="Permalink to â€œå…­ã€ç”¨é€”â€">â€‹</a></h3><ul><li><strong>ç»§æ‰¿</strong>ï¼šé€šè¿‡è®¾ç½® <code>Child.prototype = Object.create(Parent.prototype)</code> å®ç°ï¼›</li><li><strong>æ–¹æ³•å…±äº«</strong>ï¼šå°†æ–¹æ³•å®šä¹‰åœ¨ <code>prototype</code> ä¸Šï¼Œé¿å…é‡å¤åˆ›å»ºï¼›</li><li><strong>ç±»å‹åˆ¤æ–­</strong>ï¼š<code>instanceof</code> åŸºäºåŸå‹é“¾ï¼ˆ<code>a instanceof B</code> â‡¨ æ£€æŸ¥ <code>B.prototype</code> æ˜¯å¦åœ¨ <code>a</code> çš„åŸå‹é“¾ä¸Šï¼‰ã€‚</li></ul><blockquote><p>ğŸ’¡ <strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š<br><strong>åŸå‹æ˜¯å…±äº«çš„æ¨¡æ¿ï¼ŒåŸå‹é“¾æ˜¯æŸ¥æ‰¾å±æ€§çš„è·¯å¾„ã€‚</strong></p></blockquote><h2 id="å¯¹é—­åŒ…çš„ç†è§£" tabindex="-1">å¯¹é—­åŒ…çš„ç†è§£ <a class="header-anchor" href="#å¯¹é—­åŒ…çš„ç†è§£" aria-label="Permalink to â€œå¯¹é—­åŒ…çš„ç†è§£â€">â€‹</a></h2><h3 id="é—­åŒ…-closure-â€”â€”-å‡½æ•°ä¸å…¶è¯æ³•ç¯å¢ƒçš„ç»„åˆ" tabindex="-1">é—­åŒ…ï¼ˆClosureï¼‰â€”â€” å‡½æ•°ä¸å…¶è¯æ³•ç¯å¢ƒçš„ç»„åˆ <a class="header-anchor" href="#é—­åŒ…-closure-â€”â€”-å‡½æ•°ä¸å…¶è¯æ³•ç¯å¢ƒçš„ç»„åˆ" aria-label="Permalink to â€œé—­åŒ…ï¼ˆClosureï¼‰â€”â€” å‡½æ•°ä¸å…¶è¯æ³•ç¯å¢ƒçš„ç»„åˆâ€">â€‹</a></h3><hr><h3 id="ä¸€ã€æ ¸å¿ƒå®šä¹‰" tabindex="-1">ä¸€ã€æ ¸å¿ƒå®šä¹‰ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒå®šä¹‰" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒå®šä¹‰â€">â€‹</a></h3><p><strong>é—­åŒ… = å†…éƒ¨å‡½æ•° + å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­è¢«å¼•ç”¨çš„å˜é‡</strong><br> å½“ä¸€ä¸ªå†…éƒ¨å‡½æ•°<strong>è®¿é—®å…¶å¤–éƒ¨å‡½æ•°çš„å˜é‡</strong>ï¼Œå¹¶ä¸”è¯¥å†…éƒ¨å‡½æ•°åœ¨å¤–éƒ¨è¢«<strong>ä¿ç•™å¼•ç”¨</strong>æ—¶ï¼Œå°±å½¢æˆäº†é—­åŒ…ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// inner å½¢æˆé—­åŒ…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">counter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">counter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2 â†’ count è¢«æŒä¹…ä¿å­˜</span></span></code></pre></div><hr><h3 id="äºŒã€é—­åŒ…çš„ä¸‰ä¸ªå…³é”®ç‰¹æ€§" tabindex="-1">äºŒã€é—­åŒ…çš„ä¸‰ä¸ªå…³é”®ç‰¹æ€§ <a class="header-anchor" href="#äºŒã€é—­åŒ…çš„ä¸‰ä¸ªå…³é”®ç‰¹æ€§" aria-label="Permalink to â€œäºŒã€é—­åŒ…çš„ä¸‰ä¸ªå…³é”®ç‰¹æ€§â€">â€‹</a></h3><ol><li><p><strong>è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸå˜é‡</strong><br> å³ä½¿å¤–éƒ¨å‡½æ•°å·²æ‰§è¡Œå®Œæ¯•ï¼Œå†…éƒ¨å‡½æ•°ä»èƒ½è¯»å†™å…¶å˜é‡ã€‚</p></li><li><p><strong>å˜é‡æŒä¹…åŒ–</strong><br> å¤–éƒ¨å˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼ˆå› è¢«é—­åŒ…å¼•ç”¨ï¼‰ï¼Œå®ç°â€œç§æœ‰çŠ¶æ€â€ã€‚</p></li><li><p><strong>æ•°æ®å°è£…ä¸ç§æœ‰æ€§</strong><br> å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—® <code>count</code>ï¼Œåªèƒ½é€šè¿‡è¿”å›çš„å‡½æ•°æ“ä½œã€‚</p></li></ol><hr><h3 id="ä¸‰ã€å¸¸è§åº”ç”¨åœºæ™¯" tabindex="-1">ä¸‰ã€å¸¸è§åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#ä¸‰ã€å¸¸è§åº”ç”¨åœºæ™¯" aria-label="Permalink to â€œä¸‰ã€å¸¸è§åº”ç”¨åœºæ™¯â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æ¨¡å—æ¨¡å¼</strong></td><td>å°è£…ç§æœ‰å˜é‡/æ–¹æ³•</td></tr><tr><td><strong>å›è°ƒå‡½æ•°</strong></td><td>äº‹ä»¶å¤„ç†å™¨ã€å®šæ—¶å™¨ä¸­ä¿æŒä¸Šä¸‹æ–‡</td></tr><tr><td><strong>æŸ¯é‡ŒåŒ– / åå‡½æ•°</strong></td><td>é¢„ç½®éƒ¨åˆ†å‚æ•°</td></tr><tr><td><strong>é˜²æŠ–/èŠ‚æµ</strong></td><td>ä¿å­˜ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´æˆ–å®šæ—¶å™¨ ID</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜²æŠ–ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> debounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timer; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é—­åŒ…ä¿å­˜ timer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args), delay);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="å››ã€æ½œåœ¨é—®é¢˜" tabindex="-1">å››ã€æ½œåœ¨é—®é¢˜ <a class="header-anchor" href="#å››ã€æ½œåœ¨é—®é¢˜" aria-label="Permalink to â€œå››ã€æ½œåœ¨é—®é¢˜â€">â€‹</a></h3><ul><li><strong>å†…å­˜æ³„æ¼</strong>ï¼šé—­åŒ…æŒæœ‰å˜é‡ï¼Œé˜»æ­¢ GCï¼ˆå°¤å…¶åœ¨ DOM äº‹ä»¶å›è°ƒä¸­æœªè§£ç»‘ï¼‰ï¼›</li><li><strong>æ„å¤–å…±äº«</strong>ï¼šå¾ªç¯ä¸­åˆ›å»ºé—­åŒ…æ˜“å‡ºé”™ï¼ˆå¯ç”¨ <code>let</code> æˆ– IIFE è§£å†³ï¼‰ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯ï¼šæ‰€æœ‰å›è°ƒå…±äº« iï¼ˆæœ€ç»ˆä¸º 3ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º 3, 3, 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ­£ç¡®ï¼šç”¨ let åˆ›å»ºå—çº§ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º 0, 1, 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="äº”ã€ä¸€å¥è¯æ€»ç»“" tabindex="-1">äº”ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#äº”ã€ä¸€å¥è¯æ€»ç»“" aria-label="Permalink to â€œäº”ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>é—­åŒ…è®©å‡½æ•°â€œè®°ä½â€å¹¶è®¿é—®å…¶åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸï¼Œå³ä½¿åœ¨å…¶å¤–éƒ¨æ‰§è¡Œã€‚</strong></p></blockquote><p>âœ… åˆç†ä½¿ç”¨å¯å®ç°å°è£…å’ŒçŠ¶æ€ç®¡ç†ï¼›<br> âš ï¸ æ»¥ç”¨ä¼šå¯¼è‡´å†…å­˜é—®é¢˜æˆ–é€»è¾‘é”™è¯¯ã€‚</p><h2 id="å¯¹ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾çš„ç†è§£" tabindex="-1">å¯¹ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾çš„ç†è§£ <a class="header-anchor" href="#å¯¹ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾çš„ç†è§£" aria-label="Permalink to â€œå¯¹ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾çš„ç†è§£â€">â€‹</a></h2><h3 id="ä½œç”¨åŸŸ-scope-ä¸ä½œç”¨åŸŸé“¾-scope-chain-â€”â€”-javascript-å˜é‡æŸ¥æ‰¾æœºåˆ¶" tabindex="-1">ä½œç”¨åŸŸï¼ˆScopeï¼‰ä¸ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰â€”â€” JavaScript å˜é‡æŸ¥æ‰¾æœºåˆ¶ <a class="header-anchor" href="#ä½œç”¨åŸŸ-scope-ä¸ä½œç”¨åŸŸé“¾-scope-chain-â€”â€”-javascript-å˜é‡æŸ¥æ‰¾æœºåˆ¶" aria-label="Permalink to â€œä½œç”¨åŸŸï¼ˆScopeï¼‰ä¸ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰â€”â€” JavaScript å˜é‡æŸ¥æ‰¾æœºåˆ¶â€">â€‹</a></h3><hr><h3 id="ä¸€ã€ä½œç”¨åŸŸ-scope-1" tabindex="-1">ä¸€ã€<strong>ä½œç”¨åŸŸï¼ˆScopeï¼‰</strong> <a class="header-anchor" href="#ä¸€ã€ä½œç”¨åŸŸ-scope-1" aria-label="Permalink to â€œä¸€ã€ä½œç”¨åŸŸï¼ˆScopeï¼‰â€">â€‹</a></h3><p>å®šä¹‰ï¼š<strong>å˜é‡å’Œå‡½æ•°çš„å¯è®¿é—®èŒƒå›´</strong>ï¼Œå³â€œåœ¨å“ªäº›åœ°æ–¹èƒ½è®¿é—®åˆ°æŸä¸ªæ ‡è¯†ç¬¦â€ã€‚</p><h4 id="_1-å…¨å±€ä½œç”¨åŸŸ" tabindex="-1">1. <strong>å…¨å±€ä½œç”¨åŸŸ</strong> <a class="header-anchor" href="#_1-å…¨å±€ä½œç”¨åŸŸ" aria-label="Permalink to â€œ1. å…¨å±€ä½œç”¨åŸŸâ€">â€‹</a></h4><ul><li>æœ€å¤–å±‚ï¼Œ<code>window</code>ï¼ˆæµè§ˆå™¨ï¼‰æˆ– <code>global</code>ï¼ˆNode.jsï¼‰ä¸Šï¼›</li><li>æ‰€æœ‰ä»£ç é»˜è®¤åœ¨æ­¤ä½œç”¨åŸŸä¸­ã€‚</li></ul><h4 id="_2-å‡½æ•°ä½œç”¨åŸŸ-function-scope" tabindex="-1">2. <strong>å‡½æ•°ä½œç”¨åŸŸï¼ˆFunction Scopeï¼‰</strong> <a class="header-anchor" href="#_2-å‡½æ•°ä½œç”¨åŸŸ-function-scope" aria-label="Permalink to â€œ2. å‡½æ•°ä½œç”¨åŸŸï¼ˆFunction Scopeï¼‰â€">â€‹</a></h4><ul><li>ç”± <code>function</code> å£°æ˜åˆ›å»ºï¼›</li><li>å†…éƒ¨å˜é‡å¤–éƒ¨ä¸å¯è§ï¼ˆ<code>var</code> çš„ä½œç”¨åŸŸè¾¹ç•Œï¼‰ã€‚</li></ul><h4 id="_3-å—çº§ä½œç”¨åŸŸ-block-scope-es6" tabindex="-1">3. <strong>å—çº§ä½œç”¨åŸŸï¼ˆBlock Scopeï¼‰</strong>ï¼ˆES6+ï¼‰ <a class="header-anchor" href="#_3-å—çº§ä½œç”¨åŸŸ-block-scope-es6" aria-label="Permalink to â€œ3. å—çº§ä½œç”¨åŸŸï¼ˆBlock Scopeï¼‰ï¼ˆES6+ï¼‰â€">â€‹</a></h4><ul><li>ç”± <code>{}</code> åˆ›å»ºï¼ˆå¦‚ <code>if</code>ã€<code>for</code>ã€<code>{}</code> ç‹¬ç«‹å—ï¼‰ï¼›</li><li><code>let</code> / <code>const</code> / <code>class</code> éµå¾ªå—çº§ä½œç”¨åŸŸã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‡½æ•°/å…¨å±€ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å—çº§ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ReferenceError</span></span></code></pre></div><hr><h3 id="äºŒã€ä½œç”¨åŸŸé“¾-scope-chain" tabindex="-1">äºŒã€<strong>ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰</strong> <a class="header-anchor" href="#äºŒã€ä½œç”¨åŸŸé“¾-scope-chain" aria-label="Permalink to â€œäºŒã€ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰â€">â€‹</a></h3><p>å®šä¹‰ï¼š<strong>å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¼•æ“æ²¿åµŒå¥—ä½œç”¨åŸŸé€å±‚å‘ä¸ŠæŸ¥æ‰¾çš„è·¯å¾„</strong>ã€‚</p><h4 id="æŸ¥æ‰¾è§„åˆ™" tabindex="-1">æŸ¥æ‰¾è§„åˆ™ï¼š <a class="header-anchor" href="#æŸ¥æ‰¾è§„åˆ™" aria-label="Permalink to â€œæŸ¥æ‰¾è§„åˆ™ï¼šâ€">â€‹</a></h4><ol><li>å…ˆåœ¨<strong>å½“å‰ä½œç”¨åŸŸ</strong>æŸ¥æ‰¾ï¼›</li><li>è‹¥æœªæ‰¾åˆ°ï¼Œè¿›å…¥<strong>å¤–å±‚ä½œç”¨åŸŸ</strong>ï¼ˆåˆ›å»ºæ—¶çš„è¯æ³•ç¯å¢ƒï¼‰ï¼›</li><li>é‡å¤ç›´åˆ°<strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼›</li><li>è‹¥ä»æœªæ‰¾åˆ°ï¼ŒæŠ›å‡º <code>ReferenceError</code>ã€‚</li></ol><blockquote><p>âœ… ä½œç”¨åŸŸé“¾åœ¨<strong>å‡½æ•°å®šä¹‰æ—¶ç¡®å®š</strong>ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰ï¼Œä¸è°ƒç”¨ä½ç½®æ— å…³ã€‚</p></blockquote><h4 id="ç¤ºä¾‹-1" tabindex="-1">ç¤ºä¾‹ï¼š <a class="header-anchor" href="#ç¤ºä¾‹-1" aria-label="Permalink to â€œç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> globalVar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> outerVar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;outer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> innerVar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;inner&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(globalVar, outerVar, innerVar); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¾æ¬¡æ²¿ä½œç”¨åŸŸé“¾æŸ¥æ‰¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inner;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ­£å¸¸è¾“å‡º â†’ inner çš„ä½œç”¨åŸŸé“¾ï¼šinner â†’ outer â†’ global</span></span></code></pre></div><hr><h3 id="ä¸‰ã€å…³é”®ç‚¹æ€»ç»“" tabindex="-1">ä¸‰ã€å…³é”®ç‚¹æ€»ç»“ <a class="header-anchor" href="#ä¸‰ã€å…³é”®ç‚¹æ€»ç»“" aria-label="Permalink to â€œä¸‰ã€å…³é”®ç‚¹æ€»ç»“â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è¯æ³•ä½œç”¨åŸŸ</strong></td><td>ä½œç”¨åŸŸç”±<strong>ä»£ç ä¹¦å†™ä½ç½®</strong>å†³å®šï¼ˆéè¿è¡Œæ—¶åŠ¨æ€ç»‘å®šï¼‰</td></tr><tr><td><strong>é—­åŒ…ä¾èµ–ä½œç”¨åŸŸé“¾</strong></td><td>é—­åŒ…èƒ½è®¿é—®å¤–éƒ¨å˜é‡ï¼Œæœ¬è´¨æ˜¯ä¿å­˜äº†ä½œç”¨åŸŸé“¾</td></tr><tr><td><strong><code>var</code> æ— å—çº§ä½œç”¨åŸŸ</strong></td><td>åœ¨å‡½æ•°å†…æå‡è‡³é¡¶éƒ¨ï¼Œå¯èƒ½å¼•å‘æ„å¤–è¦†ç›–</td></tr><tr><td><strong><code>let</code>/<code>const</code> æœ‰ TDZ</strong></td><td>åœ¨å£°æ˜å‰è®¿é—®ä¼šæŠ¥é”™ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰</td></tr></tbody></table><hr><h3 id="å››ã€å¸¸è§è¯¯åŒº-1" tabindex="-1">å››ã€å¸¸è§è¯¯åŒº <a class="header-anchor" href="#å››ã€å¸¸è§è¯¯åŒº-1" aria-label="Permalink to â€œå››ã€å¸¸è§è¯¯åŒºâ€">â€‹</a></h3><ul><li>âŒ â€œä½œç”¨åŸŸé“¾æ˜¯åŸå‹é“¾â€ â†’ å®Œå…¨ä¸åŒï¼š <ul><li>ä½œç”¨åŸŸé“¾ï¼š<strong>å˜é‡æŸ¥æ‰¾</strong>ï¼ˆè¯æ³•ç¯å¢ƒï¼‰ï¼›</li><li>åŸå‹é“¾ï¼š<strong>å±æ€§æŸ¥æ‰¾</strong>ï¼ˆå¯¹è±¡ç»§æ‰¿ï¼‰ã€‚</li></ul></li><li>âŒ â€œ<code>this</code> å½±å“ä½œç”¨åŸŸé“¾â€ â†’ <code>this</code> æ˜¯è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼Œä¸ä½œç”¨åŸŸé“¾æ— å…³ã€‚</li></ul><hr><h3 id="ä¸€å¥è¯æ€»ç»“" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong>ä½œç”¨åŸŸæ˜¯å˜é‡çš„â€œè¾–åŒºâ€ï¼Œä½œç”¨åŸŸé“¾æ˜¯å˜é‡æŸ¥æ‰¾çš„â€œè·¯çº¿å›¾â€â€”â€”ä»å†…å‘å¤–ï¼Œé€çº§ä¸ŠæŠ¥ã€‚</strong></p></blockquote><h2 id="å¯¹æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç†è§£" tabindex="-1">å¯¹æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç†è§£ <a class="header-anchor" href="#å¯¹æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç†è§£" aria-label="Permalink to â€œå¯¹æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç†è§£â€">â€‹</a></h2><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡-execution-context-â€”â€”-javascript-ä»£ç è¿è¡Œæ—¶çš„ç¯å¢ƒå®¹å™¨" tabindex="-1">æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰â€”â€” JavaScript ä»£ç è¿è¡Œæ—¶çš„ç¯å¢ƒå®¹å™¨ <a class="header-anchor" href="#æ‰§è¡Œä¸Šä¸‹æ–‡-execution-context-â€”â€”-javascript-ä»£ç è¿è¡Œæ—¶çš„ç¯å¢ƒå®¹å™¨" aria-label="Permalink to â€œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰â€”â€” JavaScript ä»£ç è¿è¡Œæ—¶çš„ç¯å¢ƒå®¹å™¨â€">â€‹</a></h3><hr><h3 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ-1" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ-1" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒæ¦‚å¿µâ€">â€‹</a></h3><p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ JS å¼•æ“ä¸ºä»£ç æ‰§è¡Œåˆ›å»ºçš„æŠ½è±¡ç¯å¢ƒ</strong>ï¼Œç”¨äºç®¡ç†å˜é‡ã€å‡½æ•°ã€ä½œç”¨åŸŸã€<code>this</code> ç­‰ä¿¡æ¯ã€‚<br> æ¯æ¬¡æ‰§è¡Œå¯æ‰§è¡Œä»£ç ï¼ˆå…¨å±€ä»£ç ã€å‡½æ•°è°ƒç”¨ï¼‰æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><hr><h3 id="äºŒã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹" tabindex="-1">äºŒã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹ <a class="header-anchor" href="#äºŒã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹" aria-label="Permalink to â€œäºŒã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>è§¦å‘æ—¶æœº</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</strong></td><td>JS æ–‡ä»¶åŠ è½½æ—¶</td><td>æœ€å¤–å±‚ï¼Œ<code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯ <code>window</code>ï¼‰</td></tr><tr><td><strong>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</strong></td><td>å‡½æ•°è¢«è°ƒç”¨æ—¶</td><td>æ¯æ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°ä¸Šä¸‹æ–‡ï¼Œ<code>this</code> ç”±è°ƒç”¨æ–¹å¼å†³å®š</td></tr><tr><td><strong>Eval æ‰§è¡Œä¸Šä¸‹æ–‡</strong></td><td><code>eval()</code> æ‰§è¡Œæ—¶</td><td>å°‘ç”¨ï¼Œä¸æ¨è</td></tr></tbody></table><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šç®­å¤´å‡½æ•°<strong>æ²¡æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼Œ<code>this</code> ç»§æ‰¿è‡ªå¤–å±‚ã€‚</p></blockquote><hr><h3 id="ä¸‰ã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç»„æˆ-es3-ä¸-es6-å·®å¼‚" tabindex="-1">ä¸‰ã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç»„æˆï¼ˆES3 ä¸ ES6+ å·®å¼‚ï¼‰ <a class="header-anchor" href="#ä¸‰ã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç»„æˆ-es3-ä¸-es6-å·®å¼‚" aria-label="Permalink to â€œä¸‰ã€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç»„æˆï¼ˆES3 ä¸ ES6+ å·®å¼‚ï¼‰â€">â€‹</a></h3><h4 id="es3-æ¨¡å‹-ç®€åŒ–ç†è§£" tabindex="-1">ES3 æ¨¡å‹ï¼ˆç®€åŒ–ç†è§£ï¼‰ï¼š <a class="header-anchor" href="#es3-æ¨¡å‹-ç®€åŒ–ç†è§£" aria-label="Permalink to â€œES3 æ¨¡å‹ï¼ˆç®€åŒ–ç†è§£ï¼‰ï¼šâ€">â€‹</a></h4><ol><li><strong>å˜é‡å¯¹è±¡ï¼ˆVOï¼‰</strong><ul><li>å­˜å‚¨å˜é‡ã€å‡½æ•°å£°æ˜ã€å‚æ•°ï¼›</li><li>å…¨å±€ä¸Šä¸‹æ–‡ä¸­ VO = å…¨å±€å¯¹è±¡ï¼›å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ VO = <strong>æ´»åŠ¨å¯¹è±¡ï¼ˆAOï¼‰</strong>ã€‚</li></ul></li><li><strong>ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰</strong><ul><li>å½“å‰ä¸Šä¸‹æ–‡ + å¤–å±‚æ‰€æœ‰ä¸Šä¸‹æ–‡çš„ VO é“¾è¡¨ã€‚</li></ul></li><li><strong>this å€¼</strong><ul><li>ç”±è°ƒç”¨æ–¹å¼å†³å®šï¼ˆè§ <code>this</code> è§„åˆ™ï¼‰ã€‚</li></ul></li></ol><h4 id="es6-æ¨¡å‹-æ›´ç²¾ç¡®" tabindex="-1">ES6+ æ¨¡å‹ï¼ˆæ›´ç²¾ç¡®ï¼‰ï¼š <a class="header-anchor" href="#es6-æ¨¡å‹-æ›´ç²¾ç¡®" aria-label="Permalink to â€œES6+ æ¨¡å‹ï¼ˆæ›´ç²¾ç¡®ï¼‰ï¼šâ€">â€‹</a></h4><ul><li><strong>è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰</strong> â†’ æ›¿ä»£ VOï¼Œç®¡ç†æ ‡è¯†ç¬¦ç»‘å®šï¼›</li><li><strong>å˜é‡ç¯å¢ƒï¼ˆVariable Environmentï¼‰</strong> â†’ å­˜å‚¨ <code>var</code> å£°æ˜ï¼ˆå¤„ç†æå‡ï¼‰ï¼›</li><li><strong>ThisBinding</strong> â†’ <code>this</code> çš„å€¼ã€‚</li></ul><hr><h3 id="å››ã€æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">å››ã€æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#å››ã€æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to â€œå››ã€æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿå‘½å‘¨æœŸâ€">â€‹</a></h3><h4 id="_1-åˆ›å»ºé˜¶æ®µ-creation-phase" tabindex="-1">1. <strong>åˆ›å»ºé˜¶æ®µï¼ˆCreation Phaseï¼‰</strong> <a class="header-anchor" href="#_1-åˆ›å»ºé˜¶æ®µ-creation-phase" aria-label="Permalink to â€œ1. åˆ›å»ºé˜¶æ®µï¼ˆCreation Phaseï¼‰â€">â€‹</a></h4><ul><li><strong>ç¡®å®š <code>this</code> å€¼</strong>ï¼›</li><li><strong>åˆ›å»ºè¯æ³•ç¯å¢ƒ</strong>ï¼š <ul><li>æ‰«æå‡½æ•°å£°æ˜ã€<code>var</code> å˜é‡ï¼ˆæå‡ï¼‰ï¼›</li><li>åˆå§‹åŒ–å½¢å‚ã€<code>arguments</code>ï¼›</li></ul></li><li><strong>å»ºç«‹ä½œç”¨åŸŸé“¾</strong>ã€‚</li></ul><h4 id="_2-æ‰§è¡Œé˜¶æ®µ-execution-phase" tabindex="-1">2. <strong>æ‰§è¡Œé˜¶æ®µï¼ˆExecution Phaseï¼‰</strong> <a class="header-anchor" href="#_2-æ‰§è¡Œé˜¶æ®µ-execution-phase" aria-label="Permalink to â€œ2. æ‰§è¡Œé˜¶æ®µï¼ˆExecution Phaseï¼‰â€">â€‹</a></h4><ul><li>é€è¡Œæ‰§è¡Œä»£ç ï¼›</li><li>èµ‹å€¼ã€è®¡ç®—è¡¨è¾¾å¼ï¼›</li><li>è®¿é—®/ä¿®æ”¹å˜é‡ã€‚</li></ul><blockquote><p>âœ… <strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>åˆ›å»ºé˜¶æ®µ</strong>ï¼š</p><ul><li><code>this</code> ç»‘å®šï¼›</li><li>è¯æ³•ç¯å¢ƒåŒ…å« <code>a=1</code>, <code>b=undefined</code>, <code>c=function</code>ï¼›<br><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼š</li><li><code>b = 2</code> èµ‹å€¼ã€‚</li></ul></blockquote><hr><h3 id="äº”ã€æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ-call-stack" tabindex="-1">äº”ã€æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆCall Stackï¼‰ <a class="header-anchor" href="#äº”ã€æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ-call-stack" aria-label="Permalink to â€œäº”ã€æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆCall Stackï¼‰â€">â€‹</a></h3><ul><li>JS æ˜¯å•çº¿ç¨‹ï¼Œé€šè¿‡<strong>æ ˆç»“æ„</strong>ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ï¼›</li><li><strong>å…¨å±€ä¸Šä¸‹æ–‡</strong>æœ€å…ˆå…¥æ ˆï¼›</li><li><strong>å‡½æ•°è°ƒç”¨</strong>æ—¶ï¼Œæ–°ä¸Šä¸‹æ–‡å‹æ ˆï¼›</li><li><strong>å‡½æ•°è¿”å›</strong>æ—¶ï¼Œä¸Šä¸‹æ–‡å‡ºæ ˆã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è°ƒç”¨æ ˆç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ ˆå˜åŒ–ï¼šglobal â†’ a â†’ b â†’ c â†’ b â†’ a â†’ global</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>æ ˆæº¢å‡º</strong>ï¼šé€’å½’è¿‡æ·±å¯¼è‡´æ ˆç©ºé—´è€—å°½ï¼ˆ<code>RangeError: Maximum call stack size exceeded</code>ï¼‰ã€‚</p></blockquote><hr><h3 id="å…­ã€ä¸ç›¸å…³æ¦‚å¿µçš„å…³ç³»" tabindex="-1">å…­ã€ä¸ç›¸å…³æ¦‚å¿µçš„å…³ç³» <a class="header-anchor" href="#å…­ã€ä¸ç›¸å…³æ¦‚å¿µçš„å…³ç³»" aria-label="Permalink to â€œå…­ã€ä¸ç›¸å…³æ¦‚å¿µçš„å…³ç³»â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ¦‚å¿µ</th><th>å…³ç³»</th></tr></thead><tbody><tr><td><strong>ä½œç”¨åŸŸ</strong></td><td>ç”±æ‰§è¡Œä¸Šä¸‹æ–‡çš„è¯æ³•ç¯å¢ƒå®šä¹‰</td></tr><tr><td><strong>é—­åŒ…</strong></td><td>å†…éƒ¨å‡½æ•°ä¿ç•™å¯¹å¤–éƒ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„å¼•ç”¨</td></tr><tr><td><strong>å˜é‡æå‡</strong></td><td>å‘ç”Ÿåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µ</td></tr></tbody></table><hr><h3 id="ä¸€å¥è¯æ€»ç»“-1" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-1" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ JS è¿è¡Œæ—¶çš„â€œå·¥ä½œå°â€ï¼Œå®ƒåœ¨ä»£ç æ‰§è¡Œå‰æ­å»ºå¥½å˜é‡ã€ä½œç”¨åŸŸå’Œ this çš„ç¯å¢ƒï¼Œå¹¶é€šè¿‡è°ƒç”¨æ ˆç®¡ç†æ‰§è¡Œæµç¨‹ã€‚</strong></p></blockquote><h2 id="callã€applyã€bind-å‡½æ•°" tabindex="-1">callã€applyã€bind å‡½æ•° <a class="header-anchor" href="#callã€applyã€bind-å‡½æ•°" aria-label="Permalink to â€œcallã€applyã€bind å‡½æ•°â€">â€‹</a></h2><p><code>call</code>ã€<code>apply</code> å’Œ <code>bind</code> æ˜¯ JavaScript ä¸­ç”¨äº<strong>æ˜¾å¼ç»‘å®šå‡½æ•° <code>this</code> æŒ‡å‘</strong>çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œå‡å®šä¹‰åœ¨ <code>Function.prototype</code> ä¸Šã€‚</p><hr><h3 id="ä¸€ã€å…±åŒç‚¹" tabindex="-1">ä¸€ã€å…±åŒç‚¹ <a class="header-anchor" href="#ä¸€ã€å…±åŒç‚¹" aria-label="Permalink to â€œä¸€ã€å…±åŒç‚¹â€">â€‹</a></h3><ul><li>éƒ½å¯ä»¥<strong>æ”¹å˜å‡½æ•°å†…éƒ¨ <code>this</code> çš„æŒ‡å‘</strong>ï¼›</li><li>ç¬¬ä¸€ä¸ªå‚æ•°å‡ä¸º <strong><code>thisArg</code></strong>ï¼ˆè¦ç»‘å®šçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰ï¼›</li><li>éƒ½å¯ä¼ é€’å‚æ•°ç»™ç›®æ ‡å‡½æ•°ã€‚</li></ul><hr><h3 id="äºŒã€æ ¸å¿ƒåŒºåˆ«-1" tabindex="-1">äºŒã€æ ¸å¿ƒåŒºåˆ« <a class="header-anchor" href="#äºŒã€æ ¸å¿ƒåŒºåˆ«-1" aria-label="Permalink to â€œäºŒã€æ ¸å¿ƒåŒºåˆ«â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>è°ƒç”¨æ–¹å¼</th><th>å‚æ•°å½¢å¼</th><th>è¿”å›å€¼</th><th>æ˜¯å¦ç«‹å³æ‰§è¡Œ</th></tr></thead><tbody><tr><td><code>call</code></td><td><code>fn.call(thisArg, arg1, arg2, ...)</code></td><td><strong>é€ä¸ªä¼ å‚</strong></td><td>å‡½æ•°æ‰§è¡Œç»“æœ</td><td>âœ… ç«‹å³æ‰§è¡Œ</td></tr><tr><td><code>apply</code></td><td><code>fn.apply(thisArg, [arg1, arg2, ...])</code></td><td><strong>å‚æ•°æ•°ç»„</strong></td><td>å‡½æ•°æ‰§è¡Œç»“æœ</td><td>âœ… ç«‹å³æ‰§è¡Œ</td></tr><tr><td><code>bind</code></td><td><code>fn.bind(thisArg, arg1, arg2, ...)</code></td><td>å¯é€ä¸ªä¼ å‚ï¼ˆæ”¯æŒé¢„ç½®éƒ¨åˆ†å‚æ•°ï¼‰</td><td><strong>æ–°å‡½æ•°</strong>ï¼ˆç»‘å®šåï¼‰</td><td>âŒ ä¸æ‰§è¡Œï¼Œè¿”å›å¯è°ƒç”¨å‡½æ•°</td></tr></tbody></table><hr><h3 id="ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to â€œä¸‰ã€ä½¿ç”¨ç¤ºä¾‹â€">â€‹</a></h3><h4 id="_1-call-apply-ç«‹å³è°ƒç”¨" tabindex="-1">1. <code>call</code> / <code>apply</code>ï¼šç«‹å³è°ƒç”¨ <a class="header-anchor" href="#_1-call-apply-ç«‹å³è°ƒç”¨" aria-label="Permalink to â€œ1. call / applyï¼šç«‹å³è°ƒç”¨â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greeting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}!\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hello, Alice!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hi, Alice!</span></span></code></pre></div><blockquote><p>ğŸ’¡ <strong>è®°å¿†æŠ€å·§</strong>ï¼š</p><ul><li><code>call</code> â†’ <strong>C</strong>omma separatedï¼ˆé€—å·åˆ†éš”å‚æ•°ï¼‰</li><li><code>apply</code> â†’ <strong>A</strong>rray of argumentsï¼ˆå‚æ•°æ•°ç»„ï¼‰</li></ul></blockquote><h4 id="_2-bind-åˆ›å»ºç»‘å®šå‡½æ•°-å¸¸ç”¨äºå›è°ƒ" tabindex="-1">2. <code>bind</code>ï¼šåˆ›å»ºç»‘å®šå‡½æ•°ï¼ˆå¸¸ç”¨äºå›è°ƒï¼‰ <a class="header-anchor" href="#_2-bind-åˆ›å»ºç»‘å®šå‡½æ•°-å¸¸ç”¨äºå›è°ƒ" aria-label="Permalink to â€œ2. bindï¼šåˆ›å»ºç»‘å®šå‡½æ•°ï¼ˆå¸¸ç”¨äºå›è°ƒï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boundGreet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hey&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">boundGreet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hey, Alice!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…¸å‹åœºæ™¯ï¼šäº‹ä»¶å¤„ç†å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Click me&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»‘å®š thisï¼Œé¿å…ä¸¢å¤±ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleClick.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  handleClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.text); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ­£ç¡®è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="å››ã€é«˜çº§ç”¨æ³•" tabindex="-1">å››ã€é«˜çº§ç”¨æ³• <a class="header-anchor" href="#å››ã€é«˜çº§ç”¨æ³•" aria-label="Permalink to â€œå››ã€é«˜çº§ç”¨æ³•â€">â€‹</a></h3><h4 id="_1-å€Ÿç”¨æ•°ç»„æ–¹æ³•" tabindex="-1">1. <strong>å€Ÿç”¨æ•°ç»„æ–¹æ³•</strong> <a class="header-anchor" href="#_1-å€Ÿç”¨æ•°ç»„æ–¹æ³•" aria-label="Permalink to â€œ1. å€Ÿç”¨æ•°ç»„æ–¹æ³•â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°†ç±»æ•°ç»„è½¬çœŸæ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.slice.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ±‚æ•°ç»„æœ€å¤§å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.max.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3</span></span></code></pre></div><h4 id="_2-æŸ¯é‡ŒåŒ–-currying" tabindex="-1">2. <strong>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</strong> <a class="header-anchor" href="#_2-æŸ¯é‡ŒåŒ–-currying" aria-label="Permalink to â€œ2. æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multiply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> double</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> multiply.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 10</span></span></code></pre></div><h4 id="_3-æ¨¡æ‹Ÿ-new" tabindex="-1">3. <strong>æ¨¡æ‹Ÿ <code>new</code></strong> <a class="header-anchor" href="#_3-æ¨¡æ‹Ÿ-new" aria-label="Permalink to â€œ3. æ¨¡æ‹Ÿ newâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Constructor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, args);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="äº”ã€æ³¨æ„äº‹é¡¹" tabindex="-1">äº”ã€æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#äº”ã€æ³¨æ„äº‹é¡¹" aria-label="Permalink to â€œäº”ã€æ³¨æ„äº‹é¡¹â€">â€‹</a></h3><ul><li>è‹¥ <code>thisArg</code> ä¼  <code>null</code>/<code>undefined</code>ï¼š <ul><li>éä¸¥æ ¼æ¨¡å¼ â†’ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆ<code>window</code>ï¼‰ï¼›</li><li>ä¸¥æ ¼æ¨¡å¼ â†’ <code>this</code> ä¿æŒ <code>null</code>/<code>undefined</code>ã€‚</li></ul></li><li><code>bind</code> è¿”å›çš„å‡½æ•°<strong>ä¸èƒ½å†æ¬¡é€šè¿‡ <code>call</code>/<code>apply</code> æ”¹å˜ <code>this</code></strong>ï¼ˆä½†å¯ä¼ å‚ï¼‰ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bound</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bound.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(otherObj); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// this ä»æ˜¯ objï¼</span></span></code></pre></div></li></ul><hr><h3 id="ä¸€å¥è¯æ€»ç»“-2" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-2" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong><code>call</code>/<code>apply</code> ç«‹å³æ‰§è¡Œå¹¶æŒ‡å®š <code>this</code>ï¼›<code>bind</code> è¿”å›æ°¸ä¹…ç»‘å®š <code>this</code> çš„æ–°å‡½æ•°ã€‚</strong></p></blockquote><h2 id="å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼" tabindex="-1">å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼Ÿ <a class="header-anchor" href="#å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼" aria-label="Permalink to â€œå¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼Ÿâ€">â€‹</a></h2><p>JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æ¼”è¿›ç»å†äº†å¤šä¸ªé˜¶æ®µï¼Œä¸»è¦å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p><hr><h3 id="ä¸€ã€å›è°ƒå‡½æ•°-callback-â€”â€”-æœ€åŸå§‹æ–¹å¼" tabindex="-1">ä¸€ã€<strong>å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰</strong> â€”â€” æœ€åŸå§‹æ–¹å¼ <a class="header-anchor" href="#ä¸€ã€å›è°ƒå‡½æ•°-callback-â€”â€”-æœ€åŸå§‹æ–¹å¼" aria-label="Permalink to â€œä¸€ã€å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰ â€”â€” æœ€åŸå§‹æ–¹å¼â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>âœ… ç®€å•ç›´æ¥<br> âŒ <strong>å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰</strong>ï¼šåµŒå¥—å¤šå±‚éš¾ä»¥ç»´æŠ¤</p><hr><h3 id="äºŒã€promise-â€”â€”-é“¾å¼è°ƒç”¨è§£å†³åµŒå¥—" tabindex="-1">äºŒã€<strong>Promise</strong> â€”â€” é“¾å¼è°ƒç”¨è§£å†³åµŒå¥— <a class="header-anchor" href="#äºŒã€promise-â€”â€”-é“¾å¼è°ƒç”¨è§£å†³åµŒå¥—" aria-label="Permalink to â€œäºŒã€Promise â€”â€” é“¾å¼è°ƒç”¨è§£å†³åµŒå¥—â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error));</span></span></code></pre></div><p>âœ… é¿å…å›è°ƒåœ°ç‹±ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨<br> âŒ ä»éœ€ <code>.then()</code>ï¼Œé”™è¯¯å¤„ç†éœ€æ¯ä¸ªé“¾å•ç‹¬å¤„ç†</p><blockquote><p>ğŸ”§ <strong>å·¥å…·æ–¹æ³•</strong>ï¼š<code>Promise.all()</code>ã€<code>Promise.race()</code>ã€<code>Promise.allSettled()</code></p></blockquote><hr><h3 id="ä¸‰ã€generator-co-è¿‡æ¸¡æ–¹æ¡ˆ-â€”â€”-æš‚åœ-æ¢å¤æ‰§è¡Œ" tabindex="-1">ä¸‰ã€<strong>Generator + coï¼ˆè¿‡æ¸¡æ–¹æ¡ˆï¼‰</strong> â€”â€” æš‚åœ/æ¢å¤æ‰§è¡Œ <a class="header-anchor" href="#ä¸‰ã€generator-co-è¿‡æ¸¡æ–¹æ¡ˆ-â€”â€”-æš‚åœ-æ¢å¤æ‰§è¡Œ" aria-label="Permalink to â€œä¸‰ã€Generator + coï¼ˆè¿‡æ¸¡æ–¹æ¡ˆï¼‰ â€”â€” æš‚åœ/æ¢å¤æ‰§è¡Œâ€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> yield</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// éœ€é…åˆæ‰§è¡Œå™¨ï¼ˆå¦‚ co åº“ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">co</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(main);</span></span></code></pre></div><p>âœ… åŒæ­¥å†™æ³•é£æ ¼<br> âŒ éœ€é¢å¤–æ‰§è¡Œå™¨ï¼Œæœªæˆä¸ºä¸»æµ</p><hr><h3 id="å››ã€async-await-æ¨è-â€”â€”-è¯­æ³•ç³–-åŸºäº-promise" tabindex="-1">å››ã€<strong>async/awaitï¼ˆæ¨èï¼‰</strong> â€”â€” è¯­æ³•ç³–ï¼ŒåŸºäº Promise <a class="header-anchor" href="#å››ã€async-await-æ¨è-â€”â€”-è¯­æ³•ç³–-åŸºäº-promise" aria-label="Permalink to â€œå››ã€async/awaitï¼ˆæ¨èï¼‰ â€”â€” è¯­æ³•ç³–ï¼ŒåŸºäº Promiseâ€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>âœ… <strong>æœ€æ¥è¿‘åŒæ­¥ä»£ç </strong>ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé”™è¯¯å¤„ç†ç»Ÿä¸€<br> âš ï¸ æœ¬è´¨ä»æ˜¯ Promiseï¼Œéœ€ç†è§£å…¶åº•å±‚æœºåˆ¶</p><blockquote><p>ğŸ’¡ <strong>å¹¶è¡Œè¯·æ±‚ä¼˜åŒ–</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯ï¼šä¸²è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ­£ç¡®ï¼šå¹¶è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]);</span></span></code></pre></div></blockquote><hr><h3 id="äº”ã€äº‹ä»¶ç›‘å¬-eventemitter-â€”â€”-å‘å¸ƒ-è®¢é˜…æ¨¡å¼" tabindex="-1">äº”ã€<strong>äº‹ä»¶ç›‘å¬ï¼ˆEventEmitterï¼‰</strong> â€”â€” å‘å¸ƒ-è®¢é˜…æ¨¡å¼ <a class="header-anchor" href="#äº”ã€äº‹ä»¶ç›‘å¬-eventemitter-â€”â€”-å‘å¸ƒ-è®¢é˜…æ¨¡å¼" aria-label="Permalink to â€œäº”ã€äº‹ä»¶ç›‘å¬ï¼ˆEventEmitterï¼‰ â€”â€” å‘å¸ƒ-è®¢é˜…æ¨¡å¼â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> emitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">emitter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">emitter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>âœ… é€‚åˆå¤šæ¶ˆè´¹è€…åœºæ™¯ï¼ˆå¦‚ Node.js æµï¼‰<br> âŒ ä¸é€‚åˆä¸€æ¬¡æ€§å¼‚æ­¥æ“ä½œ</p><hr><h3 id="å…­ã€web-workers-messagechannel-â€”â€”-å¤šçº¿ç¨‹é€šä¿¡" tabindex="-1">å…­ã€<strong>Web Workers / MessageChannel</strong> â€”â€” å¤šçº¿ç¨‹é€šä¿¡ <a class="header-anchor" href="#å…­ã€web-workers-messagechannel-â€”â€”-å¤šçº¿ç¨‹é€šä¿¡" aria-label="Permalink to â€œå…­ã€Web Workers / MessageChannel â€”â€” å¤šçº¿ç¨‹é€šä¿¡â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸»çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;worker.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;start&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.data);</span></span></code></pre></div><p>âœ… é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼ˆCPU å¯†é›†å‹ä»»åŠ¡ï¼‰<br> âŒ é€šä¿¡æˆæœ¬é«˜ï¼Œä¸èƒ½å…±äº«å†…å­˜</p><hr><h3 id="æ€»ç»“-å¦‚ä½•é€‰æ‹©-1" tabindex="-1">æ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ <a class="header-anchor" href="#æ€»ç»“-å¦‚ä½•é€‰æ‹©-1" aria-label="Permalink to â€œæ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç°ä»£é¡¹ç›®å¼€å‘</td><td><strong>async/await</strong>ï¼ˆé¦–é€‰ï¼‰</td></tr><tr><td>éœ€è¦å–æ¶ˆ/ç«æ€æ§åˆ¶</td><td><code>AbortController</code> + <code>fetch</code></td></tr><tr><td>å¹¶å‘æ§åˆ¶ï¼ˆå¦‚é™åˆ¶åŒæ—¶è¯·æ±‚æ•°ï¼‰</td><td>Promise + é˜Ÿåˆ—ç®¡ç†</td></tr><tr><td>æµè§ˆå™¨å…¼å®¹æ€§è¦æ±‚é«˜ï¼ˆIEï¼‰</td><td>Promiseï¼ˆpolyfillï¼‰ + å›è°ƒé™çº§</td></tr><tr><td>æµå¼æ•°æ®å¤„ç†</td><td><strong>EventEmitter</strong> / <strong>Observableï¼ˆRxJSï¼‰</strong></td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>é»„é‡‘æ³•åˆ™</strong>ï¼š</p><ul><li>ä¼˜å…ˆç”¨ <code>async/await</code>ï¼›</li><li>å¤æ‚æµå¤„ç†è€ƒè™‘ <strong>RxJS</strong>ï¼›</li><li>é¿å…å›è°ƒåœ°ç‹±ï¼Œæ‹¥æŠ± Promise åŒ–ã€‚</li></ul></blockquote><h2 id="å¯¹async-await-çš„ç†è§£" tabindex="-1">å¯¹async/await çš„ç†è§£ <a class="header-anchor" href="#å¯¹async-await-çš„ç†è§£" aria-label="Permalink to â€œå¯¹async/await çš„ç†è§£â€">â€‹</a></h2><p><code>async/await</code> æ˜¯ JavaScript ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„<strong>è¯­æ³•ç³–</strong>ï¼Œå®ƒå»ºç«‹åœ¨ <strong>Promise</strong> ä¹‹ä¸Šï¼Œè®©å¼‚æ­¥ä»£ç ä»¥<strong>åŒæ­¥é£æ ¼</strong>ä¹¦å†™ï¼Œæå¤§æå‡äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒç‰¹æ€§" tabindex="-1">ä¸€ã€æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒç‰¹æ€§â€">â€‹</a></h3><h4 id="_1-async-å‡½æ•°" tabindex="-1">1. <strong><code>async</code> å‡½æ•°</strong> <a class="header-anchor" href="#_1-async-å‡½æ•°" aria-label="Permalink to â€œ1. async å‡½æ•°â€">â€‹</a></h4><ul><li>åœ¨å‡½æ•°å‰åŠ  <code>async</code>ï¼Œè¯¥å‡½æ•°<strong>è‡ªåŠ¨è¿”å›ä¸€ä¸ª Promise</strong>ï¼›</li><li>è‹¥å‡½æ•°è¿”å›æ™®é€šå€¼ï¼Œä¼šè¢« <code>Promise.resolve()</code> åŒ…è£…ï¼›</li><li>è‹¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¼šè¿”å› <code>Promise.reject()</code>ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;hello&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.message)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;fail&#39;</span></span></code></pre></div><h4 id="_2-await-è¡¨è¾¾å¼" tabindex="-1">2. <strong><code>await</code> è¡¨è¾¾å¼</strong> <a class="header-anchor" href="#_2-await-è¡¨è¾¾å¼" aria-label="Permalink to â€œ2. await è¡¨è¾¾å¼â€">â€‹</a></h4><ul><li>åªèƒ½åœ¨ <code>async</code> å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼›</li><li><strong>æš‚åœå‡½æ•°æ‰§è¡Œ</strong>ï¼Œç­‰å¾… Promise resolveï¼Œç„¶åè¿”å›ç»“æœï¼›</li><li>è‹¥ Promise rejectï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆå¯ç”¨ <code>try...catch</code> æ•è·ï¼‰ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æš‚åœç›´åˆ° fetch å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†æš‚åœè§£æ JSON</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="äºŒã€æ‰§è¡Œæœºåˆ¶-å…³é”®" tabindex="-1">äºŒã€æ‰§è¡Œæœºåˆ¶ï¼ˆå…³é”®ï¼ï¼‰ <a class="header-anchor" href="#äºŒã€æ‰§è¡Œæœºåˆ¶-å…³é”®" aria-label="Permalink to â€œäºŒã€æ‰§è¡Œæœºåˆ¶ï¼ˆå…³é”®ï¼ï¼‰â€">â€‹</a></h3><ul><li><code>await</code> <strong>ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</strong>ï¼Œåªæ˜¯æš‚åœå½“å‰ <code>async</code> å‡½æ•°çš„æ‰§è¡Œï¼›</li><li>JS å¼•æ“ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–åŒæ­¥ä»£ç æˆ–å¾®ä»»åŠ¡ï¼›</li><li><code>await</code> åçš„ä»£ç è¢«æ”¾å…¥ <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰</strong>ï¼Œåœ¨å½“å‰å®ä»»åŠ¡ç»“æŸåç«‹å³æ‰§è¡Œã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;B&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;C&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;E&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡ºï¼šA â†’ C â†’ E â†’ D â†’ B</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯´æ˜ï¼šawait åçš„ &#39;D&#39; å±äºå¾®ä»»åŠ¡ï¼Œæ¯” setTimeoutï¼ˆå®ä»»åŠ¡ï¼‰å…ˆæ‰§è¡Œ</span></span></code></pre></div><hr><h3 id="ä¸‰ã€ä¼˜åŠ¿-vs-promise-é“¾" tabindex="-1">ä¸‰ã€ä¼˜åŠ¿ vs Promise é“¾ <a class="header-anchor" href="#ä¸‰ã€ä¼˜åŠ¿-vs-promise-é“¾" aria-label="Permalink to â€œä¸‰ã€ä¼˜åŠ¿ vs Promise é“¾â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>Promise é“¾</th><th>async/await</th></tr></thead><tbody><tr><td>åŸºæœ¬å¼‚æ­¥</td><td><code>.then().then()</code></td><td><code>await ...; await ...</code></td></tr><tr><td>é”™è¯¯å¤„ç†</td><td>å¤šä¸ª <code>.catch()</code></td><td>ç»Ÿä¸€ <code>try...catch</code></td></tr><tr><td>æ¡ä»¶åˆ†æ”¯</td><td>éš¾ä»¥åµŒå¥—</td><td>ç›´æ¥ç”¨ <code>if/else</code></td></tr><tr><td>å¾ªç¯å¼‚æ­¥</td><td>éœ€ <code>reduce</code> æˆ–é€’å½’</td><td>ç›´æ¥ <code>for...of</code> + <code>await</code></td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Promise é“¾ï¼ˆå¤æ‚æ¡ä»¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data.needMore) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.nextUrl);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// async/awaitï¼ˆæ¸…æ™°ç›´è§‚ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data.needMore) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nextRes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.nextUrl);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="å››ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ" tabindex="-1">å››ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ <a class="header-anchor" href="#å››ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ" aria-label="Permalink to â€œå››ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µâ€">â€‹</a></h3><h4 id="âš ï¸-1-ä¸è¦æ»¥ç”¨-await-å¯¼è‡´ä¸²è¡ŒåŒ–" tabindex="-1">âš ï¸ 1. <strong>ä¸è¦æ»¥ç”¨ <code>await</code> å¯¼è‡´ä¸²è¡ŒåŒ–</strong> <a class="header-anchor" href="#âš ï¸-1-ä¸è¦æ»¥ç”¨-await-å¯¼è‡´ä¸²è¡ŒåŒ–" aria-label="Permalink to â€œâš ï¸ 1. ä¸è¦æ»¥ç”¨ await å¯¼è‡´ä¸²è¡ŒåŒ–â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ ä½æ•ˆï¼šä¸²è¡Œè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… é«˜æ•ˆï¼šå¹¶è¡Œè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]);</span></span></code></pre></div><h4 id="âš ï¸-2-é¡¶å±‚-await-top-level-await" tabindex="-1">âš ï¸ 2. <strong>é¡¶å±‚ awaitï¼ˆTop-level awaitï¼‰</strong> <a class="header-anchor" href="#âš ï¸-2-é¡¶å±‚-await-top-level-await" aria-label="Permalink to â€œâš ï¸ 2. é¡¶å±‚ awaitï¼ˆTop-level awaitï¼‰â€">â€‹</a></h4><ul><li>åœ¨ ES æ¨¡å—ä¸­ï¼Œå¯åœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨ <code>await</code>ï¼ˆNode.js 14.8+ / ç°ä»£æµè§ˆå™¨ï¼‰ï¼›</li><li>ä½†ä¼š<strong>é˜»å¡æ¨¡å—åŠ è½½</strong>ï¼Œæ…ç”¨ï¼</li></ul><h4 id="âš ï¸-3-é”™è¯¯å¿…é¡»å¤„ç†" tabindex="-1">âš ï¸ 3. <strong>é”™è¯¯å¿…é¡»å¤„ç†</strong> <a class="header-anchor" href="#âš ï¸-3-é”™è¯¯å¿…é¡»å¤„ç†" aria-label="Permalink to â€œâš ï¸ 3. é”™è¯¯å¿…é¡»å¤„ç†â€">â€‹</a></h4><ul><li>æœªæ•è·çš„ <code>await</code> rejection ä¼šå¯¼è‡´ <code>unhandledRejection</code>ï¼›</li><li>å§‹ç»ˆç”¨ <code>try...catch</code> æˆ–åœ¨è°ƒç”¨å¤„ <code>.catch()</code>ã€‚</li></ul><hr><h3 id="äº”ã€æœ¬è´¨ç†è§£" tabindex="-1">äº”ã€æœ¬è´¨ç†è§£ <a class="header-anchor" href="#äº”ã€æœ¬è´¨ç†è§£" aria-label="Permalink to â€œäº”ã€æœ¬è´¨ç†è§£â€">â€‹</a></h3><blockquote><p><strong><code>async/await</code> = Generator + Promise + è‡ªåŠ¨æ‰§è¡Œå™¨</strong><br> å®ƒå°†å¼‚æ­¥æµç¨‹â€œæ‰“å¹³â€ï¼Œä½†åº•å±‚ä»æ˜¯åŸºäº Promise çš„å¾®ä»»åŠ¡æœºåˆ¶ã€‚</p></blockquote><hr><h3 id="ä¸€å¥è¯æ€»ç»“-3" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-3" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong><code>async/await</code> è®©å¼‚æ­¥ä»£ç åƒåŒæ­¥ä¸€æ ·å†™ï¼Œä½†æ‰§è¡Œä»æ˜¯éé˜»å¡çš„â€”â€”å®ƒæ˜¯ Promise çš„ä¼˜é›…å°è£…ï¼Œè€Œéæ–°å¼‚æ­¥æ¨¡å‹ã€‚</strong></p></blockquote><h2 id="async-await-å¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸" tabindex="-1">async/await å¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸ <a class="header-anchor" href="#async-await-å¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸" aria-label="Permalink to â€œasync/await å¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸â€">â€‹</a></h2><p>åœ¨ <code>async/await</code> ä¸­ä¼˜é›…å¤„ç†å¼‚å¸¸ï¼Œæ ¸å¿ƒæ˜¯ <strong>é¿å…æœªæ•è·çš„ Promise rejection</strong>ï¼ŒåŒæ—¶ä¿æŒä»£ç æ¸…æ™°ã€‚ä»¥ä¸‹æ˜¯å‡ ç§æ¨èæ–¹å¼ï¼š</p><hr><h3 id="ä¸€ã€åŸºç¡€-try-catch-æœ€å¸¸ç”¨" tabindex="-1">ä¸€ã€åŸºç¡€ï¼š<code>try...catch</code>ï¼ˆæœ€å¸¸ç”¨ï¼‰ <a class="header-anchor" href="#ä¸€ã€åŸºç¡€-try-catch-æœ€å¸¸ç”¨" aria-label="Permalink to â€œä¸€ã€åŸºç¡€ï¼štry...catchï¼ˆæœ€å¸¸ç”¨ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.ok) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¯·æ±‚å¤±è´¥&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;é”™è¯¯:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¯è¿”å›é»˜è®¤å€¼æˆ–é‡æ–°æŠ›å‡º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆ– return null;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šç»“æ„æ¸…æ™°ï¼ŒåŒæ­¥é£æ ¼<br> âš ï¸ <strong>æ³¨æ„</strong>ï¼šåªèƒ½æ•è· <code>await</code> åçš„å¼‚æ­¥é”™è¯¯ï¼Œä¸èƒ½æ•è·åŒæ­¥æŠ›é”™ï¼ˆä½†åŒæ­¥é”™è¯¯ä¹Ÿä¼šè¿›å…¥ <code>catch</code>ï¼‰</p><hr><h3 id="äºŒã€å°è£…-to-å·¥å…·å‡½æ•°-go-é£æ ¼" tabindex="-1">äºŒã€å°è£… <code>to</code> å·¥å…·å‡½æ•°ï¼ˆGo é£æ ¼ï¼‰ <a class="header-anchor" href="#äºŒã€å°è£…-to-å·¥å…·å‡½æ•°-go-é£æ ¼" aria-label="Permalink to â€œäºŒã€å°è£… to å·¥å…·å‡½æ•°ï¼ˆGo é£æ ¼ï¼‰â€">â€‹</a></h3><p>æ¨¡ä»¿ Go è¯­è¨€çš„å¤šè¿”å›å€¼é”™è¯¯å¤„ç†ï¼Œé¿å… <code>try...catch</code> åµŒå¥—ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// utils.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> promise</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [err, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å¤±è´¥:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æˆåŠŸ:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>é¿å… <code>try...catch</code> åµŒå¥—ï¼ˆå°¤å…¶å¤šå¼‚æ­¥æ“ä½œæ—¶ï¼‰ï¼›</li><li>é”™è¯¯å¤„ç†ä¸ä¸šåŠ¡é€»è¾‘å¹³çº§ã€‚</li></ul><hr><h3 id="ä¸‰ã€å…¨å±€æœªæ•è·å¼‚å¸¸ç›‘å¬-å…œåº•" tabindex="-1">ä¸‰ã€å…¨å±€æœªæ•è·å¼‚å¸¸ç›‘å¬ï¼ˆå…œåº•ï¼‰ <a class="header-anchor" href="#ä¸‰ã€å…¨å±€æœªæ•è·å¼‚å¸¸ç›‘å¬-å…œåº•" aria-label="Permalink to â€œä¸‰ã€å…¨å±€æœªæ•è·å¼‚å¸¸ç›‘å¬ï¼ˆå…œåº•ï¼‰â€">â€‹</a></h3><p>é˜²æ­¢æœªå¤„ç†çš„ rejection å¯¼è‡´ç¨‹åºå´©æºƒï¼ˆNode.js / æµè§ˆå™¨ï¼‰ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Node.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;unhandledRejection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reason</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æœªæ•è·çš„å¼‚æ­¥é”™è¯¯:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reason);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æµè§ˆå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;unhandledrejection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æœªæ•è·çš„ Promise rejection:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, event.reason);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜»æ­¢é»˜è®¤æŠ¥é”™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>ä»…ä½œå…œåº•</strong>ï¼Œä¸åº”æ›¿ä»£å±€éƒ¨é”™è¯¯å¤„ç†ï¼</p></blockquote><hr><h3 id="å››ã€é«˜é˜¶æŠ€å·§-è‡ªå®šä¹‰é”™è¯¯è¾¹ç•Œ-react-ç±»ä¼¼" tabindex="-1">å››ã€é«˜é˜¶æŠ€å·§ï¼šè‡ªå®šä¹‰é”™è¯¯è¾¹ç•Œï¼ˆReact ç±»ä¼¼ï¼‰ <a class="header-anchor" href="#å››ã€é«˜é˜¶æŠ€å·§-è‡ªå®šä¹‰é”™è¯¯è¾¹ç•Œ-react-ç±»ä¼¼" aria-label="Permalink to â€œå››ã€é«˜é˜¶æŠ€å·§ï¼šè‡ªå®šä¹‰é”™è¯¯è¾¹ç•Œï¼ˆReact ç±»ä¼¼ï¼‰â€">â€‹</a></h3><p>å¯¹å…³é”®æ¨¡å—å°è£…ç»Ÿä¸€é”™è¯¯å¤„ç†é€»è¾‘ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> withErrorHandling</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">asyncFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> asyncFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    logToSentry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸ŠæŠ¥ç›‘æ§</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    showUserMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fallback;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> withErrorHandling</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id), {});</span></span></code></pre></div><hr><h3 id="äº”ã€é¿å…çš„åæ¨¡å¼" tabindex="-1">äº”ã€é¿å…çš„åæ¨¡å¼ <a class="header-anchor" href="#äº”ã€é¿å…çš„åæ¨¡å¼" aria-label="Permalink to â€œäº”ã€é¿å…çš„åæ¨¡å¼â€">â€‹</a></h3><h4 id="âŒ-1-å¿½ç•¥é”™è¯¯" tabindex="-1">âŒ 1. å¿½ç•¥é”™è¯¯ <a class="header-anchor" href="#âŒ-1-å¿½ç•¥é”™è¯¯" aria-label="Permalink to â€œâŒ 1. å¿½ç•¥é”™è¯¯â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ—  try/catch â†’ å¯èƒ½ unhandledRejection</span></span></code></pre></div><h4 id="âŒ-2-æ··æ·†åŒæ­¥-å¼‚æ­¥é”™è¯¯" tabindex="-1">âŒ 2. æ··æ·†åŒæ­¥/å¼‚æ­¥é”™è¯¯ <a class="header-anchor" href="#âŒ-2-æ··æ·†åŒæ­¥-å¼‚æ­¥é”™è¯¯" aria-label="Permalink to â€œâŒ 2. æ··æ·†åŒæ­¥/å¼‚æ­¥é”™è¯¯â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŒæ­¥é”™è¯¯ï¼éœ€åœ¨ try å†…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>âœ… æ­£ç¡®ï¼šæ•´ä¸ªå‡½æ•°ä½“åŒ…åœ¨ <code>try...catch</code> ä¸­ã€‚</p><h4 id="âŒ-3-è¿‡åº¦åµŒå¥—-try-catch" tabindex="-1">âŒ 3. è¿‡åº¦åµŒå¥— try/catch <a class="header-anchor" href="#âŒ-3-è¿‡åº¦åµŒå¥—-try-catch" aria-label="Permalink to â€œâŒ 3. è¿‡åº¦åµŒå¥— try/catchâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸ä¼˜é›…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> step1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> step2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span></code></pre></div><p>âœ… æ”¹ç”¨ <code>to()</code> å·¥å…·å‡½æ•°æˆ–æ‹†åˆ†ä¸ºç‹¬ç«‹å‡½æ•°ã€‚</p><hr><h3 id="æ€»ç»“-æœ€ä½³å®è·µ" tabindex="-1">æ€»ç»“ï¼šæœ€ä½³å®è·µ <a class="header-anchor" href="#æ€»ç»“-æœ€ä½³å®è·µ" aria-label="Permalink to â€œæ€»ç»“ï¼šæœ€ä½³å®è·µâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>å•æ¬¡å¼‚æ­¥æ“ä½œ</td><td><code>try...catch</code></td></tr><tr><td>å¤šä¸ªç‹¬ç«‹å¼‚æ­¥æ“ä½œ</td><td><code>to()</code> å·¥å…·å‡½æ•°</td></tr><tr><td>å…¨å±€ç›‘æ§</td><td><code>unhandledRejection</code> ç›‘å¬</td></tr><tr><td>ä¸šåŠ¡æ¨¡å—å¤ç”¨</td><td>å°è£… <code>withErrorHandling</code></td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>åŸåˆ™</strong>ï¼š</p><ul><li><strong>æ¯ä¸ª <code>await</code> è¦ä¹ˆè¢« <code>try...catch</code> åŒ…è£¹ï¼Œè¦ä¹ˆç”±è°ƒç”¨è€…å¤„ç†</strong>ï¼›</li><li><strong>ä¸è¦åæ‰é”™è¯¯</strong>ï¼ˆè‡³å°‘è®°å½•æ—¥å¿—ï¼‰ï¼›</li><li><strong>ç”¨æˆ·å¯è§æ“ä½œå¿…é¡»æœ‰é”™è¯¯åé¦ˆ</strong>ã€‚</li></ul></blockquote><h2 id="settimeoutã€promiseã€async-await-çš„åŒºåˆ«" tabindex="-1">setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ« <a class="header-anchor" href="#settimeoutã€promiseã€async-await-çš„åŒºåˆ«" aria-label="Permalink to â€œsetTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«â€">â€‹</a></h2><p><code>setTimeout</code>ã€<code>Promise</code> å’Œ <code>Async/Await</code> éƒ½æ¶‰åŠ JavaScript çš„<strong>å¼‚æ­¥æœºåˆ¶</strong>ï¼Œä½†å®ƒä»¬åœ¨ <strong>ä»»åŠ¡ç±»å‹ã€æ‰§è¡Œæ—¶æœºã€ç”¨é€”å’Œåº•å±‚åŸç†</strong> ä¸Šæœ‰æœ¬è´¨åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†å¯¹æ¯”ï¼š</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ" tabindex="-1">ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><code>setTimeout</code></th><th><code>Promise</code></th><th><code>Async/Await</code></th></tr></thead><tbody><tr><td><strong>ä»»åŠ¡ç±»å‹</strong></td><td>å®ä»»åŠ¡ï¼ˆMacro Taskï¼‰</td><td>å¾®ä»»åŠ¡ï¼ˆMicro Taskï¼‰</td><td>åŸºäº Promise çš„è¯­æ³•ç³–ï¼ˆå¾®ä»»åŠ¡ï¼‰</td></tr><tr><td><strong>ç”¨é€”</strong></td><td>å»¶è¿Ÿæ‰§è¡Œã€å®šæ—¶å™¨</td><td>å¤„ç†å¼‚æ­¥æ“ä½œã€é“¾å¼è°ƒç”¨</td><td>ä»¥åŒæ­¥é£æ ¼å†™å¼‚æ­¥ä»£ç </td></tr><tr><td><strong>æ‰§è¡Œé¡ºåº</strong></td><td>äº‹ä»¶å¾ªç¯çš„<strong>ä¸‹ä¸€æ¬¡ tick</strong></td><td>å½“å‰å®ä»»åŠ¡ç»“æŸå<strong>ç«‹å³æ‰§è¡Œ</strong></td><td>åŒ <code>Promise</code>ï¼ˆå¾®ä»»åŠ¡ï¼‰</td></tr><tr><td><strong>æ˜¯å¦é˜»å¡</strong></td><td>ä¸é˜»å¡ï¼Œå›è°ƒå¼‚æ­¥æ‰§è¡Œ</td><td>ä¸é˜»å¡</td><td>ä¸é˜»å¡ï¼ˆä½† <code>await</code> æš‚åœå‡½æ•°å†…åç»­ä»£ç ï¼‰</td></tr></tbody></table><hr><h3 id="äºŒã€æ‰§è¡Œé¡ºåºç¤ºä¾‹-å…³é”®" tabindex="-1">äºŒã€æ‰§è¡Œé¡ºåºç¤ºä¾‹ï¼ˆå…³é”®ï¼ï¼‰ <a class="header-anchor" href="#äºŒã€æ‰§è¡Œé¡ºåºç¤ºä¾‹-å…³é”®" aria-label="Permalink to â€œäºŒã€æ‰§è¡Œé¡ºåºç¤ºä¾‹ï¼ˆå…³é”®ï¼ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;5&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>è¾“å‡ºé¡ºåº</strong>ï¼š<br><code>1 â†’ 5 â†’ 3 â†’ 4 â†’ 2</code></p><h4 id="åŸå› " tabindex="-1">åŸå› ï¼š <a class="header-anchor" href="#åŸå› " aria-label="Permalink to â€œåŸå› ï¼šâ€">â€‹</a></h4><ol><li>åŒæ­¥ä»£ç å…ˆæ‰§è¡Œï¼š<code>1</code>, <code>5</code>ï¼›</li><li>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆ<code>Promise.then</code> å’Œ <code>await</code>ï¼‰åœ¨å½“å‰å®ä»»åŠ¡ç»“æŸ<strong>ç«‹å³æ‰§è¡Œ</strong>ï¼š<code>3</code>, <code>4</code>ï¼›</li><li>å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆ<code>setTimeout</code>ï¼‰ç­‰åˆ°<strong>ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯</strong>æ‰æ‰§è¡Œï¼š<code>2</code>ã€‚</li></ol><blockquote><p>âœ… <strong>å£è¯€</strong>ï¼š<br><strong>åŒæ­¥ â†’ å¾®ä»»åŠ¡ â†’ å®ä»»åŠ¡</strong></p></blockquote><hr><h3 id="ä¸‰ã€è¯¦ç»†è§£æ" tabindex="-1">ä¸‰ã€è¯¦ç»†è§£æ <a class="header-anchor" href="#ä¸‰ã€è¯¦ç»†è§£æ" aria-label="Permalink to â€œä¸‰ã€è¯¦ç»†è§£æâ€">â€‹</a></h3><h4 id="_1-settimeout" tabindex="-1">1. <strong><code>setTimeout</code></strong> <a class="header-anchor" href="#_1-settimeout" aria-label="Permalink to â€œ1. setTimeoutâ€">â€‹</a></h4><ul><li>å±äº <strong>å®ä»»åŠ¡ï¼ˆMacro Taskï¼‰</strong>ï¼Œç”±å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨/Nodeï¼‰ç®¡ç†ï¼›</li><li>å³ä½¿è®¾ä¸º <code>0ms</code>ï¼Œä¹Ÿè‡³å°‘å»¶è¿Ÿåˆ°<strong>ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯å‘¨æœŸ</strong>ï¼›</li><li>ç”¨äº<strong>å»¶è¿Ÿæ‰§è¡Œ</strong>æˆ–<strong>è®©å‡ºä¸»çº¿ç¨‹</strong>ã€‚</li></ul><h4 id="_2-promise" tabindex="-1">2. <strong><code>Promise</code></strong> <a class="header-anchor" href="#_2-promise" aria-label="Permalink to â€œ2. Promiseâ€">â€‹</a></h4><ul><li><code>.then()</code> / <code>.catch()</code> å›è°ƒå±äº <strong>å¾®ä»»åŠ¡ï¼ˆMicro Taskï¼‰</strong>ï¼›</li><li>åœ¨<strong>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œåã€ä¸‹ä¸€ä¸ªå®ä»»åŠ¡å¼€å§‹å‰</strong>æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li><li>é€‚åˆ<strong>é«˜ä¼˜å…ˆçº§å¼‚æ­¥æ“ä½œ</strong>ï¼ˆå¦‚æ•°æ®å¤„ç†ï¼‰ã€‚</li></ul><h4 id="_3-async-await" tabindex="-1">3. <strong><code>Async/Await</code></strong> <a class="header-anchor" href="#_3-async-await" aria-label="Permalink to â€œ3. Async/Awaitâ€">â€‹</a></h4><ul><li>æ˜¯ <code>Promise</code> çš„è¯­æ³•ç³–ï¼Œ<code>await</code> åçš„ä»£ç ä¼šè¢«åŒ…è£…æˆ <code>.then()</code> å›è°ƒï¼›</li><li>å› æ­¤ <code>await</code> åçš„é€»è¾‘ä¹Ÿå±äº <strong>å¾®ä»»åŠ¡</strong>ï¼›</li><li>ä¼˜åŠ¿ï¼š<strong>é¿å…å›è°ƒåœ°ç‹±</strong>ï¼Œä»£ç æ›´æ˜“è¯»ã€‚</li></ul><hr><h3 id="å››ã€å¸¸è§è¯¯åŒº-2" tabindex="-1">å››ã€å¸¸è§è¯¯åŒº <a class="header-anchor" href="#å››ã€å¸¸è§è¯¯åŒº-2" aria-label="Permalink to â€œå››ã€å¸¸è§è¯¯åŒºâ€">â€‹</a></h3><h4 id="âŒ-è¯¯åŒº1-settimeout-fn-0-ä¼š-ç«‹å³-æ‰§è¡Œ" tabindex="-1">âŒ è¯¯åŒº1ï¼š<code>setTimeout(fn, 0)</code> ä¼šâ€œç«‹å³â€æ‰§è¡Œ <a class="header-anchor" href="#âŒ-è¯¯åŒº1-settimeout-fn-0-ä¼š-ç«‹å³-æ‰§è¡Œ" aria-label="Permalink to â€œâŒ è¯¯åŒº1ï¼šsetTimeout(fn, 0) ä¼šâ€œç«‹å³â€æ‰§è¡Œâ€">â€‹</a></h4><p>â†’ å®é™…è¦ç­‰å½“å‰å®ä»»åŠ¡ + æ‰€æœ‰å¾®ä»»åŠ¡å®Œæˆã€‚</p><h4 id="âŒ-è¯¯åŒº2-await-æ˜¯åŒæ­¥é˜»å¡" tabindex="-1">âŒ è¯¯åŒº2ï¼š<code>await</code> æ˜¯åŒæ­¥é˜»å¡ <a class="header-anchor" href="#âŒ-è¯¯åŒº2-await-æ˜¯åŒæ­¥é˜»å¡" aria-label="Permalink to â€œâŒ è¯¯åŒº2ï¼šawait æ˜¯åŒæ­¥é˜»å¡â€">â€‹</a></h4><p>â†’ å®ƒåªæš‚åœ<strong>å½“å‰ async å‡½æ•°å†…éƒ¨</strong>çš„æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚</p><h4 id="âŒ-è¯¯åŒº3-promise-æ¯”-settimeout-æ›´å¿«" tabindex="-1">âŒ è¯¯åŒº3ï¼š<code>Promise</code> æ¯” <code>setTimeout</code> â€œæ›´å¿«â€ <a class="header-anchor" href="#âŒ-è¯¯åŒº3-promise-æ¯”-settimeout-æ›´å¿«" aria-label="Permalink to â€œâŒ è¯¯åŒº3ï¼šPromise æ¯” setTimeout â€œæ›´å¿«â€â€">â€‹</a></h4><p>â†’ æœ¬è´¨æ˜¯ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§ä¸åŒï¼š<strong>å¾®ä»»åŠ¡ &gt; å®ä»»åŠ¡</strong>ã€‚</p><hr><h3 id="äº”ã€å¦‚ä½•é€‰æ‹©" tabindex="-1">äº”ã€å¦‚ä½•é€‰æ‹©ï¼Ÿ <a class="header-anchor" href="#äº”ã€å¦‚ä½•é€‰æ‹©" aria-label="Permalink to â€œäº”ã€å¦‚ä½•é€‰æ‹©ï¼Ÿâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨è</th></tr></thead><tbody><tr><td>å»¶è¿Ÿæ‰§è¡Œã€å®šæ—¶ä»»åŠ¡</td><td><code>setTimeout</code> / <code>setInterval</code></td></tr><tr><td>ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ç­‰å¼‚æ­¥æ“ä½œ</td><td><code>Promise</code> æˆ– <code>async/await</code></td></tr><tr><td>éœ€è¦ç²¾ç¡®æ§åˆ¶æ‰§è¡Œé¡ºåºï¼ˆå¦‚å…ˆå¤„ç†æ•°æ®å†æ¸²æŸ“ï¼‰</td><td>ç”¨ <code>Promise</code>ï¼ˆå¾®ä»»åŠ¡ä¼˜å…ˆçº§é«˜ï¼‰</td></tr><tr><td>å†™æ¸…æ™°çš„å¼‚æ­¥é€»è¾‘</td><td><strong>ä¼˜å…ˆ <code>async/await</code></strong></td></tr></tbody></table><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-1" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-1" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong><code>setTimeout</code> æ˜¯å®ä»»åŠ¡ï¼Œç”¨äºå»¶è¿Ÿï¼›<code>Promise</code> å’Œ <code>async/await</code> æ˜¯å¾®ä»»åŠ¡ï¼Œç”¨äºé«˜æ•ˆå¤„ç†å¼‚æ­¥æµç¨‹ï¼›å¾®ä»»åŠ¡æ€»æ˜¯åœ¨å®ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚</strong></p></blockquote><h2 id="promise-allå’Œpromise-raceçš„åŒºåˆ«çš„ä½¿ç”¨åœºæ™¯" tabindex="-1">Promise.allå’ŒPromise.raceçš„åŒºåˆ«çš„ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#promise-allå’Œpromise-raceçš„åŒºåˆ«çš„ä½¿ç”¨åœºæ™¯" aria-label="Permalink to â€œPromise.allå’ŒPromise.raceçš„åŒºåˆ«çš„ä½¿ç”¨åœºæ™¯â€">â€‹</a></h2><p><code>Promise.all</code> å’Œ <code>Promise.race</code> éƒ½æ˜¯ç”¨äº<strong>å¹¶è¡Œå¤„ç†å¤šä¸ª Promise</strong> çš„å·¥å…·æ–¹æ³•ï¼Œä½†è¡Œä¸ºå’Œé€‚ç”¨åœºæ™¯æˆªç„¶ä¸åŒã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒåŒºåˆ«" tabindex="-1">ä¸€ã€æ ¸å¿ƒåŒºåˆ« <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒåŒºåˆ«" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒåŒºåˆ«â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>è¡Œä¸º</th><th>æˆåŠŸæ¡ä»¶</th><th>å¤±è´¥æ¡ä»¶</th></tr></thead><tbody><tr><td><strong><code>Promise.all(iterable)</code></strong></td><td>ç­‰å¾…<strong>æ‰€æœ‰</strong> Promise å®Œæˆ</td><td>å…¨éƒ¨ resolved</td><td><strong>ä»»æ„ä¸€ä¸ª rejected</strong>ï¼ˆç«‹å³å¤±è´¥ï¼‰</td></tr><tr><td><strong><code>Promise.race(iterable)</code></strong></td><td>è¿”å›<strong>ç¬¬ä¸€ä¸ªå®Œæˆ</strong>çš„ Promise ç»“æœ</td><td>ç¬¬ä¸€ä¸ª resolved</td><td>ç¬¬ä¸€ä¸ª rejected</td></tr></tbody></table><blockquote><p>âœ… ä¸¤è€…éƒ½æ¥æ”¶å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Promiseã€‚</p></blockquote><hr><h3 id="äºŒã€ä½¿ç”¨åœºæ™¯å¯¹æ¯”" tabindex="-1">äºŒã€ä½¿ç”¨åœºæ™¯å¯¹æ¯” <a class="header-anchor" href="#äºŒã€ä½¿ç”¨åœºæ™¯å¯¹æ¯”" aria-label="Permalink to â€œäºŒã€ä½¿ç”¨åœºæ™¯å¯¹æ¯”â€">â€‹</a></h3><h4 id="âœ…-promise-all-éœ€è¦æ‰€æœ‰ä»»åŠ¡éƒ½æˆåŠŸ" tabindex="-1">âœ… <strong><code>Promise.all</code>ï¼šéœ€è¦æ‰€æœ‰ä»»åŠ¡éƒ½æˆåŠŸ</strong> <a class="header-anchor" href="#âœ…-promise-all-éœ€è¦æ‰€æœ‰ä»»åŠ¡éƒ½æˆåŠŸ" aria-label="Permalink to â€œâœ… Promise.allï¼šéœ€è¦æ‰€æœ‰ä»»åŠ¡éƒ½æˆåŠŸâ€">â€‹</a></h4><p><strong>å…¸å‹åœºæ™¯</strong>ï¼š</p><ul><li><strong>æ‰¹é‡è¯·æ±‚</strong>ï¼šåŒæ—¶è·å–ç”¨æˆ·ä¿¡æ¯ã€è®¢å•åˆ—è¡¨ã€é…ç½®æ•°æ®ï¼Œå…¨éƒ¨åŠ è½½å®Œå†æ¸²æŸ“é¡µé¢ï¼›</li><li><strong>ä¾èµ–å¤šèµ„æºåˆå§‹åŒ–</strong>ï¼šç­‰å¾…å¤šä¸ªæœåŠ¡å¯åŠ¨å®Œæˆï¼›</li><li><strong>äº‹åŠ¡æ€§æ“ä½œ</strong>ï¼šå¤šä¸ªå¼‚æ­¥æ“ä½œå¿…é¡»å…¨éƒ¨æˆåŠŸã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¤ºä¾‹ï¼šå¹¶è¡ŒåŠ è½½å¤šä¸ª API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">orders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">renderPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user, orders, config); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ‰€æœ‰æ•°æ®å°±ç»ªåæ¸²æŸ“</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šä»»ä¸€è¯·æ±‚å¤±è´¥ â†’ æ•´ä½“å¤±è´¥ã€‚è‹¥éœ€â€œéƒ¨åˆ†å¤±è´¥ä»ç»§ç»­â€ï¼Œç”¨ <code>Promise.allSettled()</code>ã€‚</p></blockquote><hr><h4 id="âœ…-promise-race-åªéœ€æœ€å¿«çš„ç»“æœ" tabindex="-1">âœ… <strong><code>Promise.race</code>ï¼šåªéœ€æœ€å¿«çš„ç»“æœ</strong> <a class="header-anchor" href="#âœ…-promise-race-åªéœ€æœ€å¿«çš„ç»“æœ" aria-label="Permalink to â€œâœ… Promise.raceï¼šåªéœ€æœ€å¿«çš„ç»“æœâ€">â€‹</a></h4><p><strong>å…¸å‹åœºæ™¯</strong>ï¼š</p><ul><li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šä¸»è¯·æ±‚ + è¶…æ—¶ Promiseï¼Œè°å…ˆå®Œæˆå°±ç”¨è°ï¼›</li><li><strong>ç«é€Ÿè¯·æ±‚</strong>ï¼šå‘å¤šä¸ª CDN è¯·æ±‚åŒä¸€èµ„æºï¼Œå–æœ€å¿«å“åº”ï¼›</li><li><strong>å–æ¶ˆæœºåˆ¶</strong>ï¼šé€šè¿‡ <code>race</code> å®ç°å¯å–æ¶ˆçš„å¼‚æ­¥æ“ä½œã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¤ºä¾‹ï¼šå¸¦è¶…æ—¶çš„è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Timeout&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)), ms)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">race</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 5ç§’è¶…æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Timeout&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¯·æ±‚è¶…æ—¶&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="ä¸‰ã€å…¶ä»–ç›¸å…³æ–¹æ³•-è¡¥å……" tabindex="-1">ä¸‰ã€å…¶ä»–ç›¸å…³æ–¹æ³•ï¼ˆè¡¥å……ï¼‰ <a class="header-anchor" href="#ä¸‰ã€å…¶ä»–ç›¸å…³æ–¹æ³•-è¡¥å……" aria-label="Permalink to â€œä¸‰ã€å…¶ä»–ç›¸å…³æ–¹æ³•ï¼ˆè¡¥å……ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong><code>Promise.allSettled</code></strong></td><td>ç­‰å¾…æ‰€æœ‰ Promise <strong>æ— è®ºæˆåŠŸ/å¤±è´¥</strong></td><td>éœ€è¦æ‰€æœ‰ç»“æœï¼ˆå¦‚æ‰¹é‡æ“ä½œï¼Œéƒ¨åˆ†å¤±è´¥å¯æ¥å—ï¼‰</td></tr><tr><td><strong><code>Promise.any</code></strong>ï¼ˆES2021ï¼‰</td><td>è¿”å›<strong>ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Promise</strong>ï¼ˆå¿½ç•¥å¤±è´¥ï¼‰</td><td>å¤šä¸ªå¤‡ç”¨æ–¹æ¡ˆï¼Œåªè¦ä¸€ä¸ªæˆåŠŸå³å¯</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Promise.any ç¤ºä¾‹ï¼šå¤šä¸ªé•œåƒæºï¼Œå–ç¬¬ä¸€ä¸ªæˆåŠŸçš„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchFromCDN1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchFromCDN2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchFromCDN3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><hr><h3 id="å››ã€æ€»ç»“é€‰æ‹©æŒ‡å—" tabindex="-1">å››ã€æ€»ç»“é€‰æ‹©æŒ‡å— <a class="header-anchor" href="#å››ã€æ€»ç»“é€‰æ‹©æŒ‡å—" aria-label="Permalink to â€œå››ã€æ€»ç»“é€‰æ‹©æŒ‡å—â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>éœ€æ±‚</th><th>æ¨èæ–¹æ³•</th></tr></thead><tbody><tr><td>æ‰€æœ‰ä»»åŠ¡å¿…é¡»æˆåŠŸ</td><td><code>Promise.all</code></td></tr><tr><td>åªéœ€æœ€å¿«çš„ä¸€ä¸ªç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰</td><td><code>Promise.race</code></td></tr><tr><td>æ‰€æœ‰ä»»åŠ¡éƒ½è¦å®Œæˆï¼ˆä¸ç®¡æˆè´¥ï¼‰</td><td><code>Promise.allSettled</code></td></tr><tr><td>å¤šä¸ªå¤‡é€‰æ–¹æ¡ˆï¼Œåªè¦ä¸€ä¸ªæˆåŠŸ</td><td><code>Promise.any</code></td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>å…³é”®è®°å¿†ç‚¹</strong>ï¼š</p><ul><li><strong><code>all</code> â†’ â€œå…¨éƒ½è¦â€</strong></li><li><strong><code>race</code> â†’ â€œæŠ¢ç¬¬ä¸€â€</strong></li></ul></blockquote><h2 id="æµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶" tabindex="-1">æµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ <a class="header-anchor" href="#æµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶" aria-label="Permalink to â€œæµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶â€">â€‹</a></h2><p>æµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGarbage Collection, GCï¼‰æ˜¯ JavaScript å¼•æ“è‡ªåŠ¨ç®¡ç†å†…å­˜çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå…¶ç›®æ ‡æ˜¯<strong>é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å†…å­˜</strong>ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚ä¸»æµå¼•æ“ï¼ˆå¦‚ V8ï¼‰ä¸»è¦é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒåŸç†-å¯è¾¾æ€§-reachability" tabindex="-1">ä¸€ã€æ ¸å¿ƒåŸç†ï¼šå¯è¾¾æ€§ï¼ˆReachabilityï¼‰ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒåŸç†-å¯è¾¾æ€§-reachability" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒåŸç†ï¼šå¯è¾¾æ€§ï¼ˆReachabilityï¼‰â€">â€‹</a></h3><ul><li><strong>GC è®¤ä¸ºâ€œå¯è¾¾â€çš„å¯¹è±¡ = ä»åœ¨ä½¿ç”¨ â†’ ä¸èƒ½å›æ”¶</strong>ï¼›</li><li><strong>ä¸å¯è¾¾çš„å¯¹è±¡ = æ— å¼•ç”¨ â†’ å¯å®‰å…¨å›æ”¶</strong>ã€‚</li></ul><blockquote><p>âœ… <strong>æ ¹å¯¹è±¡ï¼ˆRootsï¼‰</strong>ï¼šå…¨å±€å¯¹è±¡ï¼ˆ<code>window</code>ï¼‰ã€å½“å‰æ‰§è¡Œæ ˆä¸­çš„å±€éƒ¨å˜é‡ã€é—­åŒ…å¼•ç”¨ç­‰ã€‚</p></blockquote><hr><h3 id="äºŒã€ä¸»è¦åƒåœ¾å›æ”¶ç®—æ³•" tabindex="-1">äºŒã€ä¸»è¦åƒåœ¾å›æ”¶ç®—æ³• <a class="header-anchor" href="#äºŒã€ä¸»è¦åƒåœ¾å›æ”¶ç®—æ³•" aria-label="Permalink to â€œäºŒã€ä¸»è¦åƒåœ¾å›æ”¶ç®—æ³•â€">â€‹</a></h3><h4 id="_1-æ ‡è®°-æ¸…é™¤-mark-and-sweep-ä¸»æµ" tabindex="-1">1. <strong>æ ‡è®°-æ¸…é™¤ï¼ˆMark-and-Sweepï¼‰</strong>ï¼ˆä¸»æµï¼‰ <a class="header-anchor" href="#_1-æ ‡è®°-æ¸…é™¤-mark-and-sweep-ä¸»æµ" aria-label="Permalink to â€œ1. æ ‡è®°-æ¸…é™¤ï¼ˆMark-and-Sweepï¼‰ï¼ˆä¸»æµï¼‰â€">â€‹</a></h4><ul><li><strong>æ­¥éª¤</strong>ï¼š <ol><li><strong>æ ‡è®°</strong>ï¼šä»æ ¹å¯¹è±¡å‡ºå‘ï¼Œéå†æ‰€æœ‰å¯è¾¾å¯¹è±¡å¹¶æ ‡è®°ï¼›</li><li><strong>æ¸…é™¤</strong>ï¼šå›æ”¶æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚</li></ol></li><li><strong>ä¼˜ç‚¹</strong>ï¼šè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ˆå¦‚ <code>objA.ref = objB; objB.ref = objA</code>ï¼‰ï¼›</li><li><strong>ç¼ºç‚¹</strong>ï¼šéœ€æš‚åœç¨‹åºæ‰§è¡Œï¼ˆStop-The-Worldï¼‰ï¼Œå¯èƒ½é€ æˆå¡é¡¿ã€‚</li></ul><h4 id="_2-åˆ†ä»£å›æ”¶-generational-collection-v8-ä¼˜åŒ–" tabindex="-1">2. <strong>åˆ†ä»£å›æ”¶ï¼ˆGenerational Collectionï¼‰</strong>ï¼ˆV8 ä¼˜åŒ–ï¼‰ <a class="header-anchor" href="#_2-åˆ†ä»£å›æ”¶-generational-collection-v8-ä¼˜åŒ–" aria-label="Permalink to â€œ2. åˆ†ä»£å›æ”¶ï¼ˆGenerational Collectionï¼‰ï¼ˆV8 ä¼˜åŒ–ï¼‰â€">â€‹</a></h4><ul><li><strong>å‡è®¾</strong>ï¼šå¤šæ•°å¯¹è±¡â€œæœç”Ÿå¤•æ­»â€ï¼ˆæ–°ç”Ÿä»£ï¼‰ï¼Œå°‘æ•°é•¿æœŸå­˜æ´»ï¼ˆè€ç”Ÿä»£ï¼‰ï¼›</li><li><strong>åˆ†åŒº</strong>ï¼š <ul><li><strong>æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰</strong>ï¼š <ul><li>ä½¿ç”¨ <strong>Scavenge ç®—æ³•</strong>ï¼ˆå¤åˆ¶å­˜æ´»å¯¹è±¡åˆ°å¦ä¸€ç©ºé—´ï¼‰ï¼›</li><li>å›æ”¶é¢‘ç¹ã€é€Ÿåº¦å¿«ã€‚</li></ul></li><li><strong>è€ç”Ÿä»£ï¼ˆOld Generationï¼‰</strong>ï¼š <ul><li>ä½¿ç”¨ <strong>æ ‡è®°-æ¸…é™¤ + æ ‡è®°-æ•´ç†</strong>ï¼ˆå‡å°‘å†…å­˜ç¢ç‰‡ï¼‰ï¼›</li><li>å›æ”¶é¢‘ç‡ä½ã€‚</li></ul></li></ul></li></ul><h4 id="_3-å¼•ç”¨è®¡æ•°-reference-counting-å·²æ·˜æ±°" tabindex="-1">3. <strong>å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰</strong>ï¼ˆå·²æ·˜æ±°ï¼‰ <a class="header-anchor" href="#_3-å¼•ç”¨è®¡æ•°-reference-counting-å·²æ·˜æ±°" aria-label="Permalink to â€œ3. å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ï¼ˆå·²æ·˜æ±°ï¼‰â€">â€‹</a></h4><ul><li>è·Ÿè¸ªæ¯ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°ï¼Œä¸º 0 æ—¶å›æ”¶ï¼›</li><li><strong>è‡´å‘½ç¼ºé™·</strong>ï¼šæ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨ï¼ˆå¦‚ IE æ—©æœŸç‰ˆæœ¬å†…å­˜æ³„æ¼ä¸»å› ï¼‰ã€‚</li></ul><hr><h3 id="ä¸‰ã€å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯-å¼€å‘è€…éœ€è­¦æƒ•" tabindex="-1">ä¸‰ã€å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯ï¼ˆå¼€å‘è€…éœ€è­¦æƒ•ï¼‰ <a class="header-anchor" href="#ä¸‰ã€å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯-å¼€å‘è€…éœ€è­¦æƒ•" aria-label="Permalink to â€œä¸‰ã€å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯ï¼ˆå¼€å‘è€…éœ€è­¦æƒ•ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>æ„å¤–å…¨å±€å˜é‡</strong></td><td><code>var a = 1</code>ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‚è½½åˆ° <code>window</code>ï¼‰</td><td>ç”¨ <code>let/const</code>ï¼Œå¯ç”¨ä¸¥æ ¼æ¨¡å¼</td></tr><tr><td><strong>æœªæ¸…ç†çš„å®šæ—¶å™¨/å›è°ƒ</strong></td><td><code>setInterval</code> æŒç»­å¼•ç”¨é—­åŒ…å˜é‡</td><td>æ‰‹åŠ¨ <code>clearInterval</code></td></tr><tr><td><strong>DOM å¼•ç”¨æœªé‡Šæ”¾</strong></td><td>åˆ é™¤ DOM åä»ä¿ç•™ JS å¼•ç”¨</td><td>åˆ é™¤æ—¶ç½® <code>null</code></td></tr><tr><td><strong>é—­åŒ…æ»¥ç”¨</strong></td><td>å†…éƒ¨å‡½æ•°æŒæœ‰å¤–éƒ¨å¤§å¯¹è±¡</td><td>é¿å…ä¸å¿…è¦çš„é—­åŒ…ï¼ŒåŠæ—¶è§£ç»‘</td></tr><tr><td><strong>ç¼“å­˜æ— ä¸Šé™</strong></td><td>Map/Set æŒç»­å­˜å‚¨æ•°æ®</td><td>ç”¨ <code>WeakMap</code>/<code>WeakSet</code>ï¼ˆå¼±å¼•ç”¨ï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>WeakMap/WeakSet</strong>ï¼š</p><ul><li>é”®æ˜¯å¼±å¼•ç”¨ï¼ˆä¸å½±å“ GCï¼‰ï¼›</li><li>é€‚åˆåšç§æœ‰æ•°æ®å­˜å‚¨æˆ–ç¼“å­˜ã€‚</li></ul></blockquote><hr><h3 id="å››ã€å¼€å‘è€…ä¼˜åŒ–å»ºè®®" tabindex="-1">å››ã€å¼€å‘è€…ä¼˜åŒ–å»ºè®® <a class="header-anchor" href="#å››ã€å¼€å‘è€…ä¼˜åŒ–å»ºè®®" aria-label="Permalink to â€œå››ã€å¼€å‘è€…ä¼˜åŒ–å»ºè®®â€">â€‹</a></h3><ol><li><strong>å‡å°‘å…¨å±€å˜é‡</strong>ï¼›</li><li><strong>åŠæ—¶è§£ç»‘äº‹ä»¶ç›‘å¬å™¨</strong>ï¼ˆ<code>removeEventListener</code>ï¼‰ï¼›</li><li><strong>é¿å…åœ¨é—­åŒ…ä¸­æŒæœ‰å¤§å¯¹è±¡</strong>ï¼›</li><li><strong>ä½¿ç”¨ Chrome DevTools çš„ Memory é¢æ¿</strong>åˆ†æå†…å­˜å¿«ç…§ï¼ˆHeap Snapshotï¼‰ï¼›</li><li><strong>è°¨æ…ä½¿ç”¨ <code>console.log</code></strong>ï¼ˆå¯èƒ½éšå¼æŒæœ‰å¯¹è±¡å¼•ç”¨ï¼‰ã€‚</li></ol><hr><h3 id="äº”ã€ä¸€å¥è¯æ€»ç»“-1" tabindex="-1">äº”ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#äº”ã€ä¸€å¥è¯æ€»ç»“-1" aria-label="Permalink to â€œäº”ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>æµè§ˆå™¨é€šè¿‡â€œæ ‡è®°-æ¸…é™¤ + åˆ†ä»£å›æ”¶â€è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä½†å¼€å‘è€…ä»éœ€é¿å…æ„å¤–æŒæœ‰å¼•ç”¨â€”â€”å› ä¸º GC åªèƒ½å›æ”¶â€œä¸å¯è¾¾â€å¯¹è±¡ã€‚</strong></p></blockquote><h2 id="åŒ¿åå‡½æ•°çš„å…¸å‹åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" tabindex="-1">åŒ¿åå‡½æ•°çš„å…¸å‹åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#åŒ¿åå‡½æ•°çš„å…¸å‹åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" aria-label="Permalink to â€œåŒ¿åå‡½æ•°çš„å…¸å‹åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿâ€">â€‹</a></h2><p>åŒ¿åå‡½æ•°ï¼ˆAnonymous Functionï¼‰æ˜¯æŒ‡<strong>æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°</strong>ï¼Œåœ¨ JavaScript ä¸­éå¸¸å¸¸è§ã€‚å…¶å…¸å‹åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><hr><h3 id="ä¸€ã€ä½œä¸ºå›è°ƒå‡½æ•°-callback" tabindex="-1">ä¸€ã€<strong>ä½œä¸ºå›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰</strong> <a class="header-anchor" href="#ä¸€ã€ä½œä¸ºå›è°ƒå‡½æ•°-callback" aria-label="Permalink to â€œä¸€ã€ä½œä¸ºå›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰â€">â€‹</a></h3><p>æœ€å¸¸è§ç”¨é€”ï¼šä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œåœ¨ç‰¹å®šæ—¶æœºæ‰§è¡Œã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// äº‹ä»¶å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æŒ‰é’®è¢«ç‚¹å‡»&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ•°ç»„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®šæ—¶å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å»¶è¿Ÿæ‰§è¡Œ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼šé€»è¾‘å†…èšï¼Œé¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚</p><hr><h3 id="äºŒã€ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼-iife" tabindex="-1">äºŒã€<strong>ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰</strong> <a class="header-anchor" href="#äºŒã€ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼-iife" aria-label="Permalink to â€œäºŒã€ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰â€">â€‹</a></h3><p>åˆ›å»ºç‹¬ç«‹ä½œç”¨åŸŸï¼Œé¿å…å˜é‡æ±¡æŸ“ï¼ˆES6 å‰å¸¸ç”¨ï¼‰ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> privateVar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ç§æœ‰å˜é‡&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¤–éƒ¨æ— æ³•è®¿é—® privateVar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre></div><blockquote><p>âœ… ç°ä»£æ›¿ä»£ï¼šç”¨ <code>let</code>/<code>const</code> å—çº§ä½œç”¨åŸŸï¼Œä½† IIFE ä»ç”¨äºæ¨¡å—åˆå§‹åŒ–ã€‚</p></blockquote><hr><h3 id="ä¸‰ã€å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é«˜é˜¶å‡½æ•°" tabindex="-1">ä¸‰ã€<strong>å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é«˜é˜¶å‡½æ•°</strong> <a class="header-anchor" href="#ä¸‰ã€å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é«˜é˜¶å‡½æ•°" aria-label="Permalink to â€œä¸‰ã€å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é«˜é˜¶å‡½æ•°â€">â€‹</a></h3><p>ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>map</code>ã€<code>filter</code>ã€<code>reduce</code> ç­‰ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> adults</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> names</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.name);</span></span></code></pre></div><blockquote><p>ğŸ’¡ ç®­å¤´å‡½æ•°æ˜¯åŒ¿åå‡½æ•°çš„ç®€æ´å†™æ³•ï¼Œå¹¿æ³›ç”¨äºæ­¤ç±»åœºæ™¯ã€‚</p></blockquote><hr><h3 id="å››ã€åŠ¨æ€ç”Ÿæˆå‡½æ•°" tabindex="-1">å››ã€<strong>åŠ¨æ€ç”Ÿæˆå‡½æ•°</strong> <a class="header-anchor" href="#å››ã€åŠ¨æ€ç”Ÿæˆå‡½æ•°" aria-label="Permalink to â€œå››ã€åŠ¨æ€ç”Ÿæˆå‡½æ•°â€">â€‹</a></h3><p>æ ¹æ®æ¡ä»¶æˆ–æ•°æ®åˆ›å»ºä¸åŒè¡Œä¸ºçš„å‡½æ•°ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createValidator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rule.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿”å›åŒ¿åå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> emailValidator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createValidator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><h3 id="äº”ã€æ¨¡æ‹Ÿç§æœ‰æˆå‘˜-æ¨¡å—æ¨¡å¼" tabindex="-1">äº”ã€<strong>æ¨¡æ‹Ÿç§æœ‰æˆå‘˜ï¼ˆæ¨¡å—æ¨¡å¼ï¼‰</strong> <a class="header-anchor" href="#äº”ã€æ¨¡æ‹Ÿç§æœ‰æˆå‘˜-æ¨¡å—æ¨¡å¼" aria-label="Permalink to â€œäº”ã€æ¨¡æ‹Ÿç§æœ‰æˆå‘˜ï¼ˆæ¨¡å—æ¨¡å¼ï¼‰â€">â€‹</a></h3><p>ç»“åˆé—­åŒ…å®ç°æ•°æ®å°è£…ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    increment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre></div><hr><h3 id="å…­ã€ç®€åŒ–ä»£ç ç»“æ„" tabindex="-1">å…­ã€<strong>ç®€åŒ–ä»£ç ç»“æ„</strong> <a class="header-anchor" href="#å…­ã€ç®€åŒ–ä»£ç ç»“æ„" aria-label="Permalink to â€œå…­ã€ç®€åŒ–ä»£ç ç»“æ„â€">â€‹</a></h3><p>é¿å…ä¸ºä¸€æ¬¡æ€§é€»è¾‘å‘½åã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸å¿…è¦å‘½å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(handleSuccess);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›´æ¥åŒ¿å</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><hr><h3 id="âš ï¸-æ³¨æ„äº‹é¡¹" tabindex="-1">âš ï¸ æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹" aria-label="Permalink to â€œâš ï¸ æ³¨æ„äº‹é¡¹â€">â€‹</a></h3><ul><li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šåŒ¿åå‡½æ•°åœ¨è°ƒç”¨æ ˆä¸­æ˜¾ç¤ºä¸º <code>anonymous</code>ï¼Œå¯æ”¹ç”¨<strong>å‘½åå‡½æ•°è¡¨è¾¾å¼</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æœ‰åå­—ï¼Œä¾¿äºè°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tick&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li><li><strong>é€’å½’é™åˆ¶</strong>ï¼šåŒ¿åå‡½æ•°æ— æ³•ç›´æ¥è°ƒç”¨è‡ªèº«ï¼ˆéœ€ç”¨ <code>arguments.callee</code>ï¼Œä½†å·²åºŸå¼ƒï¼‰ã€‚</li></ul><hr><h3 id="ä¸€å¥è¯æ€»ç»“-4" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-4" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong>åŒ¿åå‡½æ•°é€‚ç”¨äºâ€œä¸€æ¬¡æ€§ä½¿ç”¨ã€é€»è¾‘ç®€å•ã€ä½œä¸ºå‚æ•°ä¼ é€’â€çš„åœºæ™¯ï¼Œæ ¸å¿ƒä»·å€¼æ˜¯æå‡ä»£ç ç®€æ´æ€§ä¸ä½œç”¨åŸŸéš”ç¦»ã€‚</strong></p></blockquote><h2 id="æŸ¯é‡ŒåŒ–å‡½æ•°-curry-function-ä¾‹å­-å®ƒæœ‰å“ªäº›å¥½å¤„" tabindex="-1">æŸ¯é‡ŒåŒ–å‡½æ•°ï¼ˆcurry functionï¼‰ä¾‹å­ï¼Ÿå®ƒæœ‰å“ªäº›å¥½å¤„ï¼Ÿ <a class="header-anchor" href="#æŸ¯é‡ŒåŒ–å‡½æ•°-curry-function-ä¾‹å­-å®ƒæœ‰å“ªäº›å¥½å¤„" aria-label="Permalink to â€œæŸ¯é‡ŒåŒ–å‡½æ•°ï¼ˆcurry functionï¼‰ä¾‹å­ï¼Ÿå®ƒæœ‰å“ªäº›å¥½å¤„ï¼Ÿâ€">â€‹</a></h2><h3 id="æŸ¯é‡ŒåŒ–-currying-â€”â€”-å°†å¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•°" tabindex="-1">æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰â€”â€” å°†å¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•° <a class="header-anchor" href="#æŸ¯é‡ŒåŒ–-currying-â€”â€”-å°†å¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•°" aria-label="Permalink to â€œæŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰â€”â€” å°†å¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•°â€">â€‹</a></h3><hr><h3 id="ä¸€ã€åŸºæœ¬æ¦‚å¿µ" tabindex="-1">ä¸€ã€åŸºæœ¬æ¦‚å¿µ <a class="header-anchor" href="#ä¸€ã€åŸºæœ¬æ¦‚å¿µ" aria-label="Permalink to â€œä¸€ã€åŸºæœ¬æ¦‚å¿µâ€">â€‹</a></h3><p><strong>æŸ¯é‡ŒåŒ–</strong>ï¼šæŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œè½¬æ¢æˆ<strong>æ¯æ¬¡åªæ¥å—ä¸€ä¸ªå‚æ•°</strong>å¹¶è¿”å›æ–°å‡½æ•°çš„å‡½æ•°ï¼Œç›´åˆ°æ”¶é›†å®Œæ‰€æœ‰å‚æ•°åæ‰§è¡ŒåŸå‡½æ•°ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ™®é€šå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¯é‡ŒåŒ–å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> curriedAdd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(add);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curriedAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 6</span></span></code></pre></div><hr><h3 id="äºŒã€æ‰‹åŠ¨å®ç°æŸ¯é‡ŒåŒ–å‡½æ•°" tabindex="-1">äºŒã€æ‰‹åŠ¨å®ç°æŸ¯é‡ŒåŒ–å‡½æ•° <a class="header-anchor" href="#äºŒã€æ‰‹åŠ¨å®ç°æŸ¯é‡ŒåŒ–å‡½æ•°" aria-label="Permalink to â€œäºŒã€æ‰‹åŠ¨å®ç°æŸ¯é‡ŒåŒ–å‡½æ•°â€">â€‹</a></h3><h4 id="åŸºç¡€ç‰ˆ-å›ºå®šå‚æ•°ä¸ªæ•°" tabindex="-1">åŸºç¡€ç‰ˆï¼ˆå›ºå®šå‚æ•°ä¸ªæ•°ï¼‰ï¼š <a class="header-anchor" href="#åŸºç¡€ç‰ˆ-å›ºå®šå‚æ•°ä¸ªæ•°" aria-label="Permalink to â€œåŸºç¡€ç‰ˆï¼ˆå›ºå®šå‚æ•°ä¸ªæ•°ï¼‰ï¼šâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curried</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (args.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fn.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">nextArgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> curried.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nextArgs));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ï¼š <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to â€œä½¿ç”¨ç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multiply</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> curriedMultiply</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(multiply);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curriedMultiply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 24</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curriedMultiply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 24</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curriedMultiply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 24</span></span></code></pre></div><blockquote><p>âœ… æ”¯æŒ<strong>åˆ†æ‰¹ä¼ å‚</strong>ï¼ˆçµæ´»è°ƒç”¨ï¼‰</p></blockquote><hr><h3 id="ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1">ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯" aria-label="Permalink to â€œä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯â€">â€‹</a></h3><h4 id="_1-åˆ›å»ºä¸“ç”¨å‡½æ•°-é¢„ç½®å‚æ•°" tabindex="-1">1. <strong>åˆ›å»ºä¸“ç”¨å‡½æ•°ï¼ˆé¢„ç½®å‚æ•°ï¼‰</strong> <a class="header-anchor" href="#_1-åˆ›å»ºä¸“ç”¨å‡½æ•°-é¢„ç½®å‚æ•°" aria-label="Permalink to â€œ1. åˆ›å»ºä¸“ç”¨å‡½æ•°ï¼ˆé¢„ç½®å‚æ•°ï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šç”¨æ—¥å¿—å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`[\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">level</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}] \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">message</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¯é‡ŒåŒ–åç”Ÿæˆä¸“ç”¨å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> curriedLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(log);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> errorLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curriedLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ERROR&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> infoLog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curriedLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INFO&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">errorLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ•°æ®åº“è¿æ¥å¤±è´¥&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [ERROR] æ•°æ®åº“è¿æ¥å¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">infoLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç”¨æˆ·ç™»å½•æˆåŠŸ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [INFO] ç”¨æˆ·ç™»å½•æˆåŠŸ</span></span></code></pre></div><h4 id="_2-äº‹ä»¶å¤„ç†ä¸­çš„å‚æ•°å¤ç”¨" tabindex="-1">2. <strong>äº‹ä»¶å¤„ç†ä¸­çš„å‚æ•°å¤ç”¨</strong> <a class="header-anchor" href="#_2-äº‹ä»¶å¤„ç†ä¸­çš„å‚æ•°å¤ç”¨" aria-label="Permalink to â€œ2. äº‹ä»¶å¤„ç†ä¸­çš„å‚æ•°å¤ç”¨â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šç”¨äº‹ä»¶å¤„ç†å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleAction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} item \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¯é‡ŒåŒ–åç»‘å®šéƒ¨åˆ†å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deleteHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> curry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(handleAction)(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DELETE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, deleteHandler);</span></span></code></pre></div><h4 id="_3-å‡½æ•°å¼ç¼–ç¨‹ç»„åˆ-å¦‚-redux-ä¸­é—´ä»¶" tabindex="-1">3. <strong>å‡½æ•°å¼ç¼–ç¨‹ç»„åˆï¼ˆå¦‚ Redux ä¸­é—´ä»¶ï¼‰</strong> <a class="header-anchor" href="#_3-å‡½æ•°å¼ç¼–ç¨‹ç»„åˆ-å¦‚-redux-ä¸­é—´ä»¶" aria-label="Permalink to â€œ3. å‡½æ•°å¼ç¼–ç¨‹ç»„åˆï¼ˆå¦‚ Redux ä¸­é—´ä»¶ï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> applyMiddleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">middlewares</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> createStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dispatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> middlewareAPI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getState: store.getState, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args) };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> middlewares.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">middleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(middlewareAPI));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dispatch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> compose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chain)(store.dispatch); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¯é‡ŒåŒ–æ€æƒ³çš„åº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">store, dispatch };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h3 id="å››ã€æ ¸å¿ƒä¼˜åŠ¿" tabindex="-1">å››ã€æ ¸å¿ƒä¼˜åŠ¿ <a class="header-anchor" href="#å››ã€æ ¸å¿ƒä¼˜åŠ¿" aria-label="Permalink to â€œå››ã€æ ¸å¿ƒä¼˜åŠ¿â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å‚æ•°å¤ç”¨</strong></td><td>é¢„ç½®å¸¸ç”¨å‚æ•°ï¼Œé¿å…é‡å¤ä¼ å‚</td></tr><tr><td><strong>å»¶è¿Ÿæ‰§è¡Œ</strong></td><td>åˆ†æ­¥æ”¶é›†å‚æ•°ï¼Œæœ€åç»Ÿä¸€æ‰§è¡Œ</td></tr><tr><td><strong>æé«˜å¯è¯»æ€§</strong></td><td>ä¸“ç”¨å‡½æ•°è¯­ä¹‰æ›´æ¸…æ™°ï¼ˆå¦‚ <code>errorLog</code>ï¼‰</td></tr><tr><td><strong>å‡½æ•°ç»„åˆ</strong></td><td>æ˜“äºä¸å…¶ä»–é«˜é˜¶å‡½æ•°ï¼ˆå¦‚ <code>compose</code>ï¼‰ç»“åˆ</td></tr><tr><td><strong>é…ç½®çµæ´»æ€§</strong></td><td>æ”¯æŒåŠ¨æ€æ„å»ºè¡Œä¸ºï¼ˆå¦‚ä¸­é—´ä»¶é“¾ï¼‰</td></tr></tbody></table><hr><h3 id="äº”ã€ä¸åå‡½æ•°-partial-application-çš„åŒºåˆ«" tabindex="-1">äº”ã€ä¸åå‡½æ•°ï¼ˆPartial Applicationï¼‰çš„åŒºåˆ« <a class="header-anchor" href="#äº”ã€ä¸åå‡½æ•°-partial-application-çš„åŒºåˆ«" aria-label="Permalink to â€œäº”ã€ä¸åå‡½æ•°ï¼ˆPartial Applicationï¼‰çš„åŒºåˆ«â€">â€‹</a></h3><ul><li><strong>æŸ¯é‡ŒåŒ–</strong>ï¼š<strong>å¼ºåˆ¶å•å‚æ•°</strong>ï¼Œè¿”å›åµŒå¥—å‡½æ•°é“¾ï¼›</li><li><strong>åå‡½æ•°</strong>ï¼š<strong>å›ºå®šéƒ¨åˆ†å‚æ•°</strong>ï¼Œè¿”å›æ¥å—å‰©ä½™å‚æ•°çš„å‡½æ•°ï¼ˆä¸è¦æ±‚å•å‚ï¼‰ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åå‡½æ•°ç¤ºä¾‹ï¼ˆä½¿ç”¨ bindï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> add5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// add5(3) â†’ 8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¯é‡ŒåŒ–ï¼šadd(5)(3) â†’ 8</span></span></code></pre></div><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-2" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-2" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>æŸ¯é‡ŒåŒ–é€šè¿‡â€œåˆ†æ­¥ä¼ å‚â€å®ç°å‚æ•°å¤ç”¨å’Œé€»è¾‘æŠ½è±¡ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­æå‡ä»£ç å¤ç”¨æ€§ä¸è¡¨è¾¾åŠ›çš„é‡è¦æŠ€æœ¯ã€‚</strong></p></blockquote><h2 id="ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯-è°ƒç”¨å †æ ˆå’Œä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1">ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿè°ƒç”¨å †æ ˆå’Œä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯-è°ƒç”¨å †æ ˆå’Œä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«" aria-label="Permalink to â€œä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿè°ƒç”¨å †æ ˆå’Œä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€">â€‹</a></h2><h3 id="äº‹ä»¶å¾ªç¯-event-loop-â€”â€”-javascript-å¼‚æ­¥æ‰§è¡Œçš„æ ¸å¿ƒæœºåˆ¶" tabindex="-1">äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰â€”â€” JavaScript å¼‚æ­¥æ‰§è¡Œçš„æ ¸å¿ƒæœºåˆ¶ <a class="header-anchor" href="#äº‹ä»¶å¾ªç¯-event-loop-â€”â€”-javascript-å¼‚æ­¥æ‰§è¡Œçš„æ ¸å¿ƒæœºåˆ¶" aria-label="Permalink to â€œäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰â€”â€” JavaScript å¼‚æ­¥æ‰§è¡Œçš„æ ¸å¿ƒæœºåˆ¶â€">â€‹</a></h3><p>JavaScript æ˜¯<strong>å•çº¿ç¨‹è¯­è¨€</strong>ï¼Œä½†é€šè¿‡ <strong>äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</strong> å®ç°äº†å¼‚æ­¥éé˜»å¡æ“ä½œã€‚å®ƒåè°ƒ <strong>è°ƒç”¨å †æ ˆï¼ˆCall Stackï¼‰</strong>ã€<strong>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰</strong> å’Œ <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰</strong> çš„æ‰§è¡Œé¡ºåºã€‚</p><hr><h2 id="ä¸€ã€æ ¸å¿ƒç»„ä»¶è§£æ" tabindex="-1">ä¸€ã€æ ¸å¿ƒç»„ä»¶è§£æ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒç»„ä»¶è§£æ" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒç»„ä»¶è§£æâ€">â€‹</a></h2><h3 id="_1-è°ƒç”¨å †æ ˆ-call-stack" tabindex="-1">1. <strong>è°ƒç”¨å †æ ˆï¼ˆCall Stackï¼‰</strong> <a class="header-anchor" href="#_1-è°ƒç”¨å †æ ˆ-call-stack" aria-label="Permalink to â€œ1. è°ƒç”¨å †æ ˆï¼ˆCall Stackï¼‰â€">â€‹</a></h3><ul><li><strong>ä½œç”¨</strong>ï¼šè®°å½•å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°è°ƒç”¨ï¼ˆåè¿›å…ˆå‡ºï¼ŒLIFOï¼‰ï¼›</li><li><strong>ç‰¹ç‚¹</strong>ï¼š <ul><li>åŒæ­¥ä»£ç ç›´æ¥å‹å…¥å †æ ˆæ‰§è¡Œï¼›</li><li>å‡½æ•°æ‰§è¡Œå®Œæ¯•åå‡ºæ ˆï¼›</li><li>è‹¥å †æ ˆæº¢å‡ºï¼ˆå¦‚æ— é™é€’å½’ï¼‰ï¼ŒæŠ›å‡º <code>RangeError</code>ã€‚</li></ul></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å †æ ˆï¼ša â†’ b â†’ c â†’ æ‰§è¡Œå®Œæ¯•ä¾æ¬¡å¼¹å‡º</span></span></code></pre></div><hr><h3 id="_2-ä»»åŠ¡é˜Ÿåˆ—-task-queue-macro-task-queue" tabindex="-1">2. <strong>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queue / Macro Task Queueï¼‰</strong> <a class="header-anchor" href="#_2-ä»»åŠ¡é˜Ÿåˆ—-task-queue-macro-task-queue" aria-label="Permalink to â€œ2. ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queue / Macro Task Queueï¼‰â€">â€‹</a></h3><ul><li><strong>å­˜æ”¾å†…å®¹</strong>ï¼šå®ä»»åŠ¡ï¼ˆMacro Tasksï¼‰ï¼Œå¦‚ï¼š <ul><li><code>setTimeout</code> / <code>setInterval</code></li><li>I/O æ“ä½œï¼ˆå¦‚ AJAX å›è°ƒï¼‰</li><li>UI æ¸²æŸ“äº‹ä»¶</li><li><code>setImmediate</code>ï¼ˆNode.jsï¼‰</li></ul></li><li><strong>æ‰§è¡Œè§„åˆ™</strong>ï¼š <ul><li>æ¯æ¬¡äº‹ä»¶å¾ªç¯<strong>åªå¤„ç†ä¸€ä¸ªå®ä»»åŠ¡</strong>ï¼›</li><li>å®ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œæ¸…ç©º<strong>æ‰€æœ‰å¾®ä»»åŠ¡</strong>ï¼Œå†è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚</li></ul></li></ul><hr><h3 id="_3-å¾®ä»»åŠ¡é˜Ÿåˆ—-microtask-queue" tabindex="-1">3. <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰</strong> <a class="header-anchor" href="#_3-å¾®ä»»åŠ¡é˜Ÿåˆ—-microtask-queue" aria-label="Permalink to â€œ3. å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰â€">â€‹</a></h3><ul><li><strong>å­˜æ”¾å†…å®¹</strong>ï¼šå¾®ä»»åŠ¡ï¼ˆMicro Tasksï¼‰ï¼Œå¦‚ï¼š <ul><li><code>Promise.then/catch/finally</code></li><li><code>queueMicrotask()</code></li><li><code>MutationObserver</code>ï¼ˆDOM å˜åŒ–ç›‘å¬ï¼‰</li><li><code>async/await</code>ï¼ˆåº•å±‚åŸºäº Promiseï¼‰</li></ul></li><li><strong>æ‰§è¡Œè§„åˆ™</strong>ï¼š <ul><li><strong>åœ¨å½“å‰å®ä»»åŠ¡ç»“æŸåã€ä¸‹ä¸€ä¸ªå®ä»»åŠ¡å¼€å§‹å‰</strong>ï¼Œä¸€æ¬¡æ€§æ¸…ç©ºæ•´ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li><li>å¾®ä»»åŠ¡ä¸­æ–°å¢çš„å¾®ä»»åŠ¡ä¹Ÿä¼šè¢«ç«‹å³æ‰§è¡Œï¼ˆç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼‰ã€‚</li></ul></li></ul><hr><h2 id="äºŒã€äº‹ä»¶å¾ªç¯å·¥ä½œæµç¨‹" tabindex="-1">äºŒã€äº‹ä»¶å¾ªç¯å·¥ä½œæµç¨‹ <a class="header-anchor" href="#äºŒã€äº‹ä»¶å¾ªç¯å·¥ä½œæµç¨‹" aria-label="Permalink to â€œäºŒã€äº‹ä»¶å¾ªç¯å·¥ä½œæµç¨‹â€">â€‹</a></h2><div class="language-mermaid"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[å¼€å§‹] --&gt; B{è°ƒç”¨å †æ ˆæ˜¯å¦ä¸ºç©ºï¼Ÿ}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B -- å¦ --&gt; B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B -- æ˜¯ --&gt; C[æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; D{å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Ÿ}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D -- å¦ --&gt; C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D -- æ˜¯ --&gt; E[æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; F{è¿˜æœ‰å®ä»»åŠ¡ï¼Ÿ}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F -- æ˜¯ --&gt; B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F -- å¦ --&gt; G[ç»“æŸ]</span></span></code></pre></div><blockquote><p>âœ… <strong>å…³é”®é¡ºåº</strong>ï¼š<br><strong>åŒæ­¥ä»£ç  â†’ å¾®ä»»åŠ¡ â†’ å®ä»»åŠ¡ â†’ å¾®ä»»åŠ¡ â†’ å®ä»»åŠ¡...</strong></p></blockquote><hr><h2 id="ä¸‰ã€ç»å…¸æ‰§è¡Œé¡ºåºç¤ºä¾‹" tabindex="-1">ä¸‰ã€ç»å…¸æ‰§è¡Œé¡ºåºç¤ºä¾‹ <a class="header-anchor" href="#ä¸‰ã€ç»å…¸æ‰§è¡Œé¡ºåºç¤ºä¾‹" aria-label="Permalink to â€œä¸‰ã€ç»å…¸æ‰§è¡Œé¡ºåºç¤ºä¾‹â€">â€‹</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®ä»»åŠ¡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¾®ä»»åŠ¡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¾®ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;5&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>è¾“å‡ºé¡ºåº</strong>ï¼š<br><code>1 â†’ 5 â†’ 3 â†’ 4 â†’ 2</code></p><h4 id="è§£æ" tabindex="-1">è§£æï¼š <a class="header-anchor" href="#è§£æ" aria-label="Permalink to â€œè§£æï¼šâ€">â€‹</a></h4><ol><li>åŒæ­¥ä»£ç æ‰§è¡Œï¼š<code>1</code>, <code>5</code>ï¼›</li><li>å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼š<code>3</code>, <code>4</code>ï¼›</li><li>ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ï¼šæ‰§è¡Œå®ä»»åŠ¡ <code>2</code>ã€‚</li></ol><hr><h2 id="å››ã€è°ƒç”¨å †æ ˆ-vs-ä»»åŠ¡é˜Ÿåˆ—" tabindex="-1">å››ã€è°ƒç”¨å †æ ˆ vs ä»»åŠ¡é˜Ÿåˆ— <a class="header-anchor" href="#å››ã€è°ƒç”¨å †æ ˆ-vs-ä»»åŠ¡é˜Ÿåˆ—" aria-label="Permalink to â€œå››ã€è°ƒç”¨å †æ ˆ vs ä»»åŠ¡é˜Ÿåˆ—â€">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>è°ƒç”¨å †æ ˆï¼ˆCall Stackï¼‰</th><th>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰</th></tr></thead><tbody><tr><td><strong>ç±»å‹</strong></td><td>æ•°æ®ç»“æ„ï¼ˆæ ˆï¼‰</td><td>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆFIFOï¼‰</td></tr><tr><td><strong>å†…å®¹</strong></td><td>å½“å‰æ‰§è¡Œçš„å‡½æ•°å¸§</td><td>å¼‚æ­¥å›è°ƒå‡½æ•°</td></tr><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>ç«‹å³åŒæ­¥æ‰§è¡Œ</td><td>äº‹ä»¶å¾ªç¯è°ƒåº¦åæ‰§è¡Œ</td></tr><tr><td><strong>ä¸ä¸»çº¿ç¨‹å…³ç³»</strong></td><td>ä¸»çº¿ç¨‹ç›´æ¥æ“ä½œ</td><td>ç”±äº‹ä»¶å¾ªç¯æ¨å…¥è°ƒç”¨å †æ ˆ</td></tr><tr><td><strong>é”™è¯¯å½±å“</strong></td><td>å †æ ˆæº¢å‡º â†’ ç¨‹åºå´©æºƒ</td><td>é˜Ÿåˆ—ç§¯å‹ â†’ æ€§èƒ½ä¸‹é™</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>æ¯”å–»</strong>ï¼š</p><ul><li><strong>è°ƒç”¨å †æ ˆ</strong> = å¨å¸ˆå½“å‰æ­£åœ¨åšçš„èœï¼›</li><li><strong>ä»»åŠ¡é˜Ÿåˆ—</strong> = å®¢äººç‚¹çš„èœå•ï¼ˆç­‰å¾…å¨å¸ˆç©ºé—²æ—¶å¤„ç†ï¼‰ï¼›</li><li><strong>äº‹ä»¶å¾ªç¯</strong> = é¤å…ç»ç†ï¼Œå†³å®šå…ˆåšå“ªé“èœã€‚</li></ul></blockquote><hr><h2 id="äº”ã€ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯" tabindex="-1">äº”ã€ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯ï¼Ÿ <a class="header-anchor" href="#äº”ã€ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯" aria-label="Permalink to â€œäº”ã€ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯ï¼Ÿâ€">â€‹</a></h2><ul><li><strong>å•çº¿ç¨‹é™åˆ¶</strong>ï¼šJS ä¸èƒ½å¤šçº¿ç¨‹ï¼Œéœ€é¿å… I/O é˜»å¡ï¼›</li><li><strong>éé˜»å¡ I/O</strong>ï¼šé€šè¿‡å›è°ƒå°†è€—æ—¶æ“ä½œäº¤ç»™å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨/Nodeï¼‰ï¼Œå®Œæˆåæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼›</li><li><strong>å“åº”å¼ UI</strong>ï¼šç¡®ä¿ç”¨æˆ·äº¤äº’ï¼ˆå¦‚ç‚¹å‡»ï¼‰èƒ½åŠæ—¶å¤„ç†ã€‚</li></ul><hr><h3 id="ä¸€å¥è¯æ€»ç»“-5" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-5" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong>äº‹ä»¶å¾ªç¯æ˜¯ JavaScript çš„â€œè°ƒåº¦å™¨â€ï¼šå®ƒè®©å•çº¿ç¨‹é€šè¿‡â€œè°ƒç”¨å †æ ˆæ‰§è¡ŒåŒæ­¥ä»£ç  + ä»»åŠ¡é˜Ÿåˆ—å¤„ç†å¼‚æ­¥å›è°ƒâ€çš„åä½œï¼Œå®ç°é«˜æ•ˆéé˜»å¡è¿è¡Œã€‚</strong></p></blockquote><h2 id="js-è®¾è®¡æ¨¡å¼æœ‰å“ªäº›" tabindex="-1">JS è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ <a class="header-anchor" href="#js-è®¾è®¡æ¨¡å¼æœ‰å“ªäº›" aria-label="Permalink to â€œJS è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿâ€">â€‹</a></h2><p>JavaScript ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æºäºç»å…¸é¢å‘å¯¹è±¡è®¾è®¡æ€æƒ³ï¼Œä½†ç»“åˆäº† JS çš„<strong>åŸå‹ç»§æ‰¿ã€å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ã€é—­åŒ…</strong>ç­‰ç‰¹æ€§è¿›è¡Œäº†é€‚é…ã€‚ä»¥ä¸‹æ˜¯ <strong>9 ç§æœ€å¸¸ç”¨ä¸”å®ç”¨çš„ JS è®¾è®¡æ¨¡å¼</strong>ï¼š</p><hr><h3 id="ä¸€ã€åˆ›å»ºå‹æ¨¡å¼-creational" tabindex="-1">ä¸€ã€åˆ›å»ºå‹æ¨¡å¼ï¼ˆCreationalï¼‰ <a class="header-anchor" href="#ä¸€ã€åˆ›å»ºå‹æ¨¡å¼-creational" aria-label="Permalink to â€œä¸€ã€åˆ›å»ºå‹æ¨¡å¼ï¼ˆCreationalï¼‰â€">â€‹</a></h3><h4 id="_1-å·¥å‚æ¨¡å¼-factory" tabindex="-1">1. <strong>å·¥å‚æ¨¡å¼ï¼ˆFactoryï¼‰</strong> <a class="header-anchor" href="#_1-å·¥å‚æ¨¡å¼-factory" aria-label="Permalink to â€œ1. å·¥å‚æ¨¡å¼ï¼ˆFactoryï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šå°è£…å¯¹è±¡åˆ›å»ºé€»è¾‘ï¼Œé¿å… <code>new</code> æš´éœ²ç»†èŠ‚ã€‚</li><li><strong>JS ç‰¹è‰²</strong>ï¼šåˆ©ç”¨å‡½æ•°åŠ¨æ€è¿”å›ä¸åŒå¯¹è±¡ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;car&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vroom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bike&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pedal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;clank&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-æ„é€ å™¨æ¨¡å¼-constructor" tabindex="-1">2. <strong>æ„é€ å™¨æ¨¡å¼ï¼ˆConstructorï¼‰</strong> <a class="header-anchor" href="#_2-æ„é€ å™¨æ¨¡å¼-constructor" aria-label="Permalink to â€œ2. æ„é€ å™¨æ¨¡å¼ï¼ˆConstructorï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šé€šè¿‡ <code>new</code> åˆ›å»ºå®ä¾‹ï¼ˆES5 å¸¸ç”¨ï¼‰ã€‚</li><li><strong>ç°ä»£æ›¿ä»£</strong>ï¼š<code>class</code> è¯­æ³•ç³–ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name; }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sayHi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`Hi, \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; };</span></span></code></pre></div><h4 id="_3-å•ä¾‹æ¨¡å¼-singleton" tabindex="-1">3. <strong>å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰</strong> <a class="header-anchor" href="#_3-å•ä¾‹æ¨¡å¼-singleton" aria-label="Permalink to â€œ3. å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šç¡®ä¿å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå¦‚é…ç½®ç®¡ç†ã€å¼¹çª—ï¼‰ã€‚</li><li><strong>JS å®ç°</strong>ï¼šåˆ©ç”¨æ¨¡å—ä½œç”¨åŸŸæˆ–é—­åŒ…ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Singleton</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance) instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { data: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;unique&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre></div><blockquote><p>âœ… <strong>ç°ä»£å†™æ³•</strong>ï¼šç›´æ¥å¯¼å‡ºå¯¹è±¡ï¼ˆES6 æ¨¡å—å¤©ç„¶å•ä¾‹ï¼‰ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { api: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre></div></blockquote><hr><h3 id="äºŒã€ç»“æ„å‹æ¨¡å¼-structural" tabindex="-1">äºŒã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructuralï¼‰ <a class="header-anchor" href="#äºŒã€ç»“æ„å‹æ¨¡å¼-structural" aria-label="Permalink to â€œäºŒã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructuralï¼‰â€">â€‹</a></h3><h4 id="_4-è£…é¥°å™¨æ¨¡å¼-decorator" tabindex="-1">4. <strong>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰</strong> <a class="header-anchor" href="#_4-è£…é¥°å™¨æ¨¡å¼-decorator" aria-label="Permalink to â€œ4. è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼ˆä¸ä¿®æ”¹åŸå¯¹è±¡ï¼‰ã€‚</li><li><strong>JS åº”ç”¨</strong>ï¼š <ul><li>é«˜é˜¶å‡½æ•°ï¼ˆå¦‚æ—¥å¿—ã€æƒé™æ ¡éªŒï¼‰ï¼›</li><li>ES2022 è£…é¥°å™¨ææ¡ˆï¼ˆå®éªŒæ€§ï¼‰ã€‚</li></ul></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">descriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> original</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> descriptor.value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  descriptor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Calling &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot; with\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> original.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_5-å¤–è§‚æ¨¡å¼-facade" tabindex="-1">5. <strong>å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰</strong> <a class="header-anchor" href="#_5-å¤–è§‚æ¨¡å¼-facade" aria-label="Permalink to â€œ5. å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šæä¾›ç»Ÿä¸€ç®€åŒ–æ¥å£ï¼Œéšè—å¤æ‚å­ç³»ç»Ÿã€‚</li><li><strong>å…¸å‹åœºæ™¯</strong>ï¼šç¬¬ä¸‰æ–¹åº“å°è£…ï¼ˆå¦‚ Axios å°è£… Fetch APIï¼‰ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç®€åŒ– DOM æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DOMFacade</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  addClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">className</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { el.classList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(className); },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event, handler); }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h3 id="ä¸‰ã€è¡Œä¸ºå‹æ¨¡å¼-behavioral" tabindex="-1">ä¸‰ã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioralï¼‰ <a class="header-anchor" href="#ä¸‰ã€è¡Œä¸ºå‹æ¨¡å¼-behavioral" aria-label="Permalink to â€œä¸‰ã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioralï¼‰â€">â€‹</a></h3><h4 id="_6-è§‚å¯Ÿè€…æ¨¡å¼-observer-å‘å¸ƒ-è®¢é˜…æ¨¡å¼" tabindex="-1">6. <strong>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ / å‘å¸ƒ-è®¢é˜…æ¨¡å¼</strong> <a class="header-anchor" href="#_6-è§‚å¯Ÿè€…æ¨¡å¼-observer-å‘å¸ƒ-è®¢é˜…æ¨¡å¼" aria-label="Permalink to â€œ6. è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ / å‘å¸ƒ-è®¢é˜…æ¨¡å¼â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šå¯¹è±¡é—´ä¸€å¯¹å¤šä¾èµ–ï¼ŒçŠ¶æ€å˜åŒ–è‡ªåŠ¨é€šçŸ¥ã€‚</li><li><strong>JS å®ç°</strong>ï¼š <ul><li>æµè§ˆå™¨äº‹ä»¶ç³»ç»Ÿï¼ˆ<code>addEventListener</code>ï¼‰ï¼›</li><li>è‡ªå®šä¹‰äº‹ä»¶æ€»çº¿ã€‚</li></ul></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.events </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}; }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.events[event] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.events[event] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cb); }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.events[event] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data)); }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>ğŸ’¡ <strong>ä¸å‘å¸ƒ-è®¢é˜…åŒºåˆ«</strong>ï¼š</p><ul><li>è§‚å¯Ÿè€…ï¼šç›®æ ‡ç›´æ¥æŒæœ‰è§‚å¯Ÿè€…å¼•ç”¨ï¼›</li><li>å‘å¸ƒ-è®¢é˜…ï¼šé€šè¿‡<strong>äº‹ä»¶ä¸­å¿ƒ</strong>è§£è€¦ï¼ˆæ›´çµæ´»ï¼‰ã€‚</li></ul></blockquote><h4 id="_7-ç­–ç•¥æ¨¡å¼-strategy" tabindex="-1">7. <strong>ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰</strong> <a class="header-anchor" href="#_7-ç­–ç•¥æ¨¡å¼-strategy" aria-label="Permalink to â€œ7. ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šå°è£…ç®—æ³•æ—ï¼Œè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ã€‚</li><li><strong>JS ä¼˜åŠ¿</strong>ï¼šå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> strategies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  isAdult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hasLicense</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.license</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rules.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">every</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">rule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> strategies[rule](user));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;isAdult&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hasLicense&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><h4 id="_8-å‘½ä»¤æ¨¡å¼-command" tabindex="-1">8. <strong>å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰</strong> <a class="header-anchor" href="#_8-å‘½ä»¤æ¨¡å¼-command" aria-label="Permalink to â€œ8. å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šå°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡ï¼ˆæ”¯æŒæ’¤é”€ã€é˜Ÿåˆ—ï¼‰ã€‚</li><li><strong>JS åœºæ™¯</strong>ï¼šæ“ä½œå†å²ï¼ˆå¦‚ç¼–è¾‘å™¨ undo/redoï¼‰ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  undo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> commands</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">commands.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AddCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">commands[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h4 id="_9-è¿­ä»£å™¨æ¨¡å¼-iterator" tabindex="-1">9. <strong>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰</strong> <a class="header-anchor" href="#_9-è¿­ä»£å™¨æ¨¡å¼-iterator" aria-label="Permalink to â€œ9. è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰â€">â€‹</a></h4><ul><li><strong>ç”¨é€”</strong>ï¼šé¡ºåºè®¿é—®èšåˆå¯¹è±¡å…ƒç´ ï¼Œä¸æš´éœ²å†…éƒ¨ç»“æ„ã€‚</li><li><strong>JS åŸç”Ÿæ”¯æŒ</strong>ï¼š<code>for...of</code>ã€<code>[Symbol.iterator]</code>ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  from: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  to: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [Symbol.iterator]() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      current: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.from,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      last: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.to,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.last </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { done: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { done: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> range) console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1, 2, 3</span></span></code></pre></div><hr><h3 id="å››ã€å…¶ä»–å®ç”¨æ¨¡å¼" tabindex="-1">å››ã€å…¶ä»–å®ç”¨æ¨¡å¼ <a class="header-anchor" href="#å››ã€å…¶ä»–å®ç”¨æ¨¡å¼" aria-label="Permalink to â€œå››ã€å…¶ä»–å®ç”¨æ¨¡å¼â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ¨¡å—æ¨¡å¼ï¼ˆModuleï¼‰</strong></td><td>åˆ©ç”¨ IIFE æˆ– ES6 æ¨¡å—å®ç°ç§æœ‰å˜é‡ï¼ˆ<code>WeakMap</code> æ›¿ä»£æ–¹æ¡ˆï¼‰</td></tr><tr><td><strong>ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰</strong></td><td>ES6 <code>Proxy</code> æ‹¦æˆªå¯¹è±¡æ“ä½œï¼ˆæ•°æ®ç»‘å®šã€éªŒè¯ï¼‰</td></tr><tr><td><strong>äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰</strong></td><td>å…±äº«é‡å¤å¯¹è±¡ï¼ˆå¦‚è™šæ‹Ÿåˆ—è¡¨ä¸­çš„ DOM èŠ‚ç‚¹å¤ç”¨ï¼‰</td></tr></tbody></table><hr><h3 id="äº”ã€å¦‚ä½•é€‰æ‹©-1" tabindex="-1">äº”ã€å¦‚ä½•é€‰æ‹©ï¼Ÿ <a class="header-anchor" href="#äº”ã€å¦‚ä½•é€‰æ‹©-1" aria-label="Permalink to â€œäº”ã€å¦‚ä½•é€‰æ‹©ï¼Ÿâ€">â€‹</a></h3><ul><li><strong>éœ€è¦å°è£…åˆ›å»ºé€»è¾‘</strong> â†’ å·¥å‚/æ„é€ å™¨</li><li><strong>éœ€å…¨å±€å”¯ä¸€å®ä¾‹</strong> â†’ å•ä¾‹</li><li><strong>åŠ¨æ€æ‰©å±•åŠŸèƒ½</strong> â†’ è£…é¥°å™¨</li><li><strong>è§£è€¦äº‹ä»¶é€šä¿¡</strong> â†’ è§‚å¯Ÿè€…/å‘å¸ƒ-è®¢é˜…</li><li><strong>ç®—æ³•å¯æ’æ‹”</strong> â†’ ç­–ç•¥</li><li><strong>éå†è‡ªå®šä¹‰ç»“æ„</strong> â†’ è¿­ä»£å™¨</li></ul><blockquote><p>ğŸ’¡ <strong>ç°ä»£ JS è¶‹åŠ¿</strong>ï¼š</p><ul><li>å¤šç”¨ <strong>é«˜é˜¶å‡½æ•°</strong>ã€<strong>é—­åŒ…</strong>ã€<strong>Promise</strong> æ›¿ä»£ä¼ ç»Ÿæ¨¡å¼ï¼›</li><li><strong>ES6+ ç‰¹æ€§</strong>ï¼ˆ<code>class</code>ã€<code>Proxy</code>ã€<code>Iterator</code>ï¼‰ç®€åŒ–æ¨¡å¼å®ç°ã€‚</li></ul></blockquote><hr><h3 id="ä¸€å¥è¯æ€»ç»“-6" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-6" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ç»éªŒç»“æ™¶ï¼Œä½†åœ¨ JS ä¸­åº”â€œè½»é‡ä½¿ç”¨â€â€”â€”ä¼˜å…ˆåˆ©ç”¨è¯­è¨€ç‰¹æ€§ï¼ˆå¦‚å‡½æ•°å¼ã€åŸå‹é“¾ï¼‰è€Œéå¼ºè¡Œå¥—ç”¨ OOP æ¨¡æ¿ã€‚</strong></p></blockquote>`,682)])])}const E=i(h,[["render",l]]);export{g as __pageData,E as default};

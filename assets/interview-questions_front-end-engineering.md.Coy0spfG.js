import{_ as i,c as a,o as n,aj as t,aH as l,aI as e,aJ as h,aK as k,aL as p}from"./chunks/framework.CFMCFJB6.js";const u=JSON.parse('{"title":"å‰ç«¯å·¥ç¨‹åŒ–","description":"","frontmatter":{},"headers":[],"relativePath":"interview-questions/front-end-engineering.md","filePath":"interview-questions/front-end-engineering.md"}'),r={name:"interview-questions/front-end-engineering.md"};function d(o,s,g,c,E,y){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="å‰ç«¯å·¥ç¨‹åŒ–" tabindex="-1">å‰ç«¯å·¥ç¨‹åŒ– <a class="header-anchor" href="#å‰ç«¯å·¥ç¨‹åŒ–" aria-label="Permalink to â€œå‰ç«¯å·¥ç¨‹åŒ–â€">â€‹</a></h1><h2 id="webpack-é…ç½®æœ‰å“ªäº›" tabindex="-1">webpack é…ç½®æœ‰å“ªäº›? <a class="header-anchor" href="#webpack-é…ç½®æœ‰å“ªäº›" aria-label="Permalink to â€œwebpack é…ç½®æœ‰å“ªäº›?â€">â€‹</a></h2><p>Webpack æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‰ç«¯æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå…¶æ ¸å¿ƒèƒ½åŠ›é€šè¿‡ <strong>é…ç½®æ–‡ä»¶ <code>webpack.config.js</code></strong> è¿›è¡Œå®šåˆ¶ã€‚ä»¥ä¸‹æ˜¯ <strong>å¸¸ç”¨ä¸”å…³é”®çš„ Webpack é…ç½®é¡¹è¯¦è§£</strong>ï¼ˆåŸºäº Webpack 5ï¼‰ï¼š</p><hr><h3 id="ä¸€ã€åŸºç¡€ç»“æ„" tabindex="-1">ä¸€ã€åŸºç¡€ç»“æ„ <a class="header-anchor" href="#ä¸€ã€åŸºç¡€ç»“æ„" aria-label="Permalink to â€œä¸€ã€åŸºç¡€ç»“æ„â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;production&#39; | &#39;none&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  entry: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  output: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resolve: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  devServer: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimization: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h3 id="äºŒã€æ ¸å¿ƒé…ç½®é¡¹è¯¦è§£" tabindex="-1">äºŒã€æ ¸å¿ƒé…ç½®é¡¹è¯¦è§£ <a class="header-anchor" href="#äºŒã€æ ¸å¿ƒé…ç½®é¡¹è¯¦è§£" aria-label="Permalink to â€œäºŒã€æ ¸å¿ƒé…ç½®é¡¹è¯¦è§£â€">â€‹</a></h3><h4 id="_1-mode-æ¨¡å¼" tabindex="-1">1. <strong><code>mode</code>ï¼ˆæ¨¡å¼ï¼‰</strong> <a class="header-anchor" href="#_1-mode-æ¨¡å¼" aria-label="Permalink to â€œ1. modeï¼ˆæ¨¡å¼ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šè®¾ç½®æ‰“åŒ…ç¯å¢ƒï¼Œè‡ªåŠ¨å¯ç”¨å†…ç½®ä¼˜åŒ–ã€‚</li><li><strong>é€‰é¡¹</strong>ï¼š <ul><li><code>&#39;development&#39;</code>ï¼šå¯ç”¨ <code>NamedChunksPlugin</code>ã€<code>EvalSourceMapDevToolPlugin</code>ï¼ˆå¿«é€Ÿæ„å»º + source mapï¼‰</li><li><code>&#39;production&#39;</code>ï¼šå¯ç”¨ä»£ç å‹ç¼©ã€ä½œç”¨åŸŸæå‡ã€Tree Shaking ç­‰</li></ul></li><li><strong>å»ºè®®</strong>ï¼šå§‹ç»ˆæ˜¾å¼æŒ‡å®šã€‚</li></ul><h4 id="_2-entry-å…¥å£" tabindex="-1">2. <strong><code>entry</code>ï¼ˆå…¥å£ï¼‰</strong> <a class="header-anchor" href="#_2-entry-å…¥å£" aria-label="Permalink to â€œ2. entryï¼ˆå…¥å£ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šæŒ‡å®šæ‰“åŒ…èµ·ç‚¹ã€‚</li><li><strong>ç”¨æ³•</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å•å…¥å£</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/app.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  vendor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/vendor.js&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å¤šå…¥å£ï¼ˆç”¨äºä»£ç åˆ†å‰²ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_3-output-è¾“å‡º" tabindex="-1">3. <strong><code>output</code>ï¼ˆè¾“å‡ºï¼‰</strong> <a class="header-anchor" href="#_3-output-è¾“å‡º" aria-label="Permalink to â€œ3. outputï¼ˆè¾“å‡ºï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šé…ç½®æ‰“åŒ…ç»“æœã€‚</li><li><strong>å…³é”®å±æ€§</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡ºç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[name].[contenthash].js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–‡ä»¶åï¼ˆ[name]=å…¥å£åï¼Œ[contenthash]=å†…å®¹å“ˆå¸Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  publicPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// èµ„æºå¼•ç”¨å‰ç¼€ï¼ˆCDN åœºæ™¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                            // æ„å»ºå‰æ¸…ç©º output ç›®å½•ï¼ˆWebpack 5+ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_4-module-rules-æ¨¡å—è§„åˆ™" tabindex="-1">4. <strong><code>module.rules</code>ï¼ˆæ¨¡å—è§„åˆ™ï¼‰</strong> <a class="header-anchor" href="#_4-module-rules-æ¨¡å—è§„åˆ™" aria-label="Permalink to â€œ4. module.rulesï¼ˆæ¨¡å—è§„åˆ™ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šå®šä¹‰å¦‚ä½•å¤„ç†ä¸åŒç±»å‹çš„æ¨¡å—ï¼ˆå¦‚ JSã€CSSã€å›¾ç‰‡ï¼‰ã€‚</li><li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<strong>Loader</strong>ï¼ˆè½¬æ¢å™¨ï¼‰</li><li><strong>å¸¸ç”¨è§„åˆ™</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¤„ç† JS/JSXï¼ˆBabelï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">jsx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      exclude:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      use: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        loader: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;babel-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        options: { presets: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¤„ç† CSS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      use: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;style-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;postcss-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¤„ç†å›¾ç‰‡/å­—ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">(png</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">jpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">gif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">woff2)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;asset&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Webpack 5 å†…ç½®èµ„æºæ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      parser: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        dataUrlCondition: { maxSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°äº 8KB è½¬ base64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      generator: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;assets/[name].[hash][ext]&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_5-plugins-æ’ä»¶" tabindex="-1">5. <strong><code>plugins</code>ï¼ˆæ’ä»¶ï¼‰</strong> <a class="header-anchor" href="#_5-plugins-æ’ä»¶" aria-label="Permalink to â€œ5. pluginsï¼ˆæ’ä»¶ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ï¼ˆå¦‚ä¼˜åŒ–ã€å‹ç¼©ã€æ³¨å…¥å˜é‡ï¼‰ã€‚</li><li><strong>å¸¸ç”¨æ’ä»¶</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> HtmlWebpackPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;html-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MiniCssExtractPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini-css-extract-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DefinePlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpack&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).DefinePlugin;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è‡ªåŠ¨ç”Ÿæˆ HTML å¹¶æ³¨å…¥ bundle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlWebpackPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./public/index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æå– CSS åˆ°å•ç‹¬æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MiniCssExtractPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[name].[contenthash].css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å®šä¹‰å…¨å±€å¸¸é‡ï¼ˆå¦‚ process.env.NODE_ENVï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefinePlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;process.env.API_URL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://api.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><h4 id="_6-resolve-è§£æ" tabindex="-1">6. <strong><code>resolve</code>ï¼ˆè§£æï¼‰</strong> <a class="header-anchor" href="#_6-resolve-è§£æ" aria-label="Permalink to â€œ6. resolveï¼ˆè§£æï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šé…ç½®æ¨¡å—è§£æè§„åˆ™ã€‚</li><li><strong>å¸¸ç”¨é…ç½®</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  extensions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.jsx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯¼å…¥æ—¶çœç•¥åç¼€</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;@&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·¯å¾„åˆ«å</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;preact/compat&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ›¿æ¢ä¾èµ–ï¼ˆPreact ä»£æ›¿ Reactï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  modules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¨¡å—æŸ¥æ‰¾ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_7-devserver-å¼€å‘æœåŠ¡å™¨" tabindex="-1">7. <strong><code>devServer</code>ï¼ˆå¼€å‘æœåŠ¡å™¨ï¼‰</strong> <a class="header-anchor" href="#_7-devserver-å¼€å‘æœåŠ¡å™¨" aria-label="Permalink to â€œ7. devServerï¼ˆå¼€å‘æœåŠ¡å™¨ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šæœ¬åœ°å¼€å‘æœåŠ¡ï¼ˆä»…å¼€å‘ç¯å¢ƒæœ‰æ•ˆï¼‰ã€‚</li><li><strong>å…³é”®é…ç½®</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é™æ€èµ„æºç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»£ç† API è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:8080&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_8-optimization-ä¼˜åŒ–" tabindex="-1">8. <strong><code>optimization</code>ï¼ˆä¼˜åŒ–ï¼‰</strong> <a class="header-anchor" href="#_8-optimization-ä¼˜åŒ–" aria-label="Permalink to â€œ8. optimizationï¼ˆä¼˜åŒ–ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–ã€‚</li><li><strong>å…³é”®é…ç½®</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optimization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  splitChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    chunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»£ç åˆ†å‰²ï¼ˆæå–å…¬å…±ä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cacheGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      vendor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vendors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        chunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  minimize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¯å¦å‹ç¼©ï¼ˆproduction æ¨¡å¼é»˜è®¤ trueï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  minimizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CssMinimizerPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªå®šä¹‰å‹ç¼©å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><hr><h3 id="ä¸‰ã€ç¯å¢ƒåŒºåˆ†é…ç½®" tabindex="-1">ä¸‰ã€ç¯å¢ƒåŒºåˆ†é…ç½® <a class="header-anchor" href="#ä¸‰ã€ç¯å¢ƒåŒºåˆ†é…ç½®" aria-label="Permalink to â€œä¸‰ã€ç¯å¢ƒåŒºåˆ†é…ç½®â€">â€‹</a></h3><p>é¿å…åœ¨å•ä¸ªé…ç½®æ–‡ä»¶ä¸­æ··æ‚å¼€å‘/ç”Ÿäº§é€»è¾‘ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isProd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> argv.mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mode: argv.mode,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    devtool: isProd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;source-map&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;eval-cheap-module-source-map&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    plugins: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlWebpackPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./public/index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        minify: isProd </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿäº§ç¯å¢ƒå‹ç¼© HTML</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âœ… <strong>æ›´ä½³å®è·µ</strong>ï¼šä½¿ç”¨ <code>webpack-merge</code> æ‹†åˆ†é…ç½®æ–‡ä»¶ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>config/</span></span>
<span class="line"><span>  â”œâ”€â”€ webpack.common.js</span></span>
<span class="line"><span>  â”œâ”€â”€ webpack.dev.js</span></span>
<span class="line"><span>  â””â”€â”€ webpack.prod.js</span></span></code></pre></div></blockquote><hr><h3 id="å››ã€å¸¸ç”¨-loader-plugin-é€ŸæŸ¥è¡¨" tabindex="-1">å››ã€å¸¸ç”¨ Loader &amp; Plugin é€ŸæŸ¥è¡¨ <a class="header-anchor" href="#å››ã€å¸¸ç”¨-loader-plugin-é€ŸæŸ¥è¡¨" aria-label="Permalink to â€œå››ã€å¸¸ç”¨ Loader &amp; Plugin é€ŸæŸ¥è¡¨â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>åç§°</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>JS</strong></td><td><code>babel-loader</code></td><td>è½¬è¯‘ ES6+ / JSX</td></tr><tr><td><strong>CSS</strong></td><td><code>css-loader</code> + <code>MiniCssExtractPlugin</code></td><td>å¤„ç† CSS æ¨¡å—åŒ– &amp; æå–</td></tr><tr><td><strong>èµ„æº</strong></td><td><code>file-loader</code> / <code>url-loader</code>ï¼ˆWebpack 5 ç”¨ <code>asset modules</code>ï¼‰</td><td>å¤„ç†å›¾ç‰‡/å­—ä½“</td></tr><tr><td><strong>HTML</strong></td><td><code>html-webpack-plugin</code></td><td>ç”Ÿæˆ HTML æ¨¡æ¿</td></tr><tr><td><strong>ä¼˜åŒ–</strong></td><td><code>terser-webpack-plugin</code></td><td>JS å‹ç¼©ï¼ˆWebpack 5 å†…ç½®ï¼‰</td></tr><tr><td><strong>åˆ†æ</strong></td><td><code>webpack-bundle-analyzer</code></td><td>å¯è§†åŒ– bundle ä½“ç§¯</td></tr></tbody></table><hr><h3 id="äº”ã€ä¸€å¥è¯æ€»ç»“" tabindex="-1">äº”ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#äº”ã€ä¸€å¥è¯æ€»ç»“" aria-label="Permalink to â€œäº”ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Webpack é…ç½® = å…¥å£ â†’ åŠ è½½å™¨ï¼ˆLoaderï¼‰å¤„ç†æ¨¡å— â†’ æ’ä»¶ï¼ˆPluginï¼‰å¢å¼ºåŠŸèƒ½ â†’ è¾“å‡ºä¼˜åŒ–ç»“æœ</strong>ã€‚<br> æŒæ¡ <code>module.rules</code>ã€<code>plugins</code>ã€<code>optimization.splitChunks</code> ä¸‰å¤§æ ¸å¿ƒï¼Œå³å¯åº”å¯¹ 90% åœºæ™¯ã€‚</p></blockquote><h2 id="æœ‰å“ªäº›å¸¸è§çš„-loader-å’Œ-plugin" tabindex="-1">æœ‰å“ªäº›å¸¸è§çš„ Loader å’Œ Pluginï¼Ÿ <a class="header-anchor" href="#æœ‰å“ªäº›å¸¸è§çš„-loader-å’Œ-plugin" aria-label="Permalink to â€œæœ‰å“ªäº›å¸¸è§çš„ Loader å’Œ Pluginï¼Ÿâ€">â€‹</a></h2><p>åœ¨ Webpack ç”Ÿæ€ä¸­ï¼Œ<strong>Loader</strong> ç”¨äº<strong>è½¬æ¢æ¨¡å—å†…å®¹</strong>ï¼ˆå¦‚å°† TypeScript ç¼–è¯‘ä¸º JavaScriptï¼‰ï¼Œ<strong>Plugin</strong> ç”¨äº<strong>æ‰©å±•æ„å»ºæµç¨‹èƒ½åŠ›</strong>ï¼ˆå¦‚å‹ç¼©ä»£ç ã€ç”Ÿæˆ HTMLï¼‰ã€‚ä»¥ä¸‹æ˜¯ <strong>æœ€å¸¸ç”¨ä¸”å®ç”¨çš„ Loader å’Œ Plugin åˆ—è¡¨</strong>ï¼ˆåŸºäº Webpack 5ï¼‰ï¼š</p><hr><h3 id="ä¸€ã€å¸¸è§-loader-æŒ‰åŠŸèƒ½åˆ†ç±»" tabindex="-1">ä¸€ã€å¸¸è§ Loaderï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰ <a class="header-anchor" href="#ä¸€ã€å¸¸è§-loader-æŒ‰åŠŸèƒ½åˆ†ç±»" aria-label="Permalink to â€œä¸€ã€å¸¸è§ Loaderï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰â€">â€‹</a></h3><h4 id="âœ…-javascript-typescript" tabindex="-1">âœ… <strong>JavaScript / TypeScript</strong> <a class="header-anchor" href="#âœ…-javascript-typescript" aria-label="Permalink to â€œâœ… JavaScript / TypeScriptâ€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Loader</th><th>ä½œç”¨</th><th>å®‰è£…å‘½ä»¤</th></tr></thead><tbody><tr><td><code>babel-loader</code></td><td>è½¬è¯‘ ES6+/JSX/TypeScriptï¼ˆéœ€é…åˆ Babel é…ç½®ï¼‰</td><td><code>npm install -D babel-loader @babel/core</code></td></tr><tr><td><code>ts-loader</code></td><td>ç›´æ¥ç¼–è¯‘ TypeScriptï¼ˆæ¯” Babel æ›´å®Œæ•´æ”¯æŒ TS ç±»å‹ï¼‰</td><td><code>npm install -D ts-loader typescript</code></td></tr></tbody></table><blockquote><p>ğŸ’¡ æ¨èï¼šç”¨ <code>babel-loader</code> + <code>@babel/preset-typescript</code> å¤„ç† TSï¼ˆæ›´å¿«ï¼Œé€‚åˆ React é¡¹ç›®ï¼‰ã€‚</p></blockquote><hr><h4 id="âœ…-css-é¢„å¤„ç†å™¨" tabindex="-1">âœ… <strong>CSS / é¢„å¤„ç†å™¨</strong> <a class="header-anchor" href="#âœ…-css-é¢„å¤„ç†å™¨" aria-label="Permalink to â€œâœ… CSS / é¢„å¤„ç†å™¨â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Loader</th><th>ä½œç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>css-loader</code></td><td>è§£æ CSS ä¸­çš„ <code>@import</code> å’Œ <code>url()</code></td><td>å¿…é¡»é…åˆå…¶ä»– loader ä½¿ç”¨</td></tr><tr><td><code>style-loader</code></td><td>å°† CSS æ³¨å…¥ <code>&lt;style&gt;</code> æ ‡ç­¾ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</td><td>ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ</td></tr><tr><td><code>MiniCssExtractPlugin.loader</code></td><td><strong>æå– CSS ä¸ºç‹¬ç«‹æ–‡ä»¶</strong>ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼‰</td><td>éœ€æ­é… <code>mini-css-extract-plugin</code></td></tr><tr><td><code>sass-loader</code></td><td>ç¼–è¯‘ Sass/SCSS</td><td>ä¾èµ– <code>node-sass</code> æˆ– <code>sass</code></td></tr><tr><td><code>less-loader</code></td><td>ç¼–è¯‘ Less</td><td>ä¾èµ– <code>less</code></td></tr><tr><td><code>postcss-loader</code></td><td>è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼ˆé…åˆ <code>autoprefixer</code>ï¼‰</td><td>éœ€é…ç½® <code>postcss.config.js</code></td></tr></tbody></table><blockquote><p>ğŸ“Œ <strong>å…¸å‹ CSS é“¾</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å‘ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;style-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;postcss-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿäº§ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [MiniCssExtractPlugin.loader, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;postcss-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></blockquote><hr><h4 id="âœ…-èµ„æºæ–‡ä»¶-å›¾ç‰‡-å­—ä½“-åª’ä½“" tabindex="-1">âœ… <strong>èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡/å­—ä½“/åª’ä½“ï¼‰</strong> <a class="header-anchor" href="#âœ…-èµ„æºæ–‡ä»¶-å›¾ç‰‡-å­—ä½“-åª’ä½“" aria-label="Permalink to â€œâœ… èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡/å­—ä½“/åª’ä½“ï¼‰â€">â€‹</a></h4><p>Webpack 5 <strong>å†…ç½® Asset Modules</strong>ï¼Œæ— éœ€é¢å¤– loaderï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">(png</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">jpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">gif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">svg)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;asset&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªåŠ¨é€‰æ‹© asset/resource æˆ– asset/inline</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        parser: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dataUrlCondition: { maxSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;8KB è½¬ base64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        generator: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;images/[name].[hash][ext]&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">(woff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">woff2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">eot</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">ttf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">otf)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;asset/resource&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼ºåˆ¶è¾“å‡ºä¸ºæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        generator: { filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fonts/[name][ext]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âš ï¸ Webpack 4 ç”¨æˆ·éœ€ç”¨ <code>file-loader</code> / <code>url-loader</code>ã€‚</p></blockquote><hr><h4 id="âœ…-å…¶ä»–" tabindex="-1">âœ… <strong>å…¶ä»–</strong> <a class="header-anchor" href="#âœ…-å…¶ä»–" aria-label="Permalink to â€œâœ… å…¶ä»–â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Loader</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>html-loader</code></td><td>å¤„ç† HTML ä¸­çš„ <code>&lt;img src=&quot;...&quot;&gt;</code> ç­‰èµ„æºå¼•ç”¨</td></tr><tr><td><code>vue-loader</code></td><td>ç¼–è¯‘ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆ<code>.vue</code>ï¼‰</td></tr><tr><td><code>worker-loader</code></td><td>å°† JS æ–‡ä»¶ä½œä¸º Web Worker åŠ è½½</td></tr></tbody></table><hr><h3 id="äºŒã€å¸¸è§-plugin-æŒ‰åŠŸèƒ½åˆ†ç±»" tabindex="-1">äºŒã€å¸¸è§ Pluginï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰ <a class="header-anchor" href="#äºŒã€å¸¸è§-plugin-æŒ‰åŠŸèƒ½åˆ†ç±»" aria-label="Permalink to â€œäºŒã€å¸¸è§ Pluginï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰â€">â€‹</a></h3><h4 id="âœ…-æ ¸å¿ƒåŠŸèƒ½" tabindex="-1">âœ… <strong>æ ¸å¿ƒåŠŸèƒ½</strong> <a class="header-anchor" href="#âœ…-æ ¸å¿ƒåŠŸèƒ½" aria-label="Permalink to â€œâœ… æ ¸å¿ƒåŠŸèƒ½â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Plugin</th><th>ä½œç”¨</th><th>å®‰è£…å‘½ä»¤</th></tr></thead><tbody><tr><td><code>HtmlWebpackPlugin</code></td><td>è‡ªåŠ¨ç”Ÿæˆ HTML å¹¶è‡ªåŠ¨æ³¨å…¥ bundle</td><td><code>npm install -D html-webpack-plugin</code></td></tr><tr><td><code>DefinePlugin</code></td><td>å®šä¹‰å…¨å±€å¸¸é‡ï¼ˆå¦‚ <code>process.env.NODE_ENV</code>ï¼‰</td><td><strong>Webpack å†…ç½®</strong></td></tr><tr><td><code>ProvidePlugin</code></td><td>è‡ªåŠ¨åŠ è½½æ¨¡å—ï¼ˆå¦‚ <code>$</code> â†’ <code>jquery</code>ï¼‰</td><td><strong>Webpack å†…ç½®</strong></td></tr></tbody></table><blockquote><p><strong>HtmlWebpackPlugin ç¤ºä¾‹</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlWebpackPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./public/index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  minify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ç”Ÿäº§ç¯å¢ƒå‹ç¼© HTML</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></blockquote><hr><h4 id="âœ…-ä»£ç ä¼˜åŒ–" tabindex="-1">âœ… <strong>ä»£ç ä¼˜åŒ–</strong> <a class="header-anchor" href="#âœ…-ä»£ç ä¼˜åŒ–" aria-label="Permalink to â€œâœ… ä»£ç ä¼˜åŒ–â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Plugin</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>MiniCssExtractPlugin</code></td><td><strong>æå– CSS åˆ°ç‹¬ç«‹æ–‡ä»¶</strong>ï¼ˆæ›¿ä»£ <code>style-loader</code>ï¼‰</td></tr><tr><td><code>CssMinimizerPlugin</code></td><td>å‹ç¼© CSSï¼ˆWebpack 5 éœ€æ‰‹åŠ¨é…ç½®ï¼‰</td></tr><tr><td><code>TerserWebpackPlugin</code></td><td>å‹ç¼© JSï¼ˆWebpack 5 ç”Ÿäº§æ¨¡å¼é»˜è®¤å¯ç”¨ï¼‰</td></tr><tr><td><code>CompressionPlugin</code></td><td>ç”Ÿæˆ gzip/brotli å‹ç¼©æ–‡ä»¶</td></tr></tbody></table><blockquote><p><strong>MiniCssExtractPlugin ç¤ºä¾‹</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MiniCssExtractPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini-css-extract-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MiniCssExtractAssistantPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    use: [MiniCssExtractPlugin.loader, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></blockquote><hr><h4 id="âœ…-æ€§èƒ½åˆ†æ-è°ƒè¯•" tabindex="-1">âœ… <strong>æ€§èƒ½åˆ†æ &amp; è°ƒè¯•</strong> <a class="header-anchor" href="#âœ…-æ€§èƒ½åˆ†æ-è°ƒè¯•" aria-label="Permalink to â€œâœ… æ€§èƒ½åˆ†æ &amp; è°ƒè¯•â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Plugin</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>webpack-bundle-analyzer</code></td><td>å¯è§†åŒ– bundle ä½“ç§¯ï¼ˆæ’æŸ¥è¿‡å¤§ä¾èµ–ï¼‰</td></tr><tr><td><code>SpeedMeasurePlugin</code></td><td>åˆ†æå„ loader/plugin è€—æ—¶</td></tr></tbody></table><blockquote><p><strong>Bundle Analyzer ä½¿ç”¨</strong>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> BundleAnalyzerPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpack-bundle-analyzer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).BundleAnalyzerPlugin;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BundleAnalyzerPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ„å»ºåè‡ªåŠ¨æ‰“å¼€åˆ†æé¡µé¢</span></span></code></pre></div></blockquote><hr><h4 id="âœ…-é«˜çº§åŠŸèƒ½" tabindex="-1">âœ… <strong>é«˜çº§åŠŸèƒ½</strong> <a class="header-anchor" href="#âœ…-é«˜çº§åŠŸèƒ½" aria-label="Permalink to â€œâœ… é«˜çº§åŠŸèƒ½â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>Plugin</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>CopyWebpackPlugin</code></td><td>å¤åˆ¶é™æ€èµ„æºåˆ°è¾“å‡ºç›®å½•ï¼ˆå¦‚ <code>public</code> æ–‡ä»¶å¤¹ï¼‰</td></tr><tr><td><code>CleanWebpackPlugin</code></td><td>æ¸…ç©ºè¾“å‡ºç›®å½•ï¼ˆWebpack 5 å¯ç”¨ <code>output.clean: true</code> æ›¿ä»£ï¼‰</td></tr><tr><td><code>HotModuleReplacementPlugin</code></td><td>å¯ç”¨æ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰ï¼ˆWebpack 5 å¼€å‘æœåŠ¡å™¨é»˜è®¤å¯ç”¨ï¼‰</td></tr></tbody></table><hr><h3 id="ä¸‰ã€å¿«é€Ÿå‚è€ƒè¡¨" tabindex="-1">ä¸‰ã€å¿«é€Ÿå‚è€ƒè¡¨ <a class="header-anchor" href="#ä¸‰ã€å¿«é€Ÿå‚è€ƒè¡¨" aria-label="Permalink to â€œä¸‰ã€å¿«é€Ÿå‚è€ƒè¡¨â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨èç»„åˆ</th></tr></thead><tbody><tr><td><strong>React é¡¹ç›®</strong></td><td><code>babel-loader</code> + <code>HtmlWebpackPlugin</code> + <code>MiniCssExtractPlugin</code></td></tr><tr><td><strong>Vue é¡¹ç›®</strong></td><td><code>vue-loader</code> + <code>vue-style-loader</code></td></tr><tr><td><strong>TypeScript é¡¹ç›®</strong></td><td><code>ts-loader</code> æˆ– <code>babel-loader</code> + <code>fork-ts-checker-webpack-plugin</code>ï¼ˆç±»å‹æ£€æŸ¥ï¼‰</td></tr><tr><td><strong>ç”Ÿäº§ç¯å¢ƒ CSS</strong></td><td><code>MiniCssExtractPlugin.loader</code> + <code>CssMinimizerPlugin</code></td></tr><tr><td><strong>æ€§èƒ½åˆ†æ</strong></td><td><code>webpack-bundle-analyzer</code></td></tr></tbody></table><hr><h3 id="ä¸€å¥è¯æ€»ç»“" tabindex="-1">ä¸€å¥è¯æ€»ç»“ï¼š <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“ï¼šâ€">â€‹</a></h3><blockquote><p><strong>Loader è´Ÿè´£â€œç¿»è¯‘â€æ–‡ä»¶ï¼ˆå¦‚ JSâ†’JSã€Sassâ†’CSSï¼‰ï¼ŒPlugin è´Ÿè´£â€œåŠ å·¥â€æ„å»ºæµç¨‹ï¼ˆå¦‚å‹ç¼©ã€ç”Ÿæˆæ–‡ä»¶ï¼‰â€”â€”äºŒè€…ååŒå®Œæˆä»æºç åˆ°ç”Ÿäº§åŒ…çš„è½¬åŒ–ã€‚</strong></p></blockquote><h2 id="loaderå’Œpluginçš„åŒºåˆ«" tabindex="-1">Loaderå’ŒPluginçš„åŒºåˆ« <a class="header-anchor" href="#loaderå’Œpluginçš„åŒºåˆ«" aria-label="Permalink to â€œLoaderå’ŒPluginçš„åŒºåˆ«â€">â€‹</a></h2><p><code>Loader</code> å’Œ <code>Plugin</code> æ˜¯ Webpack ä¸­ä¸¤ä¸ªæ ¸å¿ƒæ‰©å±•æœºåˆ¶ï¼Œ<strong>èŒè´£ä¸åŒã€è¿è¡Œæ—¶æœºä¸åŒã€ä½¿ç”¨æ–¹å¼ä¹Ÿä¸åŒ</strong>ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«æ˜¯æŒæ¡ Webpack é…ç½®çš„å…³é”®ã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ" tabindex="-1">ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><strong>Loader</strong></th><th><strong>Plugin</strong></th></tr></thead><tbody><tr><td><strong>ä½œç”¨</strong></td><td><strong>è½¬æ¢æ¨¡å—å†…å®¹</strong>ï¼ˆå¦‚æŠŠ Sass ç¼–è¯‘æˆ CSSï¼‰</td><td><strong>æ‰©å±• Webpack æ„å»ºæµç¨‹èƒ½åŠ›</strong>ï¼ˆå¦‚å‹ç¼©ä»£ç ã€ç”Ÿæˆ HTMLï¼‰</td></tr><tr><td><strong>å·¥ä½œé˜¶æ®µ</strong></td><td><strong>æ¨¡å—åŠ è½½æ—¶</strong>ï¼ˆmodule resolution &amp; transformationï¼‰</td><td><strong>æ•´ä¸ªæ„å»ºç”Ÿå‘½å‘¨æœŸ</strong>ï¼ˆä»å¼€å§‹åˆ°ç»“æŸçš„ä»»æ„é’©å­ï¼‰</td></tr><tr><td><strong>é…ç½®ä½ç½®</strong></td><td><code>module.rules</code> æ•°ç»„ä¸­</td><td><code>plugins</code> æ•°ç»„ä¸­</td></tr><tr><td><strong>è¾“å…¥/è¾“å‡º</strong></td><td>æ¥æ”¶<strong>æ–‡ä»¶å†…å®¹</strong>ï¼ˆå­—ç¬¦ä¸²/Bufferï¼‰ï¼Œè¿”å›<strong>æ–°å†…å®¹</strong></td><td>æ¥æ”¶ <strong>Webpack ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰æˆ–ç¼–è¯‘å¯¹è±¡ï¼ˆcompilationï¼‰</strong></td></tr><tr><td><strong>ç²’åº¦</strong></td><td><strong>å•ä¸ªæ¨¡å—çº§åˆ«</strong></td><td><strong>æ•´ä¸ªæ„å»ºè¿‡ç¨‹çº§åˆ«</strong></td></tr></tbody></table><hr><h3 id="äºŒã€å½¢è±¡æ¯”å–»" tabindex="-1">äºŒã€å½¢è±¡æ¯”å–» <a class="header-anchor" href="#äºŒã€å½¢è±¡æ¯”å–»" aria-label="Permalink to â€œäºŒã€å½¢è±¡æ¯”å–»â€">â€‹</a></h3><ul><li><p><strong>Loader åƒâ€œç¿»è¯‘å®˜â€</strong>ï¼š<br> å½“ Webpack é‡åˆ°ä¸€ä¸ªå®ƒä¸è®¤è¯†çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ <code>.scss</code>ï¼‰ï¼Œå°±æ‰¾å¯¹åº”çš„ Loaderï¼ˆ<code>sass-loader</code>ï¼‰æŠŠå®ƒâ€œç¿»è¯‘â€æˆ Webpack èƒ½å¤„ç†çš„ JavaScript æ¨¡å—ã€‚</p></li><li><p><strong>Plugin åƒâ€œé¡¹ç›®ç»ç†â€</strong>ï¼š<br> å®ƒä¸å…³å¿ƒå…·ä½“æŸä¸ªæ–‡ä»¶æ€ä¹ˆå¤„ç†ï¼Œè€Œæ˜¯ç›‘æ§æ•´ä¸ªæ‰“åŒ…æµç¨‹ï¼Œåœ¨åˆé€‚æ—¶æœºä»‹å…¥â€”â€”æ¯”å¦‚æ‰“åŒ…å®Œæˆåè‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶ï¼ˆ<code>HtmlWebpackPlugin</code>ï¼‰ï¼Œæˆ–åœ¨ä»£ç å‹ç¼©å‰åšæ€§èƒ½åˆ†æã€‚</p></li></ul><hr><h3 id="ä¸‰ã€ä»£ç ç¤ºä¾‹å¯¹æ¯”" tabindex="-1">ä¸‰ã€ä»£ç ç¤ºä¾‹å¯¹æ¯” <a class="header-anchor" href="#ä¸‰ã€ä»£ç ç¤ºä¾‹å¯¹æ¯”" aria-label="Permalink to â€œä¸‰ã€ä»£ç ç¤ºä¾‹å¯¹æ¯”â€">â€‹</a></h3><h4 id="âœ…-loader-ç¤ºä¾‹-å¤„ç†-css" tabindex="-1">âœ… Loader ç¤ºä¾‹ï¼šå¤„ç† CSS <a class="header-anchor" href="#âœ…-loader-ç¤ºä¾‹-å¤„ç†-css" aria-label="Permalink to â€œâœ… Loader ç¤ºä¾‹ï¼šå¤„ç† CSSâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        use: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;style-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// â† è¿™æ˜¯ Loader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><ul><li><strong>ä½œç”¨</strong>ï¼šå°† <code>import &#39;./style.css&#39;</code> è½¬æ¢ä¸º JS ä»£ç ï¼ŒåŠ¨æ€æ’å…¥ <code>&lt;style&gt;</code> æ ‡ç­¾ã€‚</li></ul><h4 id="âœ…-plugin-ç¤ºä¾‹-ç”Ÿæˆ-html" tabindex="-1">âœ… Plugin ç¤ºä¾‹ï¼šç”Ÿæˆ HTML <a class="header-anchor" href="#âœ…-plugin-ç¤ºä¾‹-ç”Ÿæˆ-html" aria-label="Permalink to â€œâœ… Plugin ç¤ºä¾‹ï¼šç”Ÿæˆ HTMLâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> HtmlWebpackPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;html-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlWebpackPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// â† è¿™æ˜¯ Plugin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><ul><li><strong>ä½œç”¨</strong>ï¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¼•ç”¨äº† bundle çš„ <code>index.html</code>ã€‚</li></ul><hr><h3 id="å››ã€è¿è¡Œæ—¶æœºå·®å¼‚-å…³é”®" tabindex="-1">å››ã€è¿è¡Œæ—¶æœºå·®å¼‚ï¼ˆå…³é”®ï¼ï¼‰ <a class="header-anchor" href="#å››ã€è¿è¡Œæ—¶æœºå·®å¼‚-å…³é”®" aria-label="Permalink to â€œå››ã€è¿è¡Œæ—¶æœºå·®å¼‚ï¼ˆå…³é”®ï¼ï¼‰â€">â€‹</a></h3><p>Webpack æ„å»ºæµç¨‹ç®€åŒ–å¦‚ä¸‹ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>å¯åŠ¨ â†’ è§£æå…¥å£ â†’ </span></span>
<span class="line"><span>  â”Œâ”€ é‡åˆ° import æ¨¡å— â†’ è°ƒç”¨å¯¹åº” Loader è½¬æ¢å†…å®¹ â†’ </span></span>
<span class="line"><span>  â””â”€ æ‰€æœ‰æ¨¡å—å¤„ç†å®Œ â†’ è§¦å‘ Plugin çš„å„ç§é’©å­ï¼ˆemit, done...ï¼‰â†’ è¾“å‡ºæ–‡ä»¶</span></span></code></pre></div><ul><li><strong>Loader</strong> åªåœ¨ <strong>æ¨¡å—è¢«åŠ è½½æ—¶è§¦å‘</strong>ï¼ˆæ¯ä¸ªåŒ¹é…çš„æ–‡ä»¶éƒ½ä¼šè°ƒç”¨ï¼‰ï¼›</li><li><strong>Plugin</strong> å¯ä»¥åœ¨ <strong>ä»»ä½•ç”Ÿå‘½å‘¨æœŸé’©å­</strong> ä¸­æ‰§è¡Œï¼ˆå¦‚ <code>compile</code>, <code>emit</code>, <code>done</code>ï¼‰ã€‚</li></ul><blockquote><p>ğŸ’¡ ä¾‹å¦‚ï¼š<code>HtmlWebpackPlugin</code> åœ¨ <code>emit</code> é˜¶æ®µç”Ÿæˆ HTMLï¼›<code>TerserWebpackPlugin</code> åœ¨ <code>optimize-chunk-assets</code> é˜¶æ®µå‹ç¼©ä»£ç ã€‚</p></blockquote><hr><h3 id="äº”ã€å¸¸è§è¯¯åŒº" tabindex="-1">äº”ã€å¸¸è§è¯¯åŒº <a class="header-anchor" href="#äº”ã€å¸¸è§è¯¯åŒº" aria-label="Permalink to â€œäº”ã€å¸¸è§è¯¯åŒºâ€">â€‹</a></h3><h4 id="âŒ-è¯¯åŒº1-plugin-ä¹Ÿèƒ½å¤„ç†æ–‡ä»¶" tabindex="-1">âŒ è¯¯åŒº1ï¼šPlugin ä¹Ÿèƒ½å¤„ç†æ–‡ä»¶ï¼Ÿ <a class="header-anchor" href="#âŒ-è¯¯åŒº1-plugin-ä¹Ÿèƒ½å¤„ç†æ–‡ä»¶" aria-label="Permalink to â€œâŒ è¯¯åŒº1ï¼šPlugin ä¹Ÿèƒ½å¤„ç†æ–‡ä»¶ï¼Ÿâ€">â€‹</a></h4><ul><li><strong>éƒ¨åˆ†æ­£ç¡®</strong>ï¼šæœ‰äº› Plugin ä¼šæ“ä½œæ–‡ä»¶ï¼ˆå¦‚ <code>CopyWebpackPlugin</code>ï¼‰ï¼Œä½†å®ƒ<strong>ä¸æ˜¯è½¬æ¢æ¨¡å—å†…å®¹</strong>ï¼Œè€Œæ˜¯<strong>åœ¨æ„å»ºåå¤åˆ¶é™æ€èµ„æº</strong>ï¼Œå’Œ Loader çš„â€œæŒ‰éœ€è½¬æ¢â€æœ¬è´¨ä¸åŒã€‚</li></ul><h4 id="âŒ-è¯¯åŒº2-loader-èƒ½åšä¼˜åŒ–" tabindex="-1">âŒ è¯¯åŒº2ï¼šLoader èƒ½åšä¼˜åŒ–ï¼Ÿ <a class="header-anchor" href="#âŒ-è¯¯åŒº2-loader-èƒ½åšä¼˜åŒ–" aria-label="Permalink to â€œâŒ è¯¯åŒº2ï¼šLoader èƒ½åšä¼˜åŒ–ï¼Ÿâ€">â€‹</a></h4><ul><li><strong>ä¸èƒ½</strong>ï¼šLoader åªè´Ÿè´£â€œç¿»è¯‘â€ï¼Œä»£ç å‹ç¼©ã€Tree Shaking ç­‰ä¼˜åŒ–å¿…é¡»ç”± Plugin æˆ– Webpack å†…ç½®æœºåˆ¶å®Œæˆã€‚</li></ul><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Loader è´Ÿè´£â€œè¯»æ‡‚â€å„ç§æ–‡ä»¶ï¼ˆè½¬æ¢æ¨¡å—ï¼‰ï¼ŒPlugin è´Ÿè´£â€œæŒæ§â€æ•´ä¸ªæ‰“åŒ…æµç¨‹ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰â€”â€”å‰è€…æ˜¯â€œç¿»è¯‘å™¨â€ï¼Œåè€…æ˜¯â€œæŒ‡æŒ¥å®˜â€ã€‚</strong></p></blockquote><h2 id="webpack-çš„æ„å»ºæµç¨‹" tabindex="-1">webpack çš„æ„å»ºæµç¨‹ <a class="header-anchor" href="#webpack-çš„æ„å»ºæµç¨‹" aria-label="Permalink to â€œwebpack çš„æ„å»ºæµç¨‹â€">â€‹</a></h2><p>Webpack çš„æ„å»ºæµç¨‹æ˜¯ä¸€ä¸ªé«˜åº¦æ¨¡å—åŒ–ã€åŸºäºäº‹ä»¶é©±åŠ¨çš„ç¼–è¯‘è¿‡ç¨‹ã€‚ç†è§£å…¶å†…éƒ¨æœºåˆ¶ï¼Œæœ‰åŠ©äºä¼˜åŒ–é…ç½®ã€è°ƒè¯•é—®é¢˜å’Œå¼€å‘è‡ªå®šä¹‰æ’ä»¶ã€‚ä»¥ä¸‹æ˜¯ <strong>Webpack 5 çš„å®Œæ•´æ„å»ºæµç¨‹è¯¦è§£</strong>ï¼š</p><hr><h3 id="ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ-7-ä¸ªæ ¸å¿ƒé˜¶æ®µ" tabindex="-1">ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆï¼ˆ7 ä¸ªæ ¸å¿ƒé˜¶æ®µï¼‰ <a class="header-anchor" href="#ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ-7-ä¸ªæ ¸å¿ƒé˜¶æ®µ" aria-label="Permalink to â€œä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆï¼ˆ7 ä¸ªæ ¸å¿ƒé˜¶æ®µï¼‰â€">â€‹</a></h3><p><img src="`+l+`" alt="An Image"></p><hr><h3 id="äºŒã€è¯¦ç»†é˜¶æ®µè§£æ" tabindex="-1">äºŒã€è¯¦ç»†é˜¶æ®µè§£æ <a class="header-anchor" href="#äºŒã€è¯¦ç»†é˜¶æ®µè§£æ" aria-label="Permalink to â€œäºŒã€è¯¦ç»†é˜¶æ®µè§£æâ€">â€‹</a></h3><h4 id="_1-åˆå§‹åŒ–å‚æ•°-initialization" tabindex="-1">1. <strong>åˆå§‹åŒ–å‚æ•°ï¼ˆInitializationï¼‰</strong> <a class="header-anchor" href="#_1-åˆå§‹åŒ–å‚æ•°-initialization" aria-label="Permalink to â€œ1. åˆå§‹åŒ–å‚æ•°ï¼ˆInitializationï¼‰â€">â€‹</a></h4><ul><li>åˆå¹¶å‘½ä»¤è¡Œå‚æ•°ï¼ˆ<code>webpack --mode production</code>ï¼‰ä¸é…ç½®æ–‡ä»¶ï¼ˆ<code>webpack.config.js</code>ï¼‰ï¼›</li><li>å¾—åˆ°æœ€ç»ˆé…ç½®å¯¹è±¡ã€‚</li></ul><h4 id="_2-åˆ›å»º-compiler-å¯¹è±¡" tabindex="-1">2. <strong>åˆ›å»º Compiler å¯¹è±¡</strong> <a class="header-anchor" href="#_2-åˆ›å»º-compiler-å¯¹è±¡" aria-label="Permalink to â€œ2. åˆ›å»º Compiler å¯¹è±¡â€">â€‹</a></h4><ul><li><code>Compiler</code> æ˜¯ Webpack çš„<strong>å…¨å±€å•ä¾‹</strong>ï¼Œè´Ÿè´£ï¼š <ul><li>ç®¡ç†é…ç½®ï¼›</li><li>æ³¨å†Œæ’ä»¶ï¼ˆé€šè¿‡ <code>compiler.hooks</code>ï¼‰ï¼›</li><li>æ§åˆ¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li></ul></li><li>æ­¤æ—¶è§¦å‘ <code>compiler.hooks.initialize</code> é’©å­ã€‚</li></ul><h4 id="_3-ç¡®å®šå…¥å£-entry" tabindex="-1">3. <strong>ç¡®å®šå…¥å£ï¼ˆEntryï¼‰</strong> <a class="header-anchor" href="#_3-ç¡®å®šå…¥å£-entry" aria-label="Permalink to â€œ3. ç¡®å®šå…¥å£ï¼ˆEntryï¼‰â€">â€‹</a></h4><ul><li>æ ¹æ® <code>entry</code> é…ç½®æ‰¾åˆ°æ‰€æœ‰å…¥å£æ–‡ä»¶ï¼ˆå¦‚ <code>./src/index.js</code>ï¼‰ï¼›</li><li>ä¸ºæ¯ä¸ªå…¥å£åˆ›å»ºä¸€ä¸ª <strong>ä¾èµ–ï¼ˆDependencyï¼‰</strong> å¯¹è±¡ã€‚</li></ul><h4 id="_4-ç¼–è¯‘æ¨¡å—-compilation" tabindex="-1">4. <strong>ç¼–è¯‘æ¨¡å—ï¼ˆCompilationï¼‰</strong> <a class="header-anchor" href="#_4-ç¼–è¯‘æ¨¡å—-compilation" aria-label="Permalink to â€œ4. ç¼–è¯‘æ¨¡å—ï¼ˆCompilationï¼‰â€">â€‹</a></h4><blockquote><p>âš ï¸ <strong>æ ¸å¿ƒé˜¶æ®µï¼</strong> æ¯æ¬¡æ„å»ºéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Compilation</code> å¯¹è±¡ï¼ˆåŒ…å«å½“å‰æ„å»ºçš„æ‰€æœ‰æ¨¡å—ä¿¡æ¯ï¼‰ã€‚</p></blockquote><h5 id="å­æµç¨‹" tabindex="-1">å­æµç¨‹ï¼š <a class="header-anchor" href="#å­æµç¨‹" aria-label="Permalink to â€œå­æµç¨‹ï¼šâ€">â€‹</a></h5><ol><li><p><strong>å¼€å§‹ç¼–è¯‘</strong></p><ul><li>è§¦å‘ <code>compiler.hooks.make</code> é’©å­ï¼›</li><li>ä»å…¥å£å¼€å§‹é€’å½’è§£æä¾èµ–ã€‚</li></ul></li><li><p><strong>æ¨¡å—è§£æï¼ˆResolveï¼‰</strong></p><ul><li>è°ƒç”¨ <code>enhanced-resolve</code> åº“ï¼Œæ ¹æ® <code>resolve</code> é…ç½®æŸ¥æ‰¾æ–‡ä»¶ï¼›</li><li>ä¾‹å¦‚ï¼š<code>import _ from &#39;lodash&#39;</code> â†’ å®šä½åˆ° <code>node_modules/lodash/index.js</code>ã€‚</li></ul></li><li><p><strong>æ¨¡å—åŠ è½½ï¼ˆLoadï¼‰</strong></p><ul><li>æ ¹æ®æ–‡ä»¶ç±»å‹åŒ¹é… <code>module.rules</code> ä¸­çš„ Loaderï¼›</li><li><strong>Loader é“¾å¼è°ƒç”¨</strong>ï¼ˆä»å³åˆ°å·¦ï¼‰ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;style-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;css-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®é™…æ‰§è¡Œï¼šcss-loader â†’ style-loader</span></span></code></pre></div></li></ul></li><li><p><strong>æ¨¡å—æ„å»ºï¼ˆBuildï¼‰</strong></p><ul><li>å°† Loader å¤„ç†åçš„å†…å®¹è½¬æ¢ä¸º <strong>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰</strong>ï¼›</li><li>åˆ†æ <code>import</code>/<code>require</code> è¯­å¥ï¼Œæ”¶é›†ä¾èµ–ã€‚</li></ul></li><li><p><strong>ä¾èµ–æ”¶é›†ï¼ˆDependencyï¼‰</strong></p><ul><li>é€’å½’å¤„ç†æ‰€æœ‰ä¾èµ–æ¨¡å—ï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰ï¼›</li><li>æ„å»ºå®Œæ•´çš„ <strong>æ¨¡å—ä¾èµ–å›¾ï¼ˆModule Graphï¼‰</strong>ã€‚</li></ul></li></ol><h4 id="_5-å®Œæˆæ¨¡å—ä¾èµ–å›¾" tabindex="-1">5. <strong>å®Œæˆæ¨¡å—ä¾èµ–å›¾</strong> <a class="header-anchor" href="#_5-å®Œæˆæ¨¡å—ä¾èµ–å›¾" aria-label="Permalink to â€œ5. å®Œæˆæ¨¡å—ä¾èµ–å›¾â€">â€‹</a></h4><ul><li>æ‰€æœ‰æ¨¡å—æ„å»ºå®Œæˆåï¼Œè§¦å‘ <code>compilation.hooks.finishModules</code>ï¼›</li><li>æ‰§è¡Œ <strong>ä»£ç åˆ†å‰²ï¼ˆSplitChunksï¼‰</strong> å’Œ <strong>Tree Shaking</strong>ï¼ˆåŸºäº ES Module é™æ€åˆ†æï¼‰ã€‚</li></ul><h4 id="_6-ä¼˜åŒ–ä¸ç”Ÿæˆèµ„æº-seal-optimize" tabindex="-1">6. <strong>ä¼˜åŒ–ä¸ç”Ÿæˆèµ„æºï¼ˆSeal &amp; Optimizeï¼‰</strong> <a class="header-anchor" href="#_6-ä¼˜åŒ–ä¸ç”Ÿæˆèµ„æº-seal-optimize" aria-label="Permalink to â€œ6. ä¼˜åŒ–ä¸ç”Ÿæˆèµ„æºï¼ˆSeal &amp; Optimizeï¼‰â€">â€‹</a></h4><ul><li><strong>Sealï¼ˆå°è£…ï¼‰</strong>ï¼š <ul><li>å°†æ¨¡å—æŒ‰ Chunk åˆ†ç»„ï¼ˆå¦‚ <code>main.js</code>, <code>vendor.js</code>ï¼‰ï¼›</li><li>è§¦å‘ <code>compilation.hooks.seal</code>ã€‚</li></ul></li><li><strong>ä¼˜åŒ–é˜¶æ®µ</strong>ï¼š <ul><li>å‹ç¼©ä»£ç ï¼ˆ<code>TerserPlugin</code>ï¼‰ï¼›</li><li>æå– CSSï¼ˆ<code>MiniCssExtractPlugin</code>ï¼‰ï¼›</li><li>ç”Ÿæˆå“ˆå¸Œå€¼ï¼ˆ<code>[contenthash]</code>ï¼‰ã€‚</li></ul></li><li><strong>ç”Ÿæˆèµ„æº</strong>ï¼š <ul><li>å°† Chunk è½¬æ¢ä¸ºæœ€ç»ˆ assetsï¼ˆå¦‚ <code>main.a1b2c3.js</code>ï¼‰ï¼›</li><li>è§¦å‘ <code>compilation.hooks.processAssets</code>ã€‚</li></ul></li></ul><h4 id="_7-è¾“å‡ºæ–‡ä»¶-emit" tabindex="-1">7. <strong>è¾“å‡ºæ–‡ä»¶ï¼ˆEmitï¼‰</strong> <a class="header-anchor" href="#_7-è¾“å‡ºæ–‡ä»¶-emit" aria-label="Permalink to â€œ7. è¾“å‡ºæ–‡ä»¶ï¼ˆEmitï¼‰â€">â€‹</a></h4><ul><li>è§¦å‘ <code>compiler.hhooks.emit</code> é’©å­ï¼ˆ<strong>Plugin å¸¸åœ¨æ­¤é˜¶æ®µç”Ÿæˆé¢å¤–æ–‡ä»¶</strong>ï¼Œå¦‚ <code>HtmlWebpackPlugin</code>ï¼‰ï¼›</li><li>å°† assets å†™å…¥ <code>output.path</code> ç›®å½•ï¼›</li><li>è§¦å‘ <code>compiler.hooks.done</code>ï¼Œæ„å»ºç»“æŸã€‚</li></ul><hr><h3 id="ä¸‰ã€å…³é”®å¯¹è±¡å…³ç³»" tabindex="-1">ä¸‰ã€å…³é”®å¯¹è±¡å…³ç³» <a class="header-anchor" href="#ä¸‰ã€å…³é”®å¯¹è±¡å…³ç³»" aria-label="Permalink to â€œä¸‰ã€å…³é”®å¯¹è±¡å…³ç³»â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å¯¹è±¡</th><th>ä½œç”¨</th><th>ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td><strong><code>Compiler</code></strong></td><td>å…¨å±€æ„å»ºç®¡ç†å™¨</td><td><strong>å•ä¾‹</strong>ï¼Œè´¯ç©¿æ•´ä¸ª Webpack è¿è¡Œæ—¶</td></tr><tr><td><strong><code>Compilation</code></strong></td><td>å•æ¬¡æ„å»ºçš„ä¸Šä¸‹æ–‡</td><td><strong>æ¯æ¬¡æ„å»ºæ–°å»º</strong>ï¼ŒåŒ…å«æ¨¡å—/Chunk/assets</td></tr><tr><td><strong><code>Module</code></strong></td><td>è¡¨ç¤ºä¸€ä¸ªæºæ–‡ä»¶ï¼ˆå¦‚ JS/CSSï¼‰</td><td>åœ¨ Compilation ä¸­åˆ›å»º</td></tr><tr><td><strong><code>Chunk</code></strong></td><td>ä»£ç åˆ†å‰²åçš„ä»£ç å—</td><td>ç”±å¤šä¸ª Module ç»„æˆ</td></tr><tr><td><strong><code>Asset</code></strong></td><td>æœ€ç»ˆè¾“å‡ºçš„æ–‡ä»¶ï¼ˆå¦‚ <code>.js</code>, <code>.css</code>ï¼‰</td><td>ç”± Chunk ç”Ÿæˆ</td></tr></tbody></table><hr><h3 id="å››ã€plugin-å¦‚ä½•ä»‹å…¥æµç¨‹" tabindex="-1">å››ã€Plugin å¦‚ä½•ä»‹å…¥æµç¨‹ï¼Ÿ <a class="header-anchor" href="#å››ã€plugin-å¦‚ä½•ä»‹å…¥æµç¨‹" aria-label="Permalink to â€œå››ã€Plugin å¦‚ä½•ä»‹å…¥æµç¨‹ï¼Ÿâ€">â€‹</a></h3><p>Plugin é€šè¿‡ <strong>Tapable é’©å­</strong> ç›‘å¬ Compiler/Compilation äº‹ä»¶ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compiler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç›‘å¬ç¼–è¯‘å¼€å§‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    compiler.hooks.run.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyPlugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ„å»ºå¼€å§‹&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç›‘å¬æ–‡ä»¶è¾“å‡ºå‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    compiler.hooks.emit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tapAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyPlugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      compilation.assets[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ·»åŠ æ–°æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello World&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>ğŸ”‘ <strong>æ ¸å¿ƒé’©å­</strong>ï¼š</p><ul><li><code>make</code>ï¼šå¼€å§‹è§£ææ¨¡å—ï¼›</li><li><code>emit</code>ï¼šè¾“å‡ºæ–‡ä»¶å‰ï¼›</li><li><code>done</code>ï¼šæ„å»ºå®Œæˆã€‚</li></ul></blockquote><hr><h3 id="äº”ã€loader-çš„æ‰§è¡Œæ—¶æœº" tabindex="-1">äº”ã€Loader çš„æ‰§è¡Œæ—¶æœº <a class="header-anchor" href="#äº”ã€loader-çš„æ‰§è¡Œæ—¶æœº" aria-label="Permalink to â€œäº”ã€Loader çš„æ‰§è¡Œæ—¶æœºâ€">â€‹</a></h3><ul><li><strong>ä»…åœ¨æ¨¡å—æ„å»ºé˜¶æ®µï¼ˆStep 4.3ï¼‰è§¦å‘</strong>ï¼›</li><li>æ¯ä¸ªåŒ¹é…çš„æ–‡ä»¶ç‹¬ç«‹è°ƒç”¨ Loader é“¾ï¼›</li><li>Loader æœ¬è´¨æ˜¯ <strong>åŒæ­¥/å¼‚æ­¥å‡½æ•°</strong>ï¼Œæ¥æ”¶æ–‡ä»¶å†…å®¹å¹¶è¿”å›æ–°å†…å®¹ã€‚</li></ul><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-1" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-1" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Webpack æ„å»º = åˆå§‹åŒ– â†’ åˆ›å»º Compiler â†’ é€’å½’è§£ææ¨¡å—ï¼ˆLoader è½¬æ¢ï¼‰â†’ ç”Ÿæˆä¾èµ–å›¾ â†’ ä¼˜åŒ–åˆ†å—ï¼ˆPlugin ä»‹å…¥ï¼‰â†’ è¾“å‡ºæ–‡ä»¶</strong>ï¼Œ<br> å…¶ä¸­ <strong>Compiler ç®¡å…¨å±€ï¼ŒCompilation ç®¡å•æ¬¡æ„å»ºï¼ŒLoader è½¬æ¨¡å—ï¼ŒPlugin æ§æµç¨‹</strong>ã€‚</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯webpackçš„çƒ­æ›´æ–°-hot-module-replacement-åŸç†æ˜¯ä»€ä¹ˆ" tabindex="-1">ä»€ä¹ˆæ˜¯Webpackçš„çƒ­æ›´æ–°ï¼ˆHot Module Replacementï¼‰ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯webpackçš„çƒ­æ›´æ–°-hot-module-replacement-åŸç†æ˜¯ä»€ä¹ˆ" aria-label="Permalink to â€œä»€ä¹ˆæ˜¯Webpackçš„çƒ­æ›´æ–°ï¼ˆHot Module Replacementï¼‰ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿâ€">â€‹</a></h2><p>Webpack çš„ <strong>çƒ­æ›´æ–°ï¼ˆHot Module Replacement, HMRï¼‰</strong> æ˜¯ä¸€ç§åœ¨<strong>ä¸åˆ·æ–°æ•´ä¸ªé¡µé¢</strong>çš„æƒ…å†µä¸‹ï¼Œ<strong>å®æ—¶æ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—</strong>çš„å¼€å‘åŠŸèƒ½ã€‚å®ƒæå¤§æå‡äº†å¼€å‘ä½“éªŒâ€”â€”ä¿®æ”¹ä»£ç åï¼Œåªæ›´æ–°å—å½±å“çš„éƒ¨åˆ†ï¼ŒçŠ¶æ€ï¼ˆå¦‚ React ç»„ä»¶ stateã€Vuex æ•°æ®ï¼‰å¾—ä»¥ä¿ç•™ã€‚</p><hr><h3 id="ä¸€ã€hmr-vs-live-reload" tabindex="-1">ä¸€ã€HMR vs Live Reload <a class="header-anchor" href="#ä¸€ã€hmr-vs-live-reload" aria-label="Permalink to â€œä¸€ã€HMR vs Live Reloadâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>Live Reload</th><th>HMR</th></tr></thead><tbody><tr><td><strong>é¡µé¢åˆ·æ–°</strong></td><td>âœ… æ•´é¡µåˆ·æ–°</td><td>âŒ ä¸åˆ·æ–°</td></tr><tr><td><strong>çŠ¶æ€ä¿ç•™</strong></td><td>âŒ ä¸¢å¤±æ‰€æœ‰çŠ¶æ€</td><td>âœ… ä¿ç•™è¿è¡Œæ—¶çŠ¶æ€</td></tr><tr><td><strong>æ›´æ–°ç²’åº¦</strong></td><td>æ•´ä¸ªé¡µé¢</td><td>å•ä¸ªæ¨¡å—ï¼ˆå¦‚ä¸€ä¸ªç»„ä»¶ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>ç®€å•é™æ€é¡µ</td><td>å¤æ‚ SPAï¼ˆReact/Vueï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>HMR æ˜¯ Live Reload çš„è¶…é›†</strong>ï¼šå½“ HMR æ— æ³•å¤„ç†æ—¶ï¼Œä¼šé™çº§ä¸ºé¡µé¢åˆ·æ–°ã€‚</p></blockquote><hr><h3 id="äºŒã€hmr-å·¥ä½œåŸç†-æ ¸å¿ƒæµç¨‹" tabindex="-1">äºŒã€HMR å·¥ä½œåŸç†ï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰ <a class="header-anchor" href="#äºŒã€hmr-å·¥ä½œåŸç†-æ ¸å¿ƒæµç¨‹" aria-label="Permalink to â€œäºŒã€HMR å·¥ä½œåŸç†ï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰â€">â€‹</a></h3><p><img src="`+e+`" alt="An Image"></p><h4 id="è¯¦ç»†æ­¥éª¤" tabindex="-1">è¯¦ç»†æ­¥éª¤ï¼š <a class="header-anchor" href="#è¯¦ç»†æ­¥éª¤" aria-label="Permalink to â€œè¯¦ç»†æ­¥éª¤ï¼šâ€">â€‹</a></h4><ol><li><p><strong>å»ºç«‹è¿æ¥</strong></p><ul><li>å¯åŠ¨ <code>webpack-dev-server</code> æ—¶ï¼Œè‡ªåŠ¨æ³¨å…¥ HMR å®¢æˆ·ç«¯ä»£ç ï¼›</li><li>æµè§ˆå™¨ä¸ Dev Server é€šè¿‡ <strong>WebSocket</strong> å»ºç«‹é•¿è¿æ¥ã€‚</li></ul></li><li><p><strong>æ–‡ä»¶å˜æ›´æ£€æµ‹</strong></p><ul><li>Dev Server ç›‘å¬æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ï¼ˆå¦‚ä¿å­˜ <code>Button.jsx</code>ï¼‰ï¼›</li><li>è§¦å‘ Webpack <strong>å¢é‡ç¼–è¯‘</strong>ï¼Œç”Ÿæˆï¼š <ul><li><code>hash.hot-update.json</code>ï¼šæè¿°å˜æ›´çš„æ¨¡å—åˆ—è¡¨ï¼›</li><li><code>hash.hot-update.js</code>ï¼šåŒ…å«æ–°æ¨¡å—ä»£ç çš„ JS æ–‡ä»¶ã€‚</li></ul></li></ul></li><li><p><strong>æ¨é€æ›´æ–°</strong></p><ul><li>Dev Server é€šè¿‡ WebSocket å°† <strong>hash å€¼</strong> æ¨é€ç»™æµè§ˆå™¨ï¼›</li><li>æµè§ˆå™¨å‘èµ· AJAX è¯·æ±‚è·å– <code>hot-update.json</code> å’Œ <code>hot-update.js</code>ã€‚</li></ul></li><li><p><strong>åº”ç”¨æ›´æ–°</strong></p><ul><li>Webpack è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰æ¥æ”¶æ–°æ¨¡å—ï¼›</li><li><strong>å…³é”®</strong>ï¼šæ£€æŸ¥æ¨¡å—æ˜¯å¦å£°æ˜äº† <code>module.hot.accept()</code>ï¼š <ul><li>âœ… è‹¥æœ‰ï¼šæ‰§è¡Œè‡ªå®šä¹‰æ›´æ–°é€»è¾‘ï¼ˆå¦‚ React æ›¿æ¢ç»„ä»¶ï¼‰ï¼›</li><li>âŒ è‹¥æ— ï¼šè§¦å‘ <strong>é¡µé¢åˆ·æ–°</strong>ï¼ˆé™çº§è¡Œä¸ºï¼‰ã€‚</li></ul></li></ul></li></ol><hr><h3 id="ä¸‰ã€hmr-çš„ä¸¤ç§å®ç°æ–¹å¼" tabindex="-1">ä¸‰ã€HMR çš„ä¸¤ç§å®ç°æ–¹å¼ <a class="header-anchor" href="#ä¸‰ã€hmr-çš„ä¸¤ç§å®ç°æ–¹å¼" aria-label="Permalink to â€œä¸‰ã€HMR çš„ä¸¤ç§å®ç°æ–¹å¼â€">â€‹</a></h3><h4 id="_1-æ‰‹åŠ¨ç¼–å†™-accept-é€»è¾‘-åº•å±‚" tabindex="-1">1. <strong>æ‰‹åŠ¨ç¼–å†™ <code>accept</code> é€»è¾‘ï¼ˆåº•å±‚ï¼‰</strong> <a class="header-anchor" href="#_1-æ‰‹åŠ¨ç¼–å†™-accept-é€»è¾‘-åº•å±‚" aria-label="Permalink to â€œ1. æ‰‹åŠ¨ç¼–å†™ accept é€»è¾‘ï¼ˆåº•å±‚ï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// button.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Button</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Click me&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// index.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Button } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å£°æ˜æ¥å— button æ¨¡å—çš„æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é‡æ–°æ¸²æŸ“æŒ‰é’®ï¼ˆä¿ç•™çˆ¶ç»„ä»¶çŠ¶æ€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">App</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> newButton</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Button} /&gt;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-æ¡†æ¶é›†æˆ-æ¨è" tabindex="-1">2. <strong>æ¡†æ¶é›†æˆï¼ˆæ¨èï¼‰</strong> <a class="header-anchor" href="#_2-æ¡†æ¶é›†æˆ-æ¨è" aria-label="Permalink to â€œ2. æ¡†æ¶é›†æˆï¼ˆæ¨èï¼‰â€">â€‹</a></h4><ul><li><strong>React</strong>ï¼šé€šè¿‡ <code>react-refresh</code> + <code>@pmmmwh/react-refresh-webpack-plugin</code><br> â†’ è‡ªåŠ¨ patch ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨å†™ <code>accept</code>ã€‚</li><li><strong>Vue</strong>ï¼šVue Loader å†…ç½® HMR æ”¯æŒ<br> â†’ å•æ–‡ä»¶ç»„ä»¶ä¿®æ”¹åè‡ªåŠ¨æ›´æ–°ã€‚</li><li><strong>å…¶ä»–</strong>ï¼šSvelteã€Angular ç­‰å‡æœ‰å®˜æ–¹ HMR æ–¹æ¡ˆã€‚</li></ul><blockquote><p>âœ… <strong>ç°ä»£å¼€å‘ä¸­ï¼Œ99% åœºæ™¯æ— éœ€æ‰‹åŠ¨é…ç½® HMR</strong>ï¼Œæ¡†æ¶è„šæ‰‹æ¶å·²é›†æˆã€‚</p></blockquote><hr><h3 id="å››ã€hmr-çš„å±€é™æ€§" tabindex="-1">å››ã€HMR çš„å±€é™æ€§ <a class="header-anchor" href="#å››ã€hmr-çš„å±€é™æ€§" aria-label="Permalink to â€œå››ã€HMR çš„å±€é™æ€§â€">â€‹</a></h3><ul><li><strong>ä»…é™å¼€å‘ç¯å¢ƒ</strong>ï¼šç”Ÿäº§ç¯å¢ƒéœ€å…³é—­ï¼ˆ<code>hot: false</code>ï¼‰ï¼›</li><li><strong>çŠ¶æ€ä¿ç•™æœ‰æ¡ä»¶</strong>ï¼š <ul><li>Reactï¼šå‡½æ•°ç»„ä»¶çŠ¶æ€å¯ä¿ç•™ï¼Œç±»ç»„ä»¶éœ€é…åˆ <code>react-hot-loader</code>ï¼ˆå·²åºŸå¼ƒï¼Œæ”¹ç”¨ Fast Refreshï¼‰ï¼›</li><li>å…¨å±€å˜é‡/æ¨¡å—çº§çŠ¶æ€ï¼ˆå¦‚ Redux storeï¼‰éœ€é¢å¤–é…ç½®ï¼ˆå¦‚ <code>redux-hmr</code>ï¼‰ï¼›</li></ul></li><li><strong>æ— æ³•å¤„ç†</strong>ï¼š <ul><li>å…¥å£æ–‡ä»¶ï¼ˆentryï¼‰ä¿®æ”¹ï¼›</li><li>ä¾èµ–æ ‘æ ¹èŠ‚ç‚¹å˜æ›´ï¼›</li><li>CSS é»˜è®¤æ”¯æŒ HMRï¼ˆæ— éœ€é…ç½®ï¼‰ï¼Œä½† JS éœ€æ¡†æ¶æ”¯æŒã€‚</li></ul></li></ul><hr><h3 id="äº”ã€å¦‚ä½•å¯ç”¨-hmr" tabindex="-1">äº”ã€å¦‚ä½•å¯ç”¨ HMRï¼Ÿ <a class="header-anchor" href="#äº”ã€å¦‚ä½•å¯ç”¨-hmr" aria-label="Permalink to â€œäº”ã€å¦‚ä½•å¯ç”¨ HMRï¼Ÿâ€">â€‹</a></h3><h4 id="æ–¹æ³•-1-webpack-dev-server-æœ€å¸¸ç”¨" tabindex="-1">æ–¹æ³• 1ï¼š<code>webpack-dev-server</code>ï¼ˆæœ€å¸¸ç”¨ï¼‰ <a class="header-anchor" href="#æ–¹æ³•-1-webpack-dev-server-æœ€å¸¸ç”¨" aria-label="Permalink to â€œæ–¹æ³• 1ï¼šwebpack-dev-serverï¼ˆæœ€å¸¸ç”¨ï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  devServer: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    hot: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å¯ç”¨ HMR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="æ–¹æ³•-2-node-js-api" tabindex="-1">æ–¹æ³• 2ï¼šNode.js API <a class="header-anchor" href="#æ–¹æ³•-2-node-js-api" aria-label="Permalink to â€œæ–¹æ³• 2ï¼šNode.js APIâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> webpack</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpack&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> compiler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> webpack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebpackDevServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(compiler, { hot: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š</p><ul><li>Webpack 5 ä¸­ <code>HotModuleReplacementPlugin</code> <strong>é»˜è®¤å¯ç”¨</strong>ï¼ˆå½“ <code>hot: true</code> æ—¶ï¼‰ï¼›</li><li>æ— éœ€æ‰‹åŠ¨æ·»åŠ è¯¥æ’ä»¶ï¼</li></ul></blockquote><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-2" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-2" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>HMR é€šè¿‡ WebSocket ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå¢é‡ç¼–è¯‘å¹¶æ¨é€æ–°æ¨¡å—ï¼Œç»“åˆ <code>module.hot.accept()</code> å®ç°é¡µé¢å±€éƒ¨æ›´æ–°â€”â€”å®ƒæ˜¯ç°ä»£å‰ç«¯å¼€å‘â€œç§’çº§åé¦ˆâ€ä½“éªŒçš„æ ¸å¿ƒæŠ€æœ¯ã€‚</strong></p></blockquote><h2 id="ä»€ä¹ˆæ˜¯code-splitting" tabindex="-1">ä»€ä¹ˆæ˜¯Code Splitting <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯code-splitting" aria-label="Permalink to â€œä»€ä¹ˆæ˜¯Code Splittingâ€">â€‹</a></h2><p><strong>Code Splittingï¼ˆä»£ç åˆ†å‰²ï¼‰</strong> æ˜¯ Webpack æä¾›çš„ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºå°†<strong>åºå¤§çš„ JavaScript bundle æ‹†åˆ†æˆå¤šä¸ªè¾ƒå°çš„ chunkï¼ˆä»£ç å—ï¼‰</strong>ï¼Œå®ç°<strong>æŒ‰éœ€åŠ è½½ï¼ˆLazy Loadingï¼‰</strong> æˆ– <strong>å¹¶è¡ŒåŠ è½½</strong>ï¼Œä»è€Œæ˜¾è‘—æå‡åº”ç”¨çš„<strong>é¦–å±åŠ è½½é€Ÿåº¦</strong>å’Œ<strong>è¿è¡Œæ—¶æ€§èƒ½</strong>ã€‚</p><hr><h3 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-code-splitting" tabindex="-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Code Splittingï¼Ÿ <a class="header-anchor" href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-code-splitting" aria-label="Permalink to â€œä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Code Splittingï¼Ÿâ€">â€‹</a></h3><ul><li><strong>é—®é¢˜</strong>ï¼šå•ä¸ª bundle æ–‡ä»¶è¿‡å¤§ï¼ˆå¦‚ 2MBï¼‰ï¼Œç”¨æˆ·éœ€ç­‰å¾…å…¨éƒ¨ä¸‹è½½ã€è§£æåæ‰èƒ½äº¤äº’ï¼›</li><li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š <ul><li>é¦–å±åªåŠ è½½å¿…è¦ä»£ç ï¼›</li><li>å…¶ä»–åŠŸèƒ½ä»£ç åœ¨éœ€è¦æ—¶å†åŠ è½½ï¼ˆå¦‚è·¯ç”±åˆ‡æ¢ã€æ¨¡æ€æ¡†æ‰“å¼€ï¼‰ï¼›</li><li>åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼šå…¬å…±ä»£ç å•ç‹¬æ‰“åŒ…ï¼Œæ›´æ–°æ—¶ä»…å˜åŠ¨ä¸šåŠ¡ä»£ç ã€‚</li></ul></li></ul><blockquote><p>âœ… <strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼šå‡å°‘åˆå§‹åŠ è½½ä½“ç§¯ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼ˆå°¤å…¶ç§»åŠ¨ç«¯/å¼±ç½‘ç¯å¢ƒï¼‰ã€‚</p></blockquote><hr><h3 id="äºŒã€code-splitting-çš„ä¸‰ç§ä¸»è¦æ–¹å¼" tabindex="-1">äºŒã€Code Splitting çš„ä¸‰ç§ä¸»è¦æ–¹å¼ <a class="header-anchor" href="#äºŒã€code-splitting-çš„ä¸‰ç§ä¸»è¦æ–¹å¼" aria-label="Permalink to â€œäºŒã€Code Splitting çš„ä¸‰ç§ä¸»è¦æ–¹å¼â€">â€‹</a></h3><h4 id="_1-å…¥å£èµ·ç‚¹-entry-points-â€”â€”-æ‰‹åŠ¨åˆ†å‰²" tabindex="-1">1. <strong>å…¥å£èµ·ç‚¹ï¼ˆEntry Pointsï¼‰</strong> â€”â€” æ‰‹åŠ¨åˆ†å‰² <a class="header-anchor" href="#_1-å…¥å£èµ·ç‚¹-entry-points-â€”â€”-æ‰‹åŠ¨åˆ†å‰²" aria-label="Permalink to â€œ1. å…¥å£èµ·ç‚¹ï¼ˆEntry Pointsï¼‰ â€”â€” æ‰‹åŠ¨åˆ†å‰²â€">â€‹</a></h4><ul><li><strong>åŸç†</strong>ï¼šé…ç½®å¤šä¸ª <code>entry</code>ï¼Œç”Ÿæˆå¤šä¸ª bundleã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šæ— æ³•è‡ªåŠ¨æå–å…¬å…±ä¾èµ–ï¼Œæ˜“å¯¼è‡´é‡å¤ä»£ç ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  entry: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/app.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vendor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/vendor.js&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ‰‹åŠ¨åˆ†ç¦»ç¬¬ä¸‰æ–¹åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="_2-splitchunksplugin-æ¨è-â€”â€”-è‡ªåŠ¨åˆ†å‰²" tabindex="-1">2. <strong>SplitChunksPluginï¼ˆæ¨èï¼‰</strong> â€”â€” è‡ªåŠ¨åˆ†å‰² <a class="header-anchor" href="#_2-splitchunksplugin-æ¨è-â€”â€”-è‡ªåŠ¨åˆ†å‰²" aria-label="Permalink to â€œ2. SplitChunksPluginï¼ˆæ¨èï¼‰ â€”â€” è‡ªåŠ¨åˆ†å‰²â€">â€‹</a></h4><ul><li><strong>åŸç†</strong>ï¼šWebpack 5 å†…ç½®æ’ä»¶ï¼Œ<strong>è‡ªåŠ¨æå–å…¬å…±ä»£ç </strong>ï¼ˆå¦‚ node_modulesï¼‰ã€‚</li><li><strong>é»˜è®¤è¡Œä¸º</strong>ï¼ˆ<code>optimization.splitChunks</code>ï¼‰ï¼š <ul><li>åˆ†ç¦» <code>node_modules</code> ä¸­çš„ä»£ç ï¼›</li><li>å¤§äº 20KB çš„ chunkï¼›</li><li>å¹¶è¡Œè¯·æ±‚ â‰¤ 30 ä¸ªã€‚</li></ul></li><li><strong>è‡ªå®šä¹‰é…ç½®</strong>ï¼š</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimization: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    splitChunks: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯¹æ‰€æœ‰ chunk ç”Ÿæ•ˆï¼ˆasync / initialï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      cacheGroups: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æå–ç¬¬ä¸‰æ–¹åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        vendor: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vendors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æå–å…¬å…±ä¸šåŠ¡ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        common: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          minChunks: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¢«è‡³å°‘ 2 ä¸ª chunk å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;common&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>ğŸ’¡ <strong>ç»“æœ</strong>ï¼šç”Ÿæˆ <code>app.js</code> + <code>vendors.js</code> + <code>common.js</code>ï¼Œé¿å…é‡å¤æ‰“åŒ…ã€‚</p></blockquote><h4 id="_3-åŠ¨æ€å¯¼å…¥-dynamic-imports-â€”â€”-æŒ‰éœ€åŠ è½½" tabindex="-1">3. <strong>åŠ¨æ€å¯¼å…¥ï¼ˆDynamic Importsï¼‰</strong> â€”â€” æŒ‰éœ€åŠ è½½ <a class="header-anchor" href="#_3-åŠ¨æ€å¯¼å…¥-dynamic-imports-â€”â€”-æŒ‰éœ€åŠ è½½" aria-label="Permalink to â€œ3. åŠ¨æ€å¯¼å…¥ï¼ˆDynamic Importsï¼‰ â€”â€” æŒ‰éœ€åŠ è½½â€">â€‹</a></h4><ul><li><strong>åŸç†</strong>ï¼šä½¿ç”¨ <code>import()</code> è¯­æ³•ï¼ˆç¬¦åˆ ECMAScript ææ¡ˆï¼‰ï¼Œ<strong>è¿è¡Œæ—¶åŠ¨æ€åŠ è½½æ¨¡å—</strong>ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š <ul><li>è·¯ç”±æ‡’åŠ è½½ï¼ˆReact/Vueï¼‰ï¼›</li><li>åŠŸèƒ½æ€§ç»„ä»¶ï¼ˆå¦‚â€œå¯¼å‡ºä¸º PDFâ€æŒ‰é’®ç‚¹å‡»ååŠ è½½åº“ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·¯ç”±æ‡’åŠ è½½ï¼ˆReactï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./Home&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> About</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./About&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠŸèƒ½æ€§æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;btn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exportPDF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./pdfUtils&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  exportPDF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><blockquote><p>âœ… <strong>Webpack è‡ªåŠ¨ä¸ºæ¯ä¸ª <code>import()</code> åˆ›å»ºç‹¬ç«‹ chunk</strong>ï¼Œå‘½åé»˜è®¤ä¸º <code>[id].[contenthash].js</code>ã€‚</p></blockquote><hr><h3 id="ä¸‰ã€å®é™…æ•ˆæœå¯¹æ¯”" tabindex="-1">ä¸‰ã€å®é™…æ•ˆæœå¯¹æ¯” <a class="header-anchor" href="#ä¸‰ã€å®é™…æ•ˆæœå¯¹æ¯”" aria-label="Permalink to â€œä¸‰ã€å®é™…æ•ˆæœå¯¹æ¯”â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ¡ˆ</th><th>åˆå§‹åŠ è½½ä½“ç§¯</th><th>é¦–å±é€Ÿåº¦</th><th>ç¼“å­˜æ•ˆç‡</th></tr></thead><tbody><tr><td>å• Bundle</td><td>2.0 MB</td><td>æ…¢</td><td>ä½ï¼ˆä»»ä½•æ”¹åŠ¨å…¨å¤±æ•ˆï¼‰</td></tr><tr><td>Code Splitting</td><td>400 KB (é¦–å±) + æŒ‰éœ€åŠ è½½</td><td>å¿«</td><td>é«˜ï¼ˆvendors.js é•¿æœŸç¼“å­˜ï¼‰</td></tr></tbody></table><hr><h3 id="å››ã€æœ€ä½³å®è·µ" tabindex="-1">å››ã€æœ€ä½³å®è·µ <a class="header-anchor" href="#å››ã€æœ€ä½³å®è·µ" aria-label="Permalink to â€œå››ã€æœ€ä½³å®è·µâ€">â€‹</a></h3><ol><li><p><strong>ä¼˜å…ˆä½¿ç”¨ <code>SplitChunksPlugin</code></strong><br> â†’ è‡ªåŠ¨ä¼˜åŒ–å…¬å…±ä»£ç ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ã€‚</p></li><li><p><strong>è·¯ç”±çº§æ‡’åŠ è½½</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./views/Home.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// React + Suspense</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./Profile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div></li><li><p><strong>é¿å…è¿‡åº¦åˆ†å‰²</strong></p><ul><li>è¿‡å¤šå° chunk ä¼šå¢åŠ  HTTP è¯·æ±‚ï¼ˆHTTP/1.1 ä¸‹å½±å“å¤§ï¼ŒHTTP/2 å½±å“å°ï¼‰ï¼›</li><li>Webpack é»˜è®¤é™åˆ¶ï¼šæœ€å° chunk 20KBï¼Œæœ€å¤šå¹¶è¡Œè¯·æ±‚ 30 ä¸ªã€‚</li></ul></li><li><p><strong>é¢„åŠ è½½å…³é”®èµ„æºï¼ˆå¯é€‰ï¼‰</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¢„åŠ è½½ï¼ˆæµè§ˆå™¨ç©ºé—²æ—¶åŠ è½½ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackPreload: true */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./critical-component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li></ol><hr><h3 id="äº”ã€ä¸€å¥è¯æ€»ç»“-1" tabindex="-1">äº”ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#äº”ã€ä¸€å¥è¯æ€»ç»“-1" aria-label="Permalink to â€œäº”ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Code Splitting é€šè¿‡â€œæ‹†åŒ… + æŒ‰éœ€åŠ è½½â€ï¼Œè®©åº”ç”¨é¦–å±æ›´å¿«ã€ç¼“å­˜æ›´é«˜æ•ˆâ€”â€”å®ƒæ˜¯ç°ä»£å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„åŸºçŸ³æŠ€æœ¯ã€‚</strong></p></blockquote><h2 id="webpackçš„source-mapæ˜¯ä»€ä¹ˆ-å¦‚ä½•é…ç½®ç”Ÿæˆsource-map" tabindex="-1">Webpackçš„Source Mapæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é…ç½®ç”ŸæˆSource Mapï¼Ÿ <a class="header-anchor" href="#webpackçš„source-mapæ˜¯ä»€ä¹ˆ-å¦‚ä½•é…ç½®ç”Ÿæˆsource-map" aria-label="Permalink to â€œWebpackçš„Source Mapæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é…ç½®ç”ŸæˆSource Mapï¼Ÿâ€">â€‹</a></h2><p><strong>Source Mapï¼ˆæºæ˜ å°„ï¼‰</strong> æ˜¯ Webpack æä¾›çš„ä¸€ç§è°ƒè¯•å·¥å…·ï¼Œç”¨äºå°†<strong>å‹ç¼©/ç¼–è¯‘åçš„ä»£ç </strong>ï¼ˆå¦‚ bundle.jsï¼‰<strong>æ˜ å°„å›åŸå§‹æºä»£ç </strong>ï¼ˆå¦‚ src/index.jsï¼‰ï¼Œä½¿å¼€å‘è€…èƒ½åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è°ƒè¯•æœªå‹ç¼©ã€æœªè½¬æ¢çš„æºç ã€‚</p><hr><h3 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-source-map" tabindex="-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Source Mapï¼Ÿ <a class="header-anchor" href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-source-map" aria-label="Permalink to â€œä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Source Mapï¼Ÿâ€">â€‹</a></h3><ul><li><strong>é—®é¢˜</strong>ï¼šWebpack æ‰“åŒ…åä»£ç è¢«å‹ç¼©ã€æ··æ·†ã€åˆå¹¶ï¼ˆå¦‚ ES6 â†’ ES5ã€TypeScript â†’ JSï¼‰ï¼Œé”™è¯¯å †æ ˆéš¾ä»¥å®šä½ï¼›</li><li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šSource Map ç”Ÿæˆä¸€ä¸ª <code>.map</code> æ–‡ä»¶ï¼Œè®°å½•<strong>è½¬æ¢åä»£ç  â†” åŸå§‹ä»£ç </strong>çš„æ˜ å°„å…³ç³»ï¼›</li><li><strong>æ•ˆæœ</strong>ï¼šåœ¨æµè§ˆå™¨ DevTools ä¸­ï¼š <ul><li>æ–­ç‚¹å¯æ‰“åœ¨åŸå§‹ <code>.ts</code>/<code>.jsx</code> æ–‡ä»¶ä¸Šï¼›</li><li>é”™è¯¯å †æ ˆæ˜¾ç¤ºåŸå§‹æ–‡ä»¶è¡Œå·ã€‚</li></ul></li></ul><blockquote><p>âœ… <strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šæå‡å¼€å‘è°ƒè¯•æ•ˆç‡ï¼Œå°¤å…¶åœ¨ç”Ÿäº§ç¯å¢ƒæ’æŸ¥é—®é¢˜æ—¶è‡³å…³é‡è¦ã€‚</p></blockquote><hr><h3 id="äºŒã€å¦‚ä½•é…ç½®-source-map" tabindex="-1">äºŒã€å¦‚ä½•é…ç½® Source Mapï¼Ÿ <a class="header-anchor" href="#äºŒã€å¦‚ä½•é…ç½®-source-map" aria-label="Permalink to â€œäºŒã€å¦‚ä½•é…ç½® Source Mapï¼Ÿâ€">â€‹</a></h3><p>é€šè¿‡ <code>devtool</code> é…ç½®é¡¹æ§åˆ¶ç”Ÿæˆæ–¹å¼ï¼ˆ<strong>ä¸åŒå€¼å½±å“æ„å»ºé€Ÿåº¦ &amp; è°ƒè¯•ä½“éªŒ</strong>ï¼‰ï¼š</p><h4 id="_1-å¼€å‘ç¯å¢ƒæ¨è" tabindex="-1">1. <strong>å¼€å‘ç¯å¢ƒæ¨è</strong> <a class="header-anchor" href="#_1-å¼€å‘ç¯å¢ƒæ¨è" aria-label="Permalink to â€œ1. å¼€å‘ç¯å¢ƒæ¨èâ€">â€‹</a></h4><table tabindex="0"><thead><tr><th>é…ç½®å€¼</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>&#39;eval&#39;</code></td><td>æ¯ä¸ªæ¨¡å—ç”¨ <code>eval()</code> æ‰§è¡Œï¼Œæœ€å¿«ä½†åŠŸèƒ½å¼±</td><td>å¿«é€Ÿè¿­ä»£ï¼ˆä¸æ”¯æŒåˆ—æ˜ å°„ï¼‰</td></tr><tr><td><code>&#39;cheap-module-eval-source-map&#39;</code></td><td><strong>æœ€ä½³å¹³è¡¡</strong>ï¼šåŒ…å« loader è½¬æ¢å‰çš„æºç ï¼Œè¾ƒå¿«</td><td>React/Vue å¼€å‘</td></tr><tr><td><code>&#39;eval-cheap-module-source-map&#39;</code></td><td>åŒä¸Šï¼Œä½†ä»…è¡Œæ˜ å°„ï¼ˆæ— åˆ—æ˜ å°„ï¼‰</td><td>å¯¹é€Ÿåº¦è¦æ±‚æé«˜</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js (å¼€å‘ç¯å¢ƒ)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  devtool: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cheap-module-eval-source-map&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¨è</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="_2-ç”Ÿäº§ç¯å¢ƒæ¨è" tabindex="-1">2. <strong>ç”Ÿäº§ç¯å¢ƒæ¨è</strong> <a class="header-anchor" href="#_2-ç”Ÿäº§ç¯å¢ƒæ¨è" aria-label="Permalink to â€œ2. ç”Ÿäº§ç¯å¢ƒæ¨èâ€">â€‹</a></h4><table tabindex="0"><thead><tr><th>é…ç½®å€¼</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>&#39;source-map&#39;</code></td><td>ç”Ÿæˆç‹¬ç«‹ <code>.map</code> æ–‡ä»¶ï¼Œæœ€å®Œæ•´ä½†æœ€æ…¢</td><td>éœ€è¦ç²¾ç¡®é”™è¯¯è¿½è¸ª</td></tr><tr><td><code>&#39;hidden-source-map&#39;</code></td><td>ç”Ÿæˆ <code>.map</code> ä½†ä¸å…³è” bundleï¼ˆéœ€æ‰‹åŠ¨åŠ è½½ï¼‰</td><td>å®‰å…¨æ•æ„Ÿé¡¹ç›®</td></tr><tr><td><strong>ä¸ç”Ÿæˆ</strong></td><td>æ—  <code>.map</code> æ–‡ä»¶</td><td>è¿½æ±‚æè‡´ä½“ç§¯ï¼ˆä¸æ¨èï¼‰</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js (ç”Ÿäº§ç¯å¢ƒ)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  devtool: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source-map&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¨èï¼ˆé…åˆé”™è¯¯ç›‘æ§ç³»ç»Ÿï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>ç”Ÿäº§ç¯å¢ƒæ³¨æ„</strong>ï¼š</p><ul><li>é¿å…ä½¿ç”¨ <code>inline</code>ï¼ˆå¦‚ <code>inline-source-map</code>ï¼‰ï¼Œä¼šå¢å¤§ bundle ä½“ç§¯ï¼›</li><li>æ•æ„Ÿé¡¹ç›®å¯ä¸Šä¼  <code>.map</code> åˆ°ç§æœ‰æœåŠ¡å™¨ï¼Œä¸å…¬å¼€æš´éœ²ã€‚</li></ul></blockquote><hr><h3 id="ä¸‰ã€source-map-ç±»å‹è¯¦è§£" tabindex="-1">ä¸‰ã€Source Map ç±»å‹è¯¦è§£ <a class="header-anchor" href="#ä¸‰ã€source-map-ç±»å‹è¯¦è§£" aria-label="Permalink to â€œä¸‰ã€Source Map ç±»å‹è¯¦è§£â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é…ç½®å€¼</th><th>æ˜¯å¦ç”Ÿæˆ <code>.map</code> æ–‡ä»¶</th><th>æ˜¯å¦å†…è”åˆ° bundle</th><th>åŒ…å« loader è½¬æ¢å‰æºç </th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td><code>eval</code></td><td>âŒ</td><td>âœ…ï¼ˆ<code>eval</code> ä¸­ï¼‰</td><td>âŒ</td><td>âš¡ï¸ æå¿«</td></tr><tr><td><code>cheap-source-map</code></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>å¿«</td></tr><tr><td><code>cheap-module-source-map</code></td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>ä¸­</td></tr><tr><td><code>source-map</code></td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>ğŸ¢ æ…¢</td></tr><tr><td><code>inline-source-map</code></td><td>âŒ</td><td>âœ…ï¼ˆBase64ï¼‰</td><td>âœ…</td><td>æ…¢ + å¢å¤§ä½“ç§¯</td></tr></tbody></table><blockquote><p>ğŸ”‘ <strong>å…³é”®æœ¯è¯­</strong>ï¼š</p><ul><li><strong><code>cheap</code></strong>ï¼šåªæ˜ å°„<strong>è¡Œå·</strong>ï¼ˆæ— åˆ—å·ï¼‰ï¼Œé€Ÿåº¦æ›´å¿«ï¼›</li><li><strong><code>module</code></strong>ï¼šåŒ…å« <strong>loader è½¬æ¢å‰çš„æºç </strong>ï¼ˆå¦‚ TypeScript/JSX åŸå§‹ä»£ç ï¼‰ï¼›</li><li><strong><code>eval</code></strong>ï¼šç”¨ <code>eval()</code> æ‰§è¡Œä»£ç ï¼Œé™„åŠ  <code>//# sourceURL</code> å®ç°æ˜ å°„ã€‚</li></ul></blockquote><hr><h3 id="å››ã€å®é™…æ•ˆæœæ¼”ç¤º" tabindex="-1">å››ã€å®é™…æ•ˆæœæ¼”ç¤º <a class="header-anchor" href="#å››ã€å®é™…æ•ˆæœæ¼”ç¤º" aria-label="Permalink to â€œå››ã€å®é™…æ•ˆæœæ¼”ç¤ºâ€">â€‹</a></h3><h4 id="_1-æœªå¯ç”¨-source-map" tabindex="-1">1. <strong>æœªå¯ç”¨ Source Map</strong> <a class="header-anchor" href="#_1-æœªå¯ç”¨-source-map" aria-label="Permalink to â€œ1. æœªå¯ç”¨ Source Mapâ€">â€‹</a></h4><ul><li>é”™è¯¯å †æ ˆï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bundle.js:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Uncaught </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReferenceError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: x is not defined</span></span></code></pre></div></li><li>DevTools åªèƒ½æŸ¥çœ‹å‹ç¼©åçš„ <code>bundle.js</code>ã€‚</li></ul><h4 id="_2-å¯ç”¨-source-map-å" tabindex="-1">2. <strong>å¯ç”¨ Source Map å</strong> <a class="header-anchor" href="#_2-å¯ç”¨-source-map-å" aria-label="Permalink to â€œ2. å¯ç”¨ Source Map åâ€">â€‹</a></h4><ul><li>é”™è¯¯å †æ ˆï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utils.js:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Uncaught </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReferenceError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: x is not defined</span></span></code></pre></div></li><li>DevTools ç›´æ¥æ˜¾ç¤º <code>src/utils.js</code> åŸå§‹ä»£ç ï¼Œå¯æ‰“æ–­ç‚¹è°ƒè¯•ã€‚</li></ul><hr><h3 id="äº”ã€é«˜çº§é…ç½®-æŒ‰éœ€ç”Ÿæˆ" tabindex="-1">äº”ã€é«˜çº§é…ç½®ï¼ˆæŒ‰éœ€ç”Ÿæˆï¼‰ <a class="header-anchor" href="#äº”ã€é«˜çº§é…ç½®-æŒ‰éœ€ç”Ÿæˆ" aria-label="Permalink to â€œäº”ã€é«˜çº§é…ç½®ï¼ˆæŒ‰éœ€ç”Ÿæˆï¼‰â€">â€‹</a></h3><h4 id="_1-ä»…å¯¹ç‰¹å®šæ–‡ä»¶ç”Ÿæˆ-source-map" tabindex="-1">1. <strong>ä»…å¯¹ç‰¹å®šæ–‡ä»¶ç”Ÿæˆ Source Map</strong> <a class="header-anchor" href="#_1-ä»…å¯¹ç‰¹å®šæ–‡ä»¶ç”Ÿæˆ-source-map" aria-label="Permalink to â€œ1. ä»…å¯¹ç‰¹å®šæ–‡ä»¶ç”Ÿæˆ Source Mapâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ loader ä¸­è¦†ç›–å…¨å±€ devtool</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">js</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        use: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            loader: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;babel-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              sourceMaps: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å¼ºåˆ¶ Babel ç”Ÿæˆ Source Map</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="_2-nginx-é…ç½®ç”Ÿäº§ç¯å¢ƒ-source-map" tabindex="-1">2. <strong>Nginx é…ç½®ç”Ÿäº§ç¯å¢ƒ Source Map</strong> <a class="header-anchor" href="#_2-nginx-é…ç½®ç”Ÿäº§ç¯å¢ƒ-source-map" aria-label="Permalink to â€œ2. Nginx é…ç½®ç”Ÿäº§ç¯å¢ƒ Source Mapâ€">â€‹</a></h4><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»…å…è®¸å†…éƒ¨ IP è®¿é—® .map æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ~</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;"> \\.map$ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  allow </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">192.168.0.0/16;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  deny </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-3" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-3" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Source Map æ˜¯å¼€å‘è€…çš„â€œæ—¶å…‰æœºâ€â€”â€”å®ƒè®©å‹ç¼©æ··æ·†çš„ç”Ÿäº§ä»£ç â€œè¿˜åŸâ€ä¸ºå¯è¯»çš„æºç ã€‚å¼€å‘ç¯å¢ƒç”¨ <code>cheap-module-eval-source-map</code> å¹³è¡¡é€Ÿåº¦ä¸ä½“éªŒï¼Œç”Ÿäº§ç¯å¢ƒç”¨ <code>source-map</code> ç²¾å‡†å®šä½é”™è¯¯ã€‚</strong></p></blockquote><h2 id="webpackçš„tree-shakingåŸç†" tabindex="-1">Webpackçš„Tree ShakingåŸç† <a class="header-anchor" href="#webpackçš„tree-shakingåŸç†" aria-label="Permalink to â€œWebpackçš„Tree ShakingåŸç†â€">â€‹</a></h2><p><strong>Tree Shakingï¼ˆæ‘‡æ ‘ä¼˜åŒ–ï¼‰</strong> æ˜¯ Webpack æä¾›çš„ä¸€ç§<strong>æ­»ä»£ç æ¶ˆé™¤ï¼ˆDead Code Eliminationï¼‰</strong> æŠ€æœ¯ï¼Œç”¨äºåœ¨æ„å»ºè¿‡ç¨‹ä¸­<strong>è‡ªåŠ¨ç§»é™¤æœªè¢«ä½¿ç”¨çš„ JavaScript ä»£ç </strong>ï¼Œä»è€Œå‡å°æœ€ç»ˆ bundle ä½“ç§¯ã€‚å®ƒçš„åå­—æ¥æºäºâ€œæ‘‡æ™ƒä¸€æ£µæ ‘ï¼Œæ¯å¶ï¼ˆæ— ç”¨ä»£ç ï¼‰è‡ªç„¶æ‰è½â€ã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒå‰æ-å¿…é¡»ä½¿ç”¨-es-module-esm" tabindex="-1">ä¸€ã€æ ¸å¿ƒå‰æï¼šå¿…é¡»ä½¿ç”¨ ES Moduleï¼ˆESMï¼‰ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒå‰æ-å¿…é¡»ä½¿ç”¨-es-module-esm" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒå‰æï¼šå¿…é¡»ä½¿ç”¨ ES Moduleï¼ˆESMï¼‰â€">â€‹</a></h3><p>Tree Shaking <strong>ä»…å¯¹ ES6 æ¨¡å—ï¼ˆ<code>import</code>/<code>export</code>ï¼‰ç”Ÿæ•ˆ</strong>ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><table tabindex="0"><thead><tr><th>æ¨¡å—ç³»ç»Ÿ</th><th>ç‰¹æ€§</th><th>æ˜¯å¦æ”¯æŒ Tree Shaking</th></tr></thead><tbody><tr><td><strong>ES Module (ESM)</strong></td><td>é™æ€ç»“æ„ï¼ˆç¼–è¯‘æ—¶ç¡®å®šä¾èµ–ï¼‰</td><td>âœ… æ”¯æŒ</td></tr><tr><td>CommonJS (<code>require</code>)</td><td>åŠ¨æ€ç»“æ„ï¼ˆè¿è¡Œæ—¶ç¡®å®šä¾èµ–ï¼‰</td><td>âŒ ä¸æ”¯æŒ</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>å…³é”®åŒºåˆ«</strong>ï¼š</p><ul><li>ESM çš„ <code>import</code> å¿…é¡»åœ¨é¡¶å±‚é™æ€å£°æ˜ï¼ŒWebpack èƒ½åœ¨<strong>ç¼–è¯‘æ—¶åˆ†æä¾èµ–å…³ç³»</strong>ï¼›</li><li>CommonJS çš„ <code>require()</code> å¯åœ¨å‡½æ•°å†…åŠ¨æ€è°ƒç”¨ï¼ŒWebpack æ— æ³•ç¡®å®šæ˜¯å¦ä¼šè¢«æ‰§è¡Œã€‚</li></ul></blockquote><h4 id="ç¤ºä¾‹-å¯è¢«-tree-shaking-çš„ä»£ç " tabindex="-1">ç¤ºä¾‹ï¼šå¯è¢« Tree Shaking çš„ä»£ç  <a class="header-anchor" href="#ç¤ºä¾‹-å¯è¢«-tree-shaking-çš„ä»£ç " aria-label="Permalink to â€œç¤ºä¾‹ï¼šå¯è¢« Tree Shaking çš„ä»£ç â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// math.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multiply</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// index.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { add } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./math.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åªå¼•å…¥ add</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// multiply ä¼šè¢«ç§»é™¤ï¼</span></span></code></pre></div><h4 id="åä¾‹-æ— æ³•-tree-shaking" tabindex="-1">åä¾‹ï¼šæ— æ³• Tree Shaking <a class="header-anchor" href="#åä¾‹-æ— æ³•-tree-shaking" aria-label="Permalink to â€œåä¾‹ï¼šæ— æ³• Tree Shakingâ€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ CommonJS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./math.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Webpack æ— æ³•ç¡®å®šæ˜¯å¦ç”¨åˆ° multiply</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ¨æ€å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (condition) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./math.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿è¡Œæ—¶åŠ è½½ï¼Œæ— æ³•åˆ†æ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="äºŒã€tree-shaking-å·¥ä½œåŸç†-webpack-5" tabindex="-1">äºŒã€Tree Shaking å·¥ä½œåŸç†ï¼ˆWebpack 5ï¼‰ <a class="header-anchor" href="#äºŒã€tree-shaking-å·¥ä½œåŸç†-webpack-5" aria-label="Permalink to â€œäºŒã€Tree Shaking å·¥ä½œåŸç†ï¼ˆWebpack 5ï¼‰â€">â€‹</a></h3><h4 id="æ­¥éª¤-1-æ„å»ºæ¨¡å—ä¾èµ–å›¾-module-graph" tabindex="-1">æ­¥éª¤ 1ï¼šæ„å»ºæ¨¡å—ä¾èµ–å›¾ï¼ˆModule Graphï¼‰ <a class="header-anchor" href="#æ­¥éª¤-1-æ„å»ºæ¨¡å—ä¾èµ–å›¾-module-graph" aria-label="Permalink to â€œæ­¥éª¤ 1ï¼šæ„å»ºæ¨¡å—ä¾èµ–å›¾ï¼ˆModule Graphï¼‰â€">â€‹</a></h4><ul><li>Webpack è§£ææ‰€æœ‰ <code>import</code>/<code>export</code>ï¼Œå»ºç«‹æ¨¡å—é—´çš„å¼•ç”¨å…³ç³»ï¼›</li><li>æ ‡è®°æ¯ä¸ªå¯¼å‡ºé¡¹ï¼ˆå¦‚ <code>add</code>, <code>multiply</code>ï¼‰çš„<strong>ä½¿ç”¨æƒ…å†µ</strong>ã€‚</li></ul><h4 id="æ­¥éª¤-2-æ ‡è®°æœªä½¿ç”¨å¯¼å‡º-unused-exports" tabindex="-1">æ­¥éª¤ 2ï¼šæ ‡è®°æœªä½¿ç”¨å¯¼å‡ºï¼ˆUnused Exportsï¼‰ <a class="header-anchor" href="#æ­¥éª¤-2-æ ‡è®°æœªä½¿ç”¨å¯¼å‡º-unused-exports" aria-label="Permalink to â€œæ­¥éª¤ 2ï¼šæ ‡è®°æœªä½¿ç”¨å¯¼å‡ºï¼ˆUnused Exportsï¼‰â€">â€‹</a></h4><ul><li>ä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œé€’å½’éå†æ‰€æœ‰<strong>è¢«å¼•ç”¨çš„å¯¼å‡º</strong>ï¼›</li><li>æœªè¢«ä»»ä½•æ¨¡å—å¼•ç”¨çš„å¯¼å‡ºæ ‡è®°ä¸º <strong>&quot;unused harmony export&quot;</strong>ã€‚</li></ul><h4 id="æ­¥éª¤-3-å‹ç¼©é˜¶æ®µç§»é™¤æ­»ä»£ç " tabindex="-1">æ­¥éª¤ 3ï¼šå‹ç¼©é˜¶æ®µç§»é™¤æ­»ä»£ç  <a class="header-anchor" href="#æ­¥éª¤-3-å‹ç¼©é˜¶æ®µç§»é™¤æ­»ä»£ç " aria-label="Permalink to â€œæ­¥éª¤ 3ï¼šå‹ç¼©é˜¶æ®µç§»é™¤æ­»ä»£ç â€">â€‹</a></h4><ul><li>Webpack æœ¬èº«åªåš<strong>æ ‡è®°</strong>ï¼Œå®é™…åˆ é™¤ç”± <strong>Terserï¼ˆJS å‹ç¼©å™¨ï¼‰</strong> å®Œæˆï¼›</li><li>Terser æ ¹æ®æ ‡è®°ç§»é™¤æœªä½¿ç”¨çš„å‡½æ•°/å˜é‡ã€‚</li></ul><blockquote><p>ğŸ”‘ <strong>å…³é”®ç‚¹</strong>ï¼š</p><ul><li>Webpack è´Ÿè´£<strong>ä¾èµ–åˆ†æ</strong>ï¼›</li><li>Terser è´Ÿè´£<strong>ä»£ç åˆ é™¤</strong>ï¼ˆéœ€å¯ç”¨ <code>minimize: true</code>ï¼‰ã€‚</li></ul></blockquote><hr><h3 id="ä¸‰ã€å¦‚ä½•ç¡®ä¿-tree-shaking-ç”Ÿæ•ˆ" tabindex="-1">ä¸‰ã€å¦‚ä½•ç¡®ä¿ Tree Shaking ç”Ÿæ•ˆï¼Ÿ <a class="header-anchor" href="#ä¸‰ã€å¦‚ä½•ç¡®ä¿-tree-shaking-ç”Ÿæ•ˆ" aria-label="Permalink to â€œä¸‰ã€å¦‚ä½•ç¡®ä¿ Tree Shaking ç”Ÿæ•ˆï¼Ÿâ€">â€‹</a></h3><h4 id="_1-ä½¿ç”¨-es6-æ¨¡å—è¯­æ³•" tabindex="-1">1. <strong>ä½¿ç”¨ ES6 æ¨¡å—è¯­æ³•</strong> <a class="header-anchor" href="#_1-ä½¿ç”¨-es6-æ¨¡å—è¯­æ³•" aria-label="Permalink to â€œ1. ä½¿ç”¨ ES6 æ¨¡å—è¯­æ³•â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { debounce } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash-es&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨æ„æ˜¯ lodash-esï¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ é”™è¯¯ï¼ˆCommonJSï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">debounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>ç¬¬ä¸‰æ–¹åº“æ³¨æ„</strong>ï¼š</p><ul><li>ä¼˜å…ˆé€‰æ‹©æä¾› ESM ç‰ˆæœ¬çš„åº“ï¼ˆå¦‚ <code>lodash-es</code> è€Œé <code>lodash</code>ï¼‰ï¼›</li><li>è‹¥åº“åªæœ‰ CommonJSï¼Œå¯é€šè¿‡ <code>babel-plugin-transform-imports</code> è½¬æ¢ã€‚</li></ul></blockquote><h4 id="_2-é¿å…å‰¯ä½œç”¨-side-effects" tabindex="-1">2. <strong>é¿å…å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰</strong> <a class="header-anchor" href="#_2-é¿å…å‰¯ä½œç”¨-side-effects" aria-label="Permalink to â€œ2. é¿å…å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰â€">â€‹</a></h4><ul><li>å¦‚æœæ¨¡å—æœ‰<strong>å‰¯ä½œç”¨</strong>ï¼ˆå¦‚ç›´æ¥ä¿®æ”¹å…¨å±€å˜é‡ï¼‰ï¼ŒWebpack ä¼šä¿å®ˆä¿ç•™æ•´ä¸ªæ¨¡å—ï¼›</li><li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨ <code>package.json</code> ä¸­å£°æ˜æ— å‰¯ä½œç”¨ï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sideEffects&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>æˆ–æŒ‡å®šæœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶ï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sideEffects&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;./src/polyfill.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿ç•™æ­¤æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;*.css&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              // ä¿ç•™ CSS æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_3-ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨å¯ç”¨" tabindex="-1">3. <strong>ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨å¯ç”¨</strong> <a class="header-anchor" href="#_3-ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨å¯ç”¨" aria-label="Permalink to â€œ3. ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨å¯ç”¨â€">â€‹</a></h4><ul><li>Webpack çš„ <code>mode: &#39;production&#39;</code> ä¼šè‡ªåŠ¨ï¼š <ul><li>å¯ç”¨ <code>optimization.usedExports</code>ï¼ˆæ ‡è®°æœªä½¿ç”¨å¯¼å‡ºï¼‰ï¼›</li><li>å¯ç”¨ Terser å‹ç¼©ï¼ˆåˆ é™¤æ­»ä»£ç ï¼‰ã€‚</li></ul></li></ul><blockquote><p>âœ… <strong>æ— éœ€é¢å¤–é…ç½®</strong>ï¼Œä½†éœ€ç¡®ä¿ä»£ç ç¬¦åˆ ESM è§„èŒƒã€‚</p></blockquote><hr><h3 id="å››ã€éªŒè¯-tree-shaking-æ˜¯å¦ç”Ÿæ•ˆ" tabindex="-1">å››ã€éªŒè¯ Tree Shaking æ˜¯å¦ç”Ÿæ•ˆ <a class="header-anchor" href="#å››ã€éªŒè¯-tree-shaking-æ˜¯å¦ç”Ÿæ•ˆ" aria-label="Permalink to â€œå››ã€éªŒè¯ Tree Shaking æ˜¯å¦ç”Ÿæ•ˆâ€">â€‹</a></h3><h4 id="æ–¹æ³•-1-æŸ¥çœ‹æ‰“åŒ…åçš„ä»£ç " tabindex="-1">æ–¹æ³• 1ï¼šæŸ¥çœ‹æ‰“åŒ…åçš„ä»£ç  <a class="header-anchor" href="#æ–¹æ³•-1-æŸ¥çœ‹æ‰“åŒ…åçš„ä»£ç " aria-label="Permalink to â€œæ–¹æ³• 1ï¼šæŸ¥çœ‹æ‰“åŒ…åçš„ä»£ç â€">â€‹</a></h4><ul><li>æœªè¢«ä½¿ç”¨çš„å‡½æ•°<strong>å®Œå…¨æ¶ˆå¤±</strong>ï¼ˆè€Œéæ³¨é‡Šæ‰ï¼‰ã€‚</li></ul><h4 id="æ–¹æ³•-2-ä½¿ç”¨-webpack-bundle-analyzer" tabindex="-1">æ–¹æ³• 2ï¼šä½¿ç”¨ <code>webpack-bundle-analyzer</code> <a class="header-anchor" href="#æ–¹æ³•-2-ä½¿ç”¨-webpack-bundle-analyzer" aria-label="Permalink to â€œæ–¹æ³• 2ï¼šä½¿ç”¨ webpack-bundle-analyzerâ€">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack-bundle-analyzer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/main.js</span></span></code></pre></div><ul><li>å¯¹æ¯”å¼€å¯/å…³é—­ Tree Shaking çš„ bundle ä½“ç§¯ã€‚</li></ul><h4 id="æ–¹æ³•-3-webpack-æ—¥å¿—" tabindex="-1">æ–¹æ³• 3ï¼šWebpack æ—¥å¿— <a class="header-anchor" href="#æ–¹æ³•-3-webpack-æ—¥å¿—" aria-label="Permalink to â€œæ–¹æ³• 3ï¼šWebpack æ—¥å¿—â€">â€‹</a></h4><ul><li>æ·»åŠ  <code>--stats-verbose</code> æŸ¥çœ‹æ ‡è®°ä¿¡æ¯ï¼š<div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">webpack</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode=production</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --stats-verbose</span></span></code></pre></div>è¾“å‡ºç¤ºä¾‹ï¼š<div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>[./src/math.js] 120 bytes {0} [built]</span></span>
<span class="line"><span>    harmony export [used] add</span></span>
<span class="line"><span>    harmony export [unused] multiply  // â† æ˜ç¡®æ ‡è®° unused</span></span></code></pre></div></li></ul><hr><h3 id="äº”ã€å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ" tabindex="-1">äº”ã€å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#äº”ã€å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to â€œäº”ã€å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>æ•´ä¸ªåº“è¢«æ‰“åŒ…</strong></td><td>åº“ä½¿ç”¨ CommonJS</td><td>æ”¹ç”¨ ESM ç‰ˆæœ¬ï¼ˆå¦‚ <code>lodash-es</code>ï¼‰</td></tr><tr><td><strong>æœªä½¿ç”¨å‡½æ•°ä»å­˜åœ¨</strong></td><td>æ¨¡å—æœ‰å‰¯ä½œç”¨</td><td>åœ¨ <code>package.json</code> è®¾ç½® <code>&quot;sideEffects&quot;: false</code></td></tr><tr><td><strong>å¼€å‘ç¯å¢ƒæœªç”Ÿæ•ˆ</strong></td><td>æœªå‹ç¼©ä»£ç </td><td>Tree Shaking ä»…åœ¨ç”Ÿäº§æ¨¡å¼ç”Ÿæ•ˆï¼ˆéœ€ Terserï¼‰</td></tr><tr><td><strong>åŠ¨æ€è®¿é—®å¯¼å‡º</strong></td><td><code>obj[methodName]()</code></td><td>é¿å…åŠ¨æ€è°ƒç”¨ï¼Œæ”¹ç”¨é™æ€å¼•ç”¨</td></tr></tbody></table><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-4" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-4" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Tree Shaking ä¾èµ– ES Module çš„é™æ€åˆ†æèƒ½åŠ›ï¼Œåœ¨ç”Ÿäº§æ„å»ºä¸­è‡ªåŠ¨ç§»é™¤æœªå¼•ç”¨çš„ä»£ç â€”â€”å®ƒæ˜¯ç°ä»£å‰ç«¯åº”ç”¨â€œç˜¦èº«â€çš„å…³é”®æŠ€æœ¯ï¼Œä½†éœ€å¼€å‘è€…è§„èŒƒä½¿ç”¨ ESM å¹¶å£°æ˜æ— å‰¯ä½œç”¨ã€‚</strong></p></blockquote><h2 id="å¦‚ä½•æé«˜webpackçš„æ‰“åŒ…é€Ÿåº¦" tabindex="-1">å¦‚ä½•æé«˜webpackçš„æ‰“åŒ…é€Ÿåº¦ <a class="header-anchor" href="#å¦‚ä½•æé«˜webpackçš„æ‰“åŒ…é€Ÿåº¦" aria-label="Permalink to â€œå¦‚ä½•æé«˜webpackçš„æ‰“åŒ…é€Ÿåº¦â€">â€‹</a></h2><p>æé«˜ Webpack æ‰“åŒ…é€Ÿåº¦æ˜¯å‰ç«¯å·¥ç¨‹åŒ–ä¸­çš„æ ¸å¿ƒä¼˜åŒ–ç‚¹ã€‚ä»¥ä¸‹ä» <strong>é…ç½®ä¼˜åŒ–ã€å·¥å…·å‡çº§ã€ç¼“å­˜ç­–ç•¥ã€æ¶æ„è°ƒæ•´</strong> å››ä¸ªç»´åº¦ï¼Œæä¾› <strong>10+ é¡¹å®æˆ˜æœ‰æ•ˆçš„æé€Ÿæ–¹æ¡ˆ</strong>ï¼ˆåŸºäº Webpack 5ï¼‰ï¼š</p><hr><h3 id="ä¸€ã€åŸºç¡€é…ç½®ä¼˜åŒ–-ç«‹ç«¿è§å½±" tabindex="-1">ä¸€ã€åŸºç¡€é…ç½®ä¼˜åŒ–ï¼ˆç«‹ç«¿è§å½±ï¼‰ <a class="header-anchor" href="#ä¸€ã€åŸºç¡€é…ç½®ä¼˜åŒ–-ç«‹ç«¿è§å½±" aria-label="Permalink to â€œä¸€ã€åŸºç¡€é…ç½®ä¼˜åŒ–ï¼ˆç«‹ç«¿è§å½±ï¼‰â€">â€‹</a></h3><h4 id="_1-å‡çº§åˆ°-webpack-5-node-js-16" tabindex="-1">1. <strong>å‡çº§åˆ° Webpack 5 + Node.js 16+</strong> <a class="header-anchor" href="#_1-å‡çº§åˆ°-webpack-5-node-js-16" aria-label="Permalink to â€œ1. å‡çº§åˆ° Webpack 5 + Node.js 16+â€">â€‹</a></h4><ul><li>Webpack 5 å†…ç½®ï¼š <ul><li><strong>æŒä¹…åŒ–ç¼“å­˜</strong>ï¼ˆ<code>cache: { type: &#39;filesystem&#39; }</code>ï¼‰ï¼›</li><li><strong>æ›´å¥½çš„ Tree Shaking</strong>ï¼›</li><li><strong>Asset Modules</strong> æ›¿ä»£ <code>file-loader</code> ç­‰ã€‚</li></ul></li><li>Node.js 16+ V8 å¼•æ“æ€§èƒ½æå‡æ˜¾è‘—ã€‚</li></ul><h4 id="_2-å¯ç”¨æŒä¹…åŒ–ç¼“å­˜" tabindex="-1">2. <strong>å¯ç”¨æŒä¹…åŒ–ç¼“å­˜</strong> <a class="header-anchor" href="#_2-å¯ç”¨æŒä¹…åŒ–ç¼“å­˜" aria-label="Permalink to â€œ2. å¯ç”¨æŒä¹…åŒ–ç¼“å­˜â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cache: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;filesystem&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°†ç¼“å­˜å­˜å‚¨åˆ° node_modules/.cache/webpack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    buildDependencies: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      config: [__filename] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é…ç½®å˜æ›´æ—¶å¤±æ•ˆç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šäºŒæ¬¡æ„å»ºé€Ÿåº¦æå‡ <strong>50%~90%</strong>ï¼ˆå°¤å…¶å¤§å‹é¡¹ç›®ï¼‰ã€‚</p></blockquote><h4 id="_3-ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´" tabindex="-1">3. <strong>ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´</strong> <a class="header-anchor" href="#_3-ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´" aria-label="Permalink to â€œ3. ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    modules: [path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼˜å…ˆæŸ¥ src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    extensions: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.jsx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‡å°‘åç¼€å°è¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">js</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        include: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åªç¼–è¯‘ src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        exclude:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // è·³è¿‡ node_modules</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="_4-ä½¿ç”¨æ›´å¿«çš„-source-map-å¼€å‘ç¯å¢ƒ" tabindex="-1">4. <strong>ä½¿ç”¨æ›´å¿«çš„ Source Mapï¼ˆå¼€å‘ç¯å¢ƒï¼‰</strong> <a class="header-anchor" href="#_4-ä½¿ç”¨æ›´å¿«çš„-source-map-å¼€å‘ç¯å¢ƒ" aria-label="Permalink to â€œ4. ä½¿ç”¨æ›´å¿«çš„ Source Mapï¼ˆå¼€å‘ç¯å¢ƒï¼‰â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å‘ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devtool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;eval-cheap-module-source-map&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ¯” source-map å¿« 60%</span></span></code></pre></div><hr><h3 id="äºŒã€loader-ä¸-plugin-ä¼˜åŒ–" tabindex="-1">äºŒã€Loader ä¸ Plugin ä¼˜åŒ– <a class="header-anchor" href="#äºŒã€loader-ä¸-plugin-ä¼˜åŒ–" aria-label="Permalink to â€œäºŒã€Loader ä¸ Plugin ä¼˜åŒ–â€">â€‹</a></h3><h4 id="_5-å¤šè¿›ç¨‹å¤„ç†-js-thread-loader" tabindex="-1">5. <strong>å¤šè¿›ç¨‹å¤„ç† JSï¼ˆThread Loaderï¼‰</strong> <a class="header-anchor" href="#_5-å¤šè¿›ç¨‹å¤„ç†-js-thread-loader" aria-label="Permalink to â€œ5. å¤šè¿›ç¨‹å¤„ç† JSï¼ˆThread Loaderï¼‰â€">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> thread-loader</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">js</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        use: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;thread-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å¯å¤šè¿›ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;babel-loader&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå°é¡¹ç›®å¯èƒ½å› è¿›ç¨‹å¼€é”€åè€Œå˜æ…¢ï¼Œå»ºè®® &gt; 50 ä¸ªæ–‡ä»¶å†å¯ç”¨ã€‚</p></blockquote><h4 id="_6-ä¼˜åŒ–-babel-ç¼–è¯‘" tabindex="-1">6. <strong>ä¼˜åŒ– Babel ç¼–è¯‘</strong> <a class="header-anchor" href="#_6-ä¼˜åŒ–-babel-ç¼–è¯‘" aria-label="Permalink to â€œ6. ä¼˜åŒ– Babel ç¼–è¯‘â€">â€‹</a></h4><ul><li><strong>ä»…ç¼–è¯‘å¿…è¦ä»£ç </strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// babel.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  presets: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      targets: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&gt; 0.25%, not dead&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‰éœ€ polyfill</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      useBuiltIns: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;usage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      corejs: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li><li><strong>å¯ç”¨ç¼“å­˜</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;babel-loader&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cacheDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¼“å­˜ç¼–è¯‘ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_7-é¿å…é‡å¤-plugin" tabindex="-1">7. <strong>é¿å…é‡å¤ Plugin</strong> <a class="header-anchor" href="#_7-é¿å…é‡å¤-plugin" aria-label="Permalink to â€œ7. é¿å…é‡å¤ Pluginâ€">â€‹</a></h4><ul><li>ç§»é™¤ <code>HotModuleReplacementPlugin</code>ï¼ˆWebpack 5 Dev Server å·²å†…ç½®ï¼‰ï¼›</li><li>åˆå¹¶åŠŸèƒ½é‡å çš„æ’ä»¶ï¼ˆå¦‚ <code>MiniCssExtractPlugin</code> å·²åŒ…å« CSS æå–ï¼‰ã€‚</li></ul><hr><h3 id="ä¸‰ã€é«˜çº§ä¼˜åŒ–ç­–ç•¥" tabindex="-1">ä¸‰ã€é«˜çº§ä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#ä¸‰ã€é«˜çº§ä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to â€œä¸‰ã€é«˜çº§ä¼˜åŒ–ç­–ç•¥â€">â€‹</a></h3><h4 id="_8-dll-åŠ¨æ€é“¾æ¥åº“-é¢„æ„å»º-é€‚ç”¨äºç¨³å®šä¾èµ–" tabindex="-1">8. <strong>DLLï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰é¢„æ„å»ºï¼ˆé€‚ç”¨äºç¨³å®šä¾èµ–ï¼‰</strong> <a class="header-anchor" href="#_8-dll-åŠ¨æ€é“¾æ¥åº“-é¢„æ„å»º-é€‚ç”¨äºç¨³å®šä¾èµ–" aria-label="Permalink to â€œ8. DLLï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰é¢„æ„å»ºï¼ˆé€‚ç”¨äºç¨³å®šä¾èµ–ï¼‰â€">â€‹</a></h4><ul><li><strong>åŸç†</strong>ï¼šå°† <code>react</code>, <code>lodash</code> ç­‰ä¸å¸¸å˜åŠ¨çš„åº“<strong>æå‰æ‰“åŒ…</strong>ï¼Œåç»­æ„å»ºè·³è¿‡ã€‚</li><li><strong>æ­¥éª¤</strong>ï¼š <ol><li>åˆ›å»º <code>webpack.dll.js</code> é¢„æ„å»º vendorï¼›</li><li>ä¸»é…ç½®é€šè¿‡ <code>DllReferencePlugin</code> å¼•ç”¨ã€‚</li></ol></li><li><strong>æ•ˆæœ</strong>ï¼šå¤§å‹é¡¹ç›®æ„å»ºæ—¶é—´å‡å°‘ <strong>30%~50%</strong>ã€‚</li></ul><blockquote><p>ğŸ’¡ <strong>ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šWebpack 5 çš„ <code>cache</code> + <code>SplitChunks</code> å·²å¤§å¹…é™ä½ DLL å¿…è¦æ€§ã€‚</p></blockquote><h4 id="_9-æŒ‰éœ€åŠ è½½ç¬¬ä¸‰æ–¹åº“" tabindex="-1">9. <strong>æŒ‰éœ€åŠ è½½ç¬¬ä¸‰æ–¹åº“</strong> <a class="header-anchor" href="#_9-æŒ‰éœ€åŠ è½½ç¬¬ä¸‰æ–¹åº“" aria-label="Permalink to â€œ9. æŒ‰éœ€åŠ è½½ç¬¬ä¸‰æ–¹åº“â€">â€‹</a></h4><ul><li><strong>é—®é¢˜</strong>ï¼š<code>import _ from &#39;lodash&#39;</code> ä¼šæ‰“åŒ…æ•´ä¸ªåº“ï¼›</li><li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ”¹ä¸ºæŒ‰éœ€å¼•å…¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> debounce </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash/debounce&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆ–ä½¿ç”¨ babel-plugin-lodash è‡ªåŠ¨è½¬æ¢</span></span></code></pre></div></li></ul><h4 id="_10-ç›‘æ§ä¸åˆ†æ" tabindex="-1">10. <strong>ç›‘æ§ä¸åˆ†æ</strong> <a class="header-anchor" href="#_10-ç›‘æ§ä¸åˆ†æ" aria-label="Permalink to â€œ10. ç›‘æ§ä¸åˆ†æâ€">â€‹</a></h4><ul><li><strong>å®šä½ç“¶é¢ˆ</strong>ï¼š<div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºå„é˜¶æ®µè€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">webpack</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --profile</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stats.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯è§†åŒ–åˆ†æ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack-bundle-analyzer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stats.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> speed-measure-webpack-plugin</span></span></code></pre></div></li><li><strong>å…³é”®æŒ‡æ ‡</strong>ï¼š <ul><li><code>resolve</code> è€—æ—¶ â†’ ä¼˜åŒ– <code>resolve.modules</code>ï¼›</li><li><code>build</code> è€—æ—¶ â†’ ä¼˜åŒ– Loaderï¼›</li><li><code>seal</code> è€¶æ—¶ â†’ ä¼˜åŒ– SplitChunksã€‚</li></ul></li></ul><hr><h3 id="å››ã€æ¶æ„çº§ä¼˜åŒ–-é•¿æœŸæ”¶ç›Š" tabindex="-1">å››ã€æ¶æ„çº§ä¼˜åŒ–ï¼ˆé•¿æœŸæ”¶ç›Šï¼‰ <a class="header-anchor" href="#å››ã€æ¶æ„çº§ä¼˜åŒ–-é•¿æœŸæ”¶ç›Š" aria-label="Permalink to â€œå››ã€æ¶æ„çº§ä¼˜åŒ–ï¼ˆé•¿æœŸæ”¶ç›Šï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ¡ˆ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å¾®å‰ç«¯æ‹†åˆ†</strong></td><td>å°†å·¨å‹åº”ç”¨æ‹†åˆ†ä¸ºç‹¬ç«‹å­åº”ç”¨ï¼Œå„è‡ªæ„å»º</td></tr><tr><td><strong>Monorepo + Nx/Turborepo</strong></td><td>åˆ©ç”¨ä»»åŠ¡ç®¡é“å’Œç¼“å­˜åŠ é€Ÿå¤šåŒ…é¡¹ç›®</td></tr><tr><td><strong>Vite/Rollup æ›¿ä»£</strong></td><td>å¼€å‘ç¯å¢ƒç”¨ Viteï¼ˆESM åŸç”ŸåŠ è½½ï¼‰ï¼Œç”Ÿäº§ä»ç”¨ Webpack</td></tr></tbody></table><hr><h3 id="äº”ã€é¿å‘æŒ‡å—" tabindex="-1">äº”ã€é¿å‘æŒ‡å— <a class="header-anchor" href="#äº”ã€é¿å‘æŒ‡å—" aria-label="Permalink to â€œäº”ã€é¿å‘æŒ‡å—â€">â€‹</a></h3><ul><li>âŒ <strong>ä¸è¦è¿‡åº¦åˆ†å‰² Chunk</strong>ï¼šHTTP/2 ä¸‹è¿‡å¤šå°æ–‡ä»¶åè€Œå¢åŠ è°ƒåº¦å¼€é”€ï¼›</li><li>âŒ <strong>é¿å… inline Source Map</strong>ï¼š<code>inline-source-map</code> ä¼šå¢å¤§ bundle ä½“ç§¯ï¼›</li><li>âœ… <strong>å¼€å‘/ç”Ÿäº§é…ç½®åˆ†ç¦»</strong>ï¼šç”¨ <code>webpack-merge</code> æ‹†åˆ†é…ç½®ï¼Œé¿å…å†—ä½™é€»è¾‘ã€‚</li></ul><hr><h3 id="å…­ã€æ•ˆæœå¯¹æ¯”-å…¸å‹é¡¹ç›®" tabindex="-1">å…­ã€æ•ˆæœå¯¹æ¯”ï¼ˆå…¸å‹é¡¹ç›®ï¼‰ <a class="header-anchor" href="#å…­ã€æ•ˆæœå¯¹æ¯”-å…¸å‹é¡¹ç›®" aria-label="Permalink to â€œå…­ã€æ•ˆæœå¯¹æ¯”ï¼ˆå…¸å‹é¡¹ç›®ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>é¦–æ¬¡æ„å»ºï¼š45s</td><td>é¦–æ¬¡æ„å»ºï¼š30s</td><td>â†“ 33%</td></tr><tr><td>äºŒæ¬¡æ„å»ºï¼š22s</td><td>äºŒæ¬¡æ„å»ºï¼š3s</td><td>â†“ 86%</td></tr></tbody></table><hr><h3 id="ä¸€å¥è¯æ€»ç»“-1" tabindex="-1">ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-1" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>æé€Ÿæ ¸å¿ƒ = ç¼“å­˜ï¼ˆæŒä¹…åŒ–ï¼‰ + å¹¶è¡Œï¼ˆå¤šè¿›ç¨‹ï¼‰ + ç²¾ç®€ï¼ˆç¼©å°èŒƒå›´ï¼‰ + ç›‘æ§ï¼ˆç²¾å‡†ä¼˜åŒ–ï¼‰â€”â€”ä¼˜å…ˆå¯ç”¨ Webpack 5 ç¼“å­˜ï¼Œå†é’ˆå¯¹æ€§ä¼˜åŒ– Loader å’Œä¾èµ–ã€‚</strong></p></blockquote><h2 id="å¦‚ä½•å‡å°‘æ‰“åŒ…åçš„ä»£ç ä½“ç§¯" tabindex="-1">å¦‚ä½•å‡å°‘æ‰“åŒ…åçš„ä»£ç ä½“ç§¯ <a class="header-anchor" href="#å¦‚ä½•å‡å°‘æ‰“åŒ…åçš„ä»£ç ä½“ç§¯" aria-label="Permalink to â€œå¦‚ä½•å‡å°‘æ‰“åŒ…åçš„ä»£ç ä½“ç§¯â€">â€‹</a></h2><p>å‡å°‘ Webpack æ‰“åŒ…åçš„ä»£ç ä½“ç§¯ï¼ˆBundle Sizeï¼‰æ˜¯æå‡ Web åº”ç”¨<strong>åŠ è½½é€Ÿåº¦ã€ç”¨æˆ·ä½“éªŒå’Œ SEO è¡¨ç°</strong>çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯ <strong>ç³»ç»ŸåŒ–ã€å¯è½åœ°çš„ä¼˜åŒ–ç­–ç•¥</strong>ï¼Œæ¶µç›–é…ç½®ã€ä»£ç ã€ä¾èµ–å’Œæ¶æ„å±‚é¢ï¼š</p><hr><h3 id="ä¸€ã€å¯ç”¨ç”Ÿäº§æ¨¡å¼-åŸºç¡€ä½†å…³é”®" tabindex="-1">ä¸€ã€å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼ˆåŸºç¡€ä½†å…³é”®ï¼‰ <a class="header-anchor" href="#ä¸€ã€å¯ç”¨ç”Ÿäº§æ¨¡å¼-åŸºç¡€ä½†å…³é”®" aria-label="Permalink to â€œä¸€ã€å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼ˆåŸºç¡€ä½†å…³é”®ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;production&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // è‡ªåŠ¨å¯ç”¨ï¼šä»£ç å‹ç¼©ã€Tree Shakingã€ä½œç”¨åŸŸæå‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šé»˜è®¤å¼€å¯ Terser å‹ç¼© + ç§»é™¤ <code>process.env.NODE_ENV !== &#39;production&#39;</code> çš„ä»£ç ã€‚</p></blockquote><hr><h3 id="äºŒã€ä»£ç åˆ†å‰²-code-splitting" tabindex="-1">äºŒã€ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ <a class="header-anchor" href="#äºŒã€ä»£ç åˆ†å‰²-code-splitting" aria-label="Permalink to â€œäºŒã€ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰â€">â€‹</a></h3><h4 id="_1-è‡ªåŠ¨åˆ†å‰²å…¬å…±ä»£ç " tabindex="-1">1. <strong>è‡ªåŠ¨åˆ†å‰²å…¬å…±ä»£ç </strong> <a class="header-anchor" href="#_1-è‡ªåŠ¨åˆ†å‰²å…¬å…±ä»£ç " aria-label="Permalink to â€œ1. è‡ªåŠ¨åˆ†å‰²å…¬å…±ä»£ç â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optimization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  splitChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    chunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cacheGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      vendor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vendors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        chunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šåˆ†ç¦»ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Reactï¼‰ï¼Œåˆ©ç”¨é•¿æœŸç¼“å­˜ã€‚</p></blockquote><h4 id="_2-è·¯ç”±-ç»„ä»¶æ‡’åŠ è½½" tabindex="-1">2. <strong>è·¯ç”±/ç»„ä»¶æ‡’åŠ è½½</strong> <a class="header-anchor" href="#_2-è·¯ç”±-ç»„ä»¶æ‡’åŠ è½½" aria-label="Permalink to â€œ2. è·¯ç”±/ç»„ä»¶æ‡’åŠ è½½â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// React</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./Home&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> About</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./About.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šé¦–å±ä»…åŠ è½½å¿…è¦ä»£ç ï¼Œä½“ç§¯å‡å°‘ 30%~70%ã€‚</p></blockquote><hr><h3 id="ä¸‰ã€tree-shaking-ç§»é™¤æ­»ä»£ç " tabindex="-1">ä¸‰ã€Tree Shakingï¼ˆç§»é™¤æ­»ä»£ç ï¼‰ <a class="header-anchor" href="#ä¸‰ã€tree-shaking-ç§»é™¤æ­»ä»£ç " aria-label="Permalink to â€œä¸‰ã€Tree Shakingï¼ˆç§»é™¤æ­»ä»£ç ï¼‰â€">â€‹</a></h3><h4 id="å…³é”®å‰æ" tabindex="-1">å…³é”®å‰æï¼š <a class="header-anchor" href="#å…³é”®å‰æ" aria-label="Permalink to â€œå…³é”®å‰æï¼šâ€">â€‹</a></h4><ul><li>ä½¿ç”¨ <strong>ES6 æ¨¡å—</strong>ï¼ˆ<code>import</code>/<code>export</code>ï¼‰ï¼›</li><li>ç¬¬ä¸‰æ–¹åº“æä¾› <strong>ESM ç‰ˆæœ¬</strong>ï¼ˆå¦‚ <code>lodash-es</code> è€Œé <code>lodash</code>ï¼‰ï¼›</li><li>åœ¨ <code>package.json</code> å£°æ˜æ— å‰¯ä½œç”¨ï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sideEffects&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šæœªä½¿ç”¨çš„å‡½æ•°/ç»„ä»¶å½»åº•ä» bundle ä¸­ç§»é™¤ã€‚</p></blockquote><hr><h3 id="å››ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹ä¾èµ–" tabindex="-1">å››ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹ä¾èµ– <a class="header-anchor" href="#å››ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹ä¾èµ–" aria-label="Permalink to â€œå››ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹ä¾èµ–â€">â€‹</a></h3><h4 id="_1-æŒ‰éœ€å¼•å…¥" tabindex="-1">1. <strong>æŒ‰éœ€å¼•å…¥</strong> <a class="header-anchor" href="#_1-æŒ‰éœ€å¼•å…¥" aria-label="Permalink to â€œ1. æŒ‰éœ€å¼•å…¥â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ å…¨é‡å¼•å…¥ï¼ˆæ‰“åŒ…æ•´ä¸ªåº“ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { debounce } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… æŒ‰éœ€å¼•å…¥ï¼ˆä»…æ‰“åŒ… debounceï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> debounce </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash/debounce&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="_2-æ›¿æ¢è½»é‡çº§æ›¿ä»£å“" tabindex="-1">2. <strong>æ›¿æ¢è½»é‡çº§æ›¿ä»£å“</strong> <a class="header-anchor" href="#_2-æ›¿æ¢è½»é‡çº§æ›¿ä»£å“" aria-label="Permalink to â€œ2. æ›¿æ¢è½»é‡çº§æ›¿ä»£å“â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>åŸåº“</th><th>è½»é‡æ›¿ä»£</th></tr></thead><tbody><tr><td><code>moment.js</code> (70KB)</td><td><code>date-fns</code> (æ¨¡å—åŒ–) / <code>dayjs</code> (2KB)</td></tr><tr><td><code>lodash</code> (24KB)</td><td><code>lodash-es</code> + æŒ‰éœ€å¼•å…¥ / <code>radash</code></td></tr><tr><td><code>axios</code> (13KB)</td><td>åŸç”Ÿ <code>fetch</code> + å°è£…</td></tr></tbody></table><h4 id="_3-åˆ†æä¾èµ–ä½“ç§¯" tabindex="-1">3. <strong>åˆ†æä¾èµ–ä½“ç§¯</strong> <a class="header-anchor" href="#_3-åˆ†æä¾èµ–ä½“ç§¯" aria-label="Permalink to â€œ3. åˆ†æä¾èµ–ä½“ç§¯â€">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…åˆ†æå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack-bundle-analyzer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webpack-bundle-analyzer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/main.js</span></span></code></pre></div><blockquote><p>ğŸ” <strong>å®šä½é—®é¢˜</strong>ï¼šå‘ç°æ„å¤–æ‰“åŒ…çš„å¤§ä¾èµ–ï¼ˆå¦‚ <code>@babel/polyfill</code>ï¼‰ã€‚</p></blockquote><hr><h3 id="äº”ã€èµ„æºä¼˜åŒ–" tabindex="-1">äº”ã€èµ„æºä¼˜åŒ– <a class="header-anchor" href="#äº”ã€èµ„æºä¼˜åŒ–" aria-label="Permalink to â€œäº”ã€èµ„æºä¼˜åŒ–â€">â€‹</a></h3><h4 id="_1-å‹ç¼©å›¾ç‰‡-å­—ä½“" tabindex="-1">1. <strong>å‹ç¼©å›¾ç‰‡/å­—ä½“</strong> <a class="header-anchor" href="#_1-å‹ç¼©å›¾ç‰‡-å­—ä½“" aria-label="Permalink to â€œ1. å‹ç¼©å›¾ç‰‡/å­—ä½“â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  module: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">(png</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">jpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">svg)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;asset&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        parser: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dataUrlCondition: { maxSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;8KB è½¬ base64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><blockquote><p>âœ… <strong>é…åˆå·¥å…·</strong>ï¼š<code>imagemin-webpack-plugin</code> è¿›ä¸€æ­¥å‹ç¼©å›¾ç‰‡ã€‚</p></blockquote><h4 id="_2-ç§»é™¤æœªä½¿ç”¨-css" tabindex="-1">2. <strong>ç§»é™¤æœªä½¿ç”¨ CSS</strong> <a class="header-anchor" href="#_2-ç§»é™¤æœªä½¿ç”¨-css" aria-label="Permalink to â€œ2. ç§»é™¤æœªä½¿ç”¨ CSSâ€">â€‹</a></h4><ul><li>ä½¿ç”¨ <code>PurgeCSS</code>ï¼ˆé…åˆ <code>mini-css-extract-plugin</code>ï¼‰ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// postcss.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;purgecss&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/**/*.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/**/*.{js,jsx}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li></ul><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šTailwind CSS é¡¹ç›®ä½“ç§¯å‡å°‘ 90%ã€‚</p></blockquote><hr><h3 id="å…­ã€é«˜çº§æŠ€å·§" tabindex="-1">å…­ã€é«˜çº§æŠ€å·§ <a class="header-anchor" href="#å…­ã€é«˜çº§æŠ€å·§" aria-label="Permalink to â€œå…­ã€é«˜çº§æŠ€å·§â€">â€‹</a></h3><h4 id="_1-åŠ¨æ€-polyfill" tabindex="-1">1. <strong>åŠ¨æ€ Polyfill</strong> <a class="header-anchor" href="#_1-åŠ¨æ€-polyfill" aria-label="Permalink to â€œ1. åŠ¨æ€ Polyfillâ€">â€‹</a></h4><ul><li>é¿å…å…¨é‡å¼•å…¥ <code>core-js</code>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// babel.config.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">presets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    useBuiltIns: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;usage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‰éœ€æ³¨å…¥ polyfill</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    corejs: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li>æˆ–ä½¿ç”¨ <a href="https://polyfill.io/" target="_blank" rel="noreferrer">Polyfill.io</a> æŒ‰æµè§ˆå™¨éœ€æ±‚åŠ è½½ã€‚</li></ul><h4 id="_2-gzip-brotli-å‹ç¼©" tabindex="-1">2. <strong>Gzip/Brotli å‹ç¼©</strong> <a class="header-anchor" href="#_2-gzip-brotli-å‹ç¼©" aria-label="Permalink to â€œ2. Gzip/Brotli å‹ç¼©â€">â€‹</a></h4><ul><li>Webpack ç”Ÿæˆæ–‡ä»¶åï¼Œé€šè¿‡æœåŠ¡å™¨æˆ–æ’ä»¶å‹ç¼©ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CompressionPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;compression-webpack-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CompressionPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ algorithm: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gzip&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><blockquote><p>âœ… <strong>æ•ˆæœ</strong>ï¼šæ–‡æœ¬èµ„æºä½“ç§¯å‡å°‘ 70%ï¼ˆéœ€ Nginx/Apache å¯ç”¨ gzipï¼‰ã€‚</p></blockquote><h4 id="_3-ä»£ç æ‹†åˆ†-é¢„åŠ è½½" tabindex="-1">3. <strong>ä»£ç æ‹†åˆ† + é¢„åŠ è½½</strong> <a class="header-anchor" href="#_3-ä»£ç æ‹†åˆ†-é¢„åŠ è½½" aria-label="Permalink to â€œ3. ä»£ç æ‹†åˆ† + é¢„åŠ è½½â€">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…³é”®è·¯ç”±é¢„åŠ è½½ï¼ˆç©ºé—²æ—¶åŠ è½½ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lazy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackPreload: true */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Profile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><h3 id="ä¸ƒã€é¿å‘æŒ‡å—" tabindex="-1">ä¸ƒã€é¿å‘æŒ‡å— <a class="header-anchor" href="#ä¸ƒã€é¿å‘æŒ‡å—" aria-label="Permalink to â€œä¸ƒã€é¿å‘æŒ‡å—â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é™·é˜±</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>å¼€å‘ç¯å¢ƒæœª Tree Shaking</strong></td><td>ç¡®ä¿ç”Ÿäº§æ„å»ºï¼ˆ<code>mode: &#39;production&#39;</code>ï¼‰</td></tr><tr><td><strong>CSS æœªæå–</strong></td><td>ç”¨ <code>MiniCssExtractPlugin</code> æ›¿ä»£ <code>style-loader</code></td></tr><tr><td><strong>Source Map æ³„éœ²</strong></td><td>ç”Ÿäº§ç¯å¢ƒç§»é™¤ <code>.map</code> æ–‡ä»¶æˆ–è®¾ä¸º <code>hidden-source-map</code></td></tr><tr><td><strong>é‡å¤ä¾èµ–</strong></td><td>ç”¨ <code>npm ls lodash</code> æ£€æŸ¥å¤šç‰ˆæœ¬ï¼Œç”¨ <code>resolutions</code> é”å®š</td></tr></tbody></table><hr><h3 id="å…«ã€æ•ˆæœéªŒè¯" tabindex="-1">å…«ã€æ•ˆæœéªŒè¯ <a class="header-anchor" href="#å…«ã€æ•ˆæœéªŒè¯" aria-label="Permalink to â€œå…«ã€æ•ˆæœéªŒè¯â€">â€‹</a></h3><ol><li><strong>é‡åŒ–æŒ‡æ ‡</strong>ï¼š <ul><li>é¦–å± JS ä½“ç§¯ &lt; 200KBï¼ˆå‹ç¼©åï¼‰ï¼›</li><li>Lighthouse Performance Score &gt; 90ã€‚</li></ul></li><li><strong>ç›‘æ§å·¥å…·</strong>ï¼š <ul><li>Webpack Bundle Analyzerï¼›</li><li>Chrome DevTools Coverage Tabï¼ˆæ£€æµ‹æœªæ‰§è¡Œä»£ç ï¼‰ã€‚</li></ul></li></ol><hr><h3 id="ä¸€å¥è¯æ€»ç»“-2" tabindex="-1">ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-2" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>å‡å° bundle ä½“ç§¯ = åˆ†å‰²ï¼ˆCode Splittingï¼‰ + æ¸…ç†ï¼ˆTree Shaking + PurgeCSSï¼‰ + æ›¿æ¢ï¼ˆè½»é‡ä¾èµ–ï¼‰ + å‹ç¼©ï¼ˆTerser + Gzipï¼‰â€”â€”å…ˆåˆ†æï¼Œå†ç²¾å‡†ä¼˜åŒ–ã€‚</strong></p></blockquote><h2 id="vite-æ¯”-webpack-å¿«åœ¨å“ªé‡Œ" tabindex="-1">vite æ¯” webpack å¿«åœ¨å“ªé‡Œ <a class="header-anchor" href="#vite-æ¯”-webpack-å¿«åœ¨å“ªé‡Œ" aria-label="Permalink to â€œvite æ¯” webpack å¿«åœ¨å“ªé‡Œâ€">â€‹</a></h2><p>Vite ä¹‹æ‰€ä»¥æ¯” Webpack <strong>å¿«ä¸€ä¸ªæ•°é‡çº§</strong>ï¼ˆå°¤å…¶åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼‰ï¼Œæ ¸å¿ƒåœ¨äºå®ƒ<strong>å½»åº•é‡æ„äº†å¼€å‘æœåŠ¡å™¨çš„æ„å»ºæ¨¡å‹</strong>ï¼Œä»â€œæ‰“åŒ…åè¿è¡Œâ€å˜ä¸ºâ€œæŒ‰éœ€ç¼–è¯‘ + åŸç”Ÿ ESM åŠ è½½â€ã€‚ä»¥ä¸‹æ˜¯å…³é”®å·®å¼‚å’ŒåŸç†è¯¦è§£ï¼š</p><hr><h3 id="ä¸€ã€æ ¹æœ¬åŒºåˆ«-å¼€å‘æ¨¡å¼æ¶æ„" tabindex="-1">ä¸€ã€æ ¹æœ¬åŒºåˆ«ï¼šå¼€å‘æ¨¡å¼æ¶æ„ <a class="header-anchor" href="#ä¸€ã€æ ¹æœ¬åŒºåˆ«-å¼€å‘æ¨¡å¼æ¶æ„" aria-label="Permalink to â€œä¸€ã€æ ¹æœ¬åŒºåˆ«ï¼šå¼€å‘æ¨¡å¼æ¶æ„â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th><strong>Webpack (ä¼ ç»Ÿ)</strong></th><th><strong>Vite (ç°ä»£)</strong></th></tr></thead><tbody><tr><td><strong>å¼€å‘æœåŠ¡å™¨å¯åŠ¨</strong></td><td>å…ˆå…¨é‡æ‰“åŒ… â†’ å†å¯åŠ¨æœåŠ¡</td><td><strong>ç§’çº§å¯åŠ¨</strong>ï¼ˆæ— éœ€æ‰“åŒ…ï¼‰</td></tr><tr><td><strong>æ¨¡å—åŠ è½½æ–¹å¼</strong></td><td>æ‰“åŒ…æˆå•ä¸ª/å¤šä¸ª bundle</td><td><strong>åŸç”Ÿæµè§ˆå™¨ ESM</strong>ï¼ˆ<code>&lt;script type=&quot;module&quot;&gt;</code>ï¼‰</td></tr><tr><td><strong>ä»£ç æ›´æ–°</strong></td><td>æ•´ä½“é‡ç¼–è¯‘ + HMR</td><td><strong>æŒ‰éœ€ç¼–è¯‘ + ç²¾å‡† HMR</strong></td></tr><tr><td><strong>ä¾èµ–å¤„ç†</strong></td><td>æ‰€æœ‰ä»£ç ï¼ˆå« node_modulesï¼‰èµ° Loader</td><td><strong>é¢„æ„å»ºä¾èµ–</strong>ï¼ˆESM å…¼å®¹åŒ–ï¼‰</td></tr></tbody></table><blockquote><p>âœ… <strong>Vite çš„æ ¸å¿ƒæ€æƒ³</strong>ï¼š<br><strong>â€œå¼€å‘ç¯å¢ƒä¸æ‰“åŒ…ï¼Œåˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ ESM èƒ½åŠ›ï¼›ä»…å¯¹æºç åšæŒ‰éœ€è½¬æ¢ã€‚â€</strong></p></blockquote><hr><h3 id="äºŒã€vite-å¿«çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯" tabindex="-1">äºŒã€Vite å¿«çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯ <a class="header-anchor" href="#äºŒã€vite-å¿«çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯" aria-label="Permalink to â€œäºŒã€Vite å¿«çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯â€">â€‹</a></h3><h4 id="_1-ç§’çº§å†·å¯åŠ¨-è·³è¿‡æ‰“åŒ…" tabindex="-1">1. <strong>ç§’çº§å†·å¯åŠ¨ï¼šè·³è¿‡æ‰“åŒ…</strong> <a class="header-anchor" href="#_1-ç§’çº§å†·å¯åŠ¨-è·³è¿‡æ‰“åŒ…" aria-label="Permalink to â€œ1. ç§’çº§å†·å¯åŠ¨ï¼šè·³è¿‡æ‰“åŒ…â€">â€‹</a></h4><ul><li><p><strong>Webpack</strong>ï¼š<br> å¯åŠ¨æ—¶éœ€é€’å½’è§£ææ‰€æœ‰æ¨¡å— â†’ è°ƒç”¨ Babel/TypeScript ç¼–è¯‘ â†’ ç”Ÿæˆ bundle â†’ å¯åŠ¨ Dev Serverï¼ˆå¤§å‹é¡¹ç›®è€—æ—¶ 30s+ï¼‰ã€‚</p></li><li><p><strong>Vite</strong>ï¼š</p><ul><li>å¯åŠ¨æ—¶<strong>åªæ‰«æ <code>index.html</code> å’Œç›´æ¥ä¾èµ–</strong>ï¼›</li><li>æµè§ˆå™¨è¯·æ±‚ <code>/src/main.js</code> æ—¶ï¼ŒVite <strong>å®æ—¶ç¼–è¯‘è¯¥æ–‡ä»¶</strong>å¹¶è¿”å›ï¼›</li><li><strong>æ— å…¨é‡æ„å»ºè¿‡ç¨‹</strong> â†’ å¯åŠ¨é€Ÿåº¦ä¸é¡¹ç›®å¤§å°<strong>å‡ ä¹æ— å…³</strong>ï¼ˆé€šå¸¸ &lt; 500msï¼‰ã€‚</li></ul></li></ul><h4 id="_2-åŸç”Ÿ-esm-é›¶æ‰“åŒ…ä¾èµ–" tabindex="-1">2. <strong>åŸç”Ÿ ESMï¼šé›¶æ‰“åŒ…ä¾èµ–</strong> <a class="header-anchor" href="#_2-åŸç”Ÿ-esm-é›¶æ‰“åŒ…ä¾èµ–" aria-label="Permalink to â€œ2. åŸç”Ÿ ESMï¼šé›¶æ‰“åŒ…ä¾èµ–â€">â€‹</a></h4><ul><li><strong>æµè§ˆå™¨ç›´æ¥åŠ è½½</strong>ï¼š<div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- Vite ç”Ÿæˆçš„ index.html --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/src/main.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li>å½“æµè§ˆå™¨é‡åˆ° <code>import { foo } from &#39;./utils.js&#39;</code>ï¼š <ul><li>è‡ªåŠ¨å‘èµ· HTTP è¯·æ±‚ <code>/src/utils.js</code>ï¼›</li><li>Vite æ‹¦æˆªè¯·æ±‚ â†’ å®æ—¶ç¼–è¯‘ TS/JSX â†’ è¿”å›åˆæ³• ESMã€‚</li></ul></li><li><strong>ä¼˜åŠ¿</strong>ï¼š <ul><li>æ— éœ€åˆå¹¶æ¨¡å—ï¼›</li><li>æ— ä½œç”¨åŸŸæå‡ã€æ¨¡å—åŒ…è£…ç­‰å¼€é”€ã€‚</li></ul></li></ul><h4 id="_3-æ™ºèƒ½ä¾èµ–é¢„æ„å»º-pre-bundling" tabindex="-1">3. <strong>æ™ºèƒ½ä¾èµ–é¢„æ„å»ºï¼ˆPre-bundlingï¼‰</strong> <a class="header-anchor" href="#_3-æ™ºèƒ½ä¾èµ–é¢„æ„å»º-pre-bundling" aria-label="Permalink to â€œ3. æ™ºèƒ½ä¾èµ–é¢„æ„å»ºï¼ˆPre-bundlingï¼‰â€">â€‹</a></h4><ul><li><p><strong>é—®é¢˜</strong>ï¼š<br><code>node_modules</code> ä¸­çš„åº“å¤šä¸º CommonJS æˆ–é ESM æ ¼å¼ï¼Œæµè§ˆå™¨æ— æ³•ç›´æ¥è¿è¡Œã€‚</p></li><li><p><strong>Vite è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li>å¯åŠ¨æ—¶ç”¨ <strong>esbuild</strong>ï¼ˆGo ç¼–å†™ï¼Œæ¯” JS å¿« 10~100 å€ï¼‰æ‰«æä¾èµ–ï¼›</li><li>å°† CommonJS / UMD åº“è½¬æ¢ä¸º <strong>å•ä¸ª ESM æ–‡ä»¶</strong>ï¼ˆå¦‚ <code>vue.js</code> â†’ <code>vue.esm-browser.js</code>ï¼‰ï¼›</li><li>ç¼“å­˜ç»“æœï¼ˆ<code>node_modules/.vite/deps</code>ï¼‰ï¼Œåç»­å¯åŠ¨ç›´æ¥å¤ç”¨ã€‚</li></ol></li><li><p><strong>æ•ˆæœ</strong>ï¼š</p><ul><li>é¦–æ¬¡å¯åŠ¨ç¨æ…¢ï¼ˆå› é¢„æ„å»ºï¼‰ï¼Œä½†åç»­å¯åŠ¨æå¿«ï¼›</li><li>è¿è¡Œæ—¶ä¾èµ–é€šè¿‡å•ä¸ª HTTP è¯·æ±‚åŠ è½½ï¼ˆè€Œéæ•°ç™¾ä¸ªï¼‰ã€‚</li></ul></li></ul><blockquote><p>ğŸ”‘ <strong>esbuild çš„å¨åŠ›</strong>ï¼š<br> Vite ç”¨ esbuild é¢„æ„å»ºä¾èµ–ï¼ˆå¿«ï¼‰ï¼Œè€Œ Webpack ç”¨ JS ç¼–å†™çš„ Babel/Terser å¤„ç†æ‰€æœ‰ä»£ç ï¼ˆæ…¢ï¼‰ã€‚</p></blockquote><hr><h3 id="ä¸‰ã€hmr-çƒ­æ›´æ–°-æ€§èƒ½ç¢¾å‹" tabindex="-1">ä¸‰ã€HMRï¼ˆçƒ­æ›´æ–°ï¼‰æ€§èƒ½ç¢¾å‹ <a class="header-anchor" href="#ä¸‰ã€hmr-çƒ­æ›´æ–°-æ€§èƒ½ç¢¾å‹" aria-label="Permalink to â€œä¸‰ã€HMRï¼ˆçƒ­æ›´æ–°ï¼‰æ€§èƒ½ç¢¾å‹â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td><strong>æ›´æ–°ä¸€ä¸ªç»„ä»¶</strong></td><td>1. é‡æ–°ç¼–è¯‘æ•´ä¸ªä¾èµ–é“¾<br>2. é€šçŸ¥å®¢æˆ·ç«¯é‡è½½æ¨¡å—</td><td>1. <strong>ä»…ç¼–è¯‘è¯¥æ–‡ä»¶</strong><br>2. é€šè¿‡ WebSocket ç²¾å‡†æ›´æ–°</td></tr><tr><td><strong>æ›´æ–°æ—¶é—´</strong></td><td>500ms ~ 2sï¼ˆéšé¡¹ç›®å¢å¤§ï¼‰</td><td><strong>&lt; 50ms</strong>ï¼ˆæ’å®šï¼‰</td></tr><tr><td><strong>çŠ¶æ€ä¿ç•™</strong></td><td>éœ€æ¡†æ¶æ’ä»¶æ”¯æŒ</td><td>åŸç”Ÿæ”¯æŒï¼ˆESM æ¨¡å—å¯ç²¾ç¡®æ›¿æ¢ï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>åŸå› </strong>ï¼š<br> Webpack çš„ HMR éœ€éå†æ¨¡å—ä¾èµ–å›¾ç¡®å®šå½±å“èŒƒå›´ï¼›<br> Vite ç›´æ¥æ˜ å°„æ–‡ä»¶è·¯å¾„åˆ°æµè§ˆå™¨æ¨¡å—ï¼Œæ›´æ–°è·¯å¾„å”¯ä¸€ã€‚</p></blockquote><hr><h3 id="å››ã€ç”Ÿäº§æ„å»º-vite-ä¹Ÿä¸å¼±" tabindex="-1">å››ã€ç”Ÿäº§æ„å»ºï¼šVite ä¹Ÿä¸å¼± <a class="header-anchor" href="#å››ã€ç”Ÿäº§æ„å»º-vite-ä¹Ÿä¸å¼±" aria-label="Permalink to â€œå››ã€ç”Ÿäº§æ„å»ºï¼šVite ä¹Ÿä¸å¼±â€">â€‹</a></h3><ul><li><strong>å¼€å‘ç”¨ Viteï¼Œç”Ÿäº§ç”¨ Rollup</strong>ï¼š<br> Vite ç”Ÿäº§æ„å»ºåŸºäº <strong>Rollup</strong>ï¼ˆæ›´ç®€æ´çš„æ‰“åŒ…å™¨ï¼‰ï¼Œé»˜è®¤å¼€å¯ï¼š <ul><li>Code Splitting</li><li>Tree Shaking</li><li>å‹ç¼©ï¼ˆterserï¼‰</li></ul></li><li><strong>ç»“æœ</strong>ï¼šç”Ÿäº§åŒ…ä½“ç§¯ä¸ Webpack ç›¸å½“ï¼Œç”šè‡³æ›´ä¼˜ï¼ˆRollup çš„ Tree Shaking æ›´æ¿€è¿›ï¼‰ã€‚</li></ul><hr><h3 id="äº”ã€å¯¹æ¯”æ€»ç»“è¡¨" tabindex="-1">äº”ã€å¯¹æ¯”æ€»ç»“è¡¨ <a class="header-anchor" href="#äº”ã€å¯¹æ¯”æ€»ç»“è¡¨" aria-label="Permalink to â€œäº”ã€å¯¹æ¯”æ€»ç»“è¡¨â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç»´åº¦</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td><strong>å¼€å‘å¯åŠ¨é€Ÿåº¦</strong></td><td>æ…¢ï¼ˆO(n)ï¼‰</td><td>æå¿«ï¼ˆO(1)ï¼‰</td></tr><tr><td><strong>HMR é€Ÿåº¦</strong></td><td>éšé¡¹ç›®å¢å¤§å˜æ…¢</td><td>æ’å®šå¿«é€Ÿ</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>é«˜ï¼ˆLoader/Plugin ä½“ç³»ï¼‰</td><td>ä½ï¼ˆçº¦å®šä¼˜äºé…ç½®ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¤æ‚å®šåˆ¶éœ€æ±‚ã€æ—§é¡¹ç›®</td><td>æ–°é¡¹ç›®ã€è¿½æ±‚å¼€å‘ä½“éªŒ</td></tr><tr><td><strong>ç”Ÿæ€</strong></td><td>æ’ä»¶ä¸°å¯Œï¼ˆ10å¹´ç§¯ç´¯ï¼‰</td><td>å¿«é€Ÿè¿½èµ¶ï¼ˆå…¼å®¹ Rollup æ’ä»¶ï¼‰</td></tr></tbody></table><hr><h3 id="å…­ã€ä½•æ—¶ä»é€‰-webpack" tabindex="-1">å…­ã€ä½•æ—¶ä»é€‰ Webpackï¼Ÿ <a class="header-anchor" href="#å…­ã€ä½•æ—¶ä»é€‰-webpack" aria-label="Permalink to â€œå…­ã€ä½•æ—¶ä»é€‰ Webpackï¼Ÿâ€">â€‹</a></h3><ul><li>éœ€è¦æ·±åº¦å®šåˆ¶æ„å»ºæµç¨‹ï¼ˆå¦‚å¾®å‰ç«¯æ²™ç®±ï¼‰ï¼›</li><li>é¡¹ç›®é‡åº¦ä¾èµ– Webpack ç‰¹æœ‰æ’ä»¶ï¼ˆå¦‚ <code>Module Federation</code>ï¼‰ï¼›</li><li>å¿…é¡»æ”¯æŒ IE11ï¼ˆVite ä¸æ”¯æŒï¼‰ã€‚</li></ul><hr><h3 id="ä¸€å¥è¯æ€»ç»“-3" tabindex="-1">ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-3" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Vite å¿«åœ¨â€œä¸æ‰“åŒ…â€â€”â€”åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ ESM èƒ½åŠ›ï¼ŒæŒ‰éœ€ç¼–è¯‘æºç  + esbuild é¢„æ„å»ºä¾èµ–ï¼Œå½»åº•ç»•è¿‡ä¼ ç»Ÿæ‰“åŒ…å™¨çš„æ€§èƒ½ç“¶é¢ˆã€‚</strong></p></blockquote><h2 id="è¯´ä¸€ä¸‹ä½ å¯¹-monorepo-çš„ç†è§£" tabindex="-1">è¯´ä¸€ä¸‹ä½ å¯¹ Monorepo çš„ç†è§£ <a class="header-anchor" href="#è¯´ä¸€ä¸‹ä½ å¯¹-monorepo-çš„ç†è§£" aria-label="Permalink to â€œè¯´ä¸€ä¸‹ä½ å¯¹ Monorepo çš„ç†è§£â€">â€‹</a></h2><p><strong>Monorepoï¼ˆå•ä½“ä»“åº“ï¼‰</strong> æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘çš„æºç ç®¡ç†ç­–ç•¥ï¼š<strong>å°†å¤šä¸ªç›¸å…³é¡¹ç›®ï¼ˆå¦‚å¤šä¸ªåŒ…ã€åº”ç”¨ã€æœåŠ¡ï¼‰æ”¾åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“ä¸­è¿›è¡Œç»Ÿä¸€ç®¡ç†</strong>ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªé¡¹ç›®å•ç‹¬åˆ›å»ºä¸€ä¸ªä»“åº“ï¼ˆå³ Multirepo / Polyrepoï¼‰ã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒæ€æƒ³" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ€æƒ³ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ€æƒ³" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒæ€æƒ³â€">â€‹</a></h3><blockquote><p><strong>â€œé€»è¾‘åˆ†ç¦»ï¼Œç‰©ç†é›†ä¸­â€</strong><br> è™½ç„¶ä»£ç åœ¨åŒä¸€ä¸ª Git ä»“åº“é‡Œï¼Œä½†é€šè¿‡å·¥å…·å’Œè§„èŒƒä¿æŒå„å­é¡¹ç›®çš„<strong>ç‹¬ç«‹æ€§ã€å¯å¤ç”¨æ€§å’Œå¯å‘å¸ƒæ€§</strong>ã€‚</p></blockquote><h4 id="å…¸å‹ç»“æ„ç¤ºä¾‹" tabindex="-1">å…¸å‹ç»“æ„ç¤ºä¾‹ï¼š <a class="header-anchor" href="#å…¸å‹ç»“æ„ç¤ºä¾‹" aria-label="Permalink to â€œå…¸å‹ç»“æ„ç¤ºä¾‹ï¼šâ€">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-monorepo/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shared-utils/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å…±äº«å·¥å…·åº“ï¼ˆå¯ç‹¬ç«‹å‘å¸ƒï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ui-components/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # React ç»„ä»¶åº“</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web-app/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # ä¸» Web åº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mobile-app/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # React Native åº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # æ„å»º/éƒ¨ç½²è„šæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm-workspace.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æˆ– lerna.json, nx.json</span></span></code></pre></div><hr><h3 id="äºŒã€monorepo-çš„æ ¸å¿ƒä¼˜åŠ¿" tabindex="-1">äºŒã€Monorepo çš„æ ¸å¿ƒä¼˜åŠ¿ <a class="header-anchor" href="#äºŒã€monorepo-çš„æ ¸å¿ƒä¼˜åŠ¿" aria-label="Permalink to â€œäºŒã€Monorepo çš„æ ¸å¿ƒä¼˜åŠ¿â€">â€‹</a></h3><h4 id="âœ…-1-è·¨é¡¹ç›®åä½œæ›´é«˜æ•ˆ" tabindex="-1">âœ… 1. <strong>è·¨é¡¹ç›®åä½œæ›´é«˜æ•ˆ</strong> <a class="header-anchor" href="#âœ…-1-è·¨é¡¹ç›®åä½œæ›´é«˜æ•ˆ" aria-label="Permalink to â€œâœ… 1. è·¨é¡¹ç›®åä½œæ›´é«˜æ•ˆâ€">â€‹</a></h4><ul><li>ä¿®æ”¹ <code>shared-utils</code> åï¼Œ<strong>ç«‹å³åœ¨ <code>web-app</code> å’Œ <code>mobile-app</code> ä¸­éªŒè¯æ•ˆæœ</strong>ï¼›</li><li>é¿å… Multirepo ä¸­â€œæ”¹ A â†’ å‘ç‰ˆ â†’ å‡çº§ B â†’ æµ‹è¯• â†’ å‘ç°é—®é¢˜ â†’ å›æ»šâ€çš„ç¹çæµç¨‹ã€‚</li></ul><h4 id="âœ…-2-åŸå­åŒ–æäº¤-atomic-commits" tabindex="-1">âœ… 2. <strong>åŸå­åŒ–æäº¤ï¼ˆAtomic Commitsï¼‰</strong> <a class="header-anchor" href="#âœ…-2-åŸå­åŒ–æäº¤-atomic-commits" aria-label="Permalink to â€œâœ… 2. åŸå­åŒ–æäº¤ï¼ˆAtomic Commitsï¼‰â€">â€‹</a></h4><ul><li>ä¸€æ¬¡æäº¤å¯åŒæ—¶ä¿®æ”¹å¤šä¸ªåŒ…ï¼ˆå¦‚æ¥å£å˜æ›´ + å‰ç«¯è°ƒç”¨ + åç«¯å®ç°ï¼‰ï¼›</li><li>ä¿è¯ç³»ç»Ÿæ•´ä½“ä¸€è‡´æ€§ï¼Œé¿å…ç‰ˆæœ¬é”™é…ã€‚</li></ul><h4 id="âœ…-3-ç»Ÿä¸€æŠ€æœ¯æ ˆä¸è§„èŒƒ" tabindex="-1">âœ… 3. <strong>ç»Ÿä¸€æŠ€æœ¯æ ˆä¸è§„èŒƒ</strong> <a class="header-anchor" href="#âœ…-3-ç»Ÿä¸€æŠ€æœ¯æ ˆä¸è§„èŒƒ" aria-label="Permalink to â€œâœ… 3. ç»Ÿä¸€æŠ€æœ¯æ ˆä¸è§„èŒƒâ€">â€‹</a></h4><ul><li>å…±äº« ESLintã€TypeScriptã€Babelã€æµ‹è¯•é…ç½®ï¼›</li><li>å¼ºåˆ¶ä»£ç é£æ ¼ã€ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ï¼ˆé€šè¿‡ <code>pnpm overrides</code> æˆ– <code>yarn resolutions</code>ï¼‰ã€‚</li></ul><h4 id="âœ…-4-ä¾èµ–ç®¡ç†ä¼˜åŒ–" tabindex="-1">âœ… 4. <strong>ä¾èµ–ç®¡ç†ä¼˜åŒ–</strong> <a class="header-anchor" href="#âœ…-4-ä¾èµ–ç®¡ç†ä¼˜åŒ–" aria-label="Permalink to â€œâœ… 4. ä¾èµ–ç®¡ç†ä¼˜åŒ–â€">â€‹</a></h4><ul><li><strong>å•ä¸€ <code>node_modules</code></strong>ï¼ˆä½¿ç”¨ pnpm / Yarn Workspacesï¼‰ï¼š <ul><li>å‡å°‘ç£ç›˜å ç”¨ï¼ˆç›¸åŒä¾èµ–åªå®‰è£…ä¸€æ¬¡ï¼‰ï¼›</li><li>æ¶ˆé™¤â€œä¾èµ–åœ°ç‹±â€ï¼ˆä¸åŒåŒ…ä¾èµ–åŒä¸€åº“çš„ä¸åŒç‰ˆæœ¬ï¼‰ã€‚</li></ul></li></ul><h4 id="âœ…-5-ç®€åŒ–-ci-cd-ä¸è‡ªåŠ¨åŒ–" tabindex="-1">âœ… 5. <strong>ç®€åŒ– CI/CD ä¸è‡ªåŠ¨åŒ–</strong> <a class="header-anchor" href="#âœ…-5-ç®€åŒ–-ci-cd-ä¸è‡ªåŠ¨åŒ–" aria-label="Permalink to â€œâœ… 5. ç®€åŒ– CI/CD ä¸è‡ªåŠ¨åŒ–â€">â€‹</a></h4><ul><li>ä¸€æ¬¡ PR å¯è§¦å‘æ‰€æœ‰å—å½±å“é¡¹ç›®çš„æµ‹è¯•ï¼›</li><li>å·¥å…·ï¼ˆå¦‚ Nxã€Turborepoï¼‰èƒ½<strong>æ™ºèƒ½è®¡ç®—å½±å“èŒƒå›´</strong>ï¼Œåªæ„å»º/æµ‹è¯•å˜æ›´ç›¸å…³çš„åŒ…ã€‚</li></ul><hr><h3 id="ä¸‰ã€monorepo-çš„æŒ‘æˆ˜ä¸åº”å¯¹" tabindex="-1">ä¸‰ã€Monorepo çš„æŒ‘æˆ˜ä¸åº”å¯¹ <a class="header-anchor" href="#ä¸‰ã€monorepo-çš„æŒ‘æˆ˜ä¸åº”å¯¹" aria-label="Permalink to â€œä¸‰ã€Monorepo çš„æŒ‘æˆ˜ä¸åº”å¯¹â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æŒ‘æˆ˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ä»“åº“ä½“ç§¯è†¨èƒ€</strong></td><td>ä½¿ç”¨ <code>.gitignore</code> + å·¥å…·ï¼ˆå¦‚ Nxï¼‰æŒ‰éœ€å…‹éš†</td></tr><tr><td><strong>æƒé™æ§åˆ¶å›°éš¾</strong></td><td>Git å­ç›®å½•æƒé™ï¼ˆGitHub CODEOWNERSï¼‰</td></tr><tr><td><strong>æ„å»º/æµ‹è¯•å˜æ…¢</strong></td><td><strong>å¢é‡æ„å»º</strong>ï¼ˆNx/Turborepo ç¼“å­˜ï¼‰</td></tr><tr><td><strong>å‘å¸ƒæµç¨‹å¤æ‚</strong></td><td>è‡ªåŠ¨åŒ–è¯­ä¹‰åŒ–å‘å¸ƒï¼ˆChangesets, Lernaï¼‰</td></tr><tr><td><strong>å›¢é˜Ÿè®¤çŸ¥è´Ÿæ‹…</strong></td><td>æ¸…æ™°æ–‡æ¡£ + ç›®å½•è§„èŒƒ + å·¥å…·è„šæ‰‹æ¶</td></tr></tbody></table><hr><h3 id="å››ã€ä¸»æµ-monorepo-å·¥å…·å¯¹æ¯”" tabindex="-1">å››ã€ä¸»æµ Monorepo å·¥å…·å¯¹æ¯” <a class="header-anchor" href="#å››ã€ä¸»æµ-monorepo-å·¥å…·å¯¹æ¯”" aria-label="Permalink to â€œå››ã€ä¸»æµ Monorepo å·¥å…·å¯¹æ¯”â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>pnpm + Workspaces</strong></td><td>è½»é‡ã€åŸç”Ÿæ”¯æŒã€ä¾èµ–æ‰å¹³åŒ–</td><td>ç®€å•å…±äº«ä¾èµ–</td></tr><tr><td><strong>Yarn Workspaces</strong></td><td>ç”Ÿæ€æˆç†Ÿã€ä¸ Yarn æ·±åº¦é›†æˆ</td><td>å·²ä½¿ç”¨ Yarn çš„é¡¹ç›®</td></tr><tr><td><strong>Lerna</strong></td><td>ä¸“æ³¨åŒ…ç®¡ç†ï¼ˆå‘å¸ƒ/ç‰ˆæœ¬ï¼‰</td><td>å¤š npm åŒ…ç»´æŠ¤</td></tr><tr><td><strong>Nx</strong></td><td>æ™ºèƒ½ä»»åŠ¡è°ƒåº¦ã€è¿œç¨‹ç¼“å­˜ã€æ’ä»¶ç”Ÿæ€</td><td>å¤§å‹å…¨æ ˆé¡¹ç›®ï¼ˆReact + Node + NestJSï¼‰</td></tr><tr><td><strong>Turborepo</strong></td><td>æé€Ÿå¢é‡æ„å»ºã€äº‘ç¼“å­˜ã€ç®€å•é…ç½®</td><td>Vite/Next.js ç­‰ç°ä»£æ¡†æ¶</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>è¶‹åŠ¿</strong>ï¼š<br> æ–°é¡¹ç›®æ¨è <strong>pnpm + Turborepo/Nx</strong> â€”â€” pnpm è§£å†³ä¾èµ–ï¼ŒTurborepo/Nx è§£å†³ä»»åŠ¡ç¼–æ’ã€‚</p></blockquote><hr><h3 id="äº”ã€å…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1">äº”ã€å…¸å‹åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#äº”ã€å…¸å‹åº”ç”¨åœºæ™¯" aria-label="Permalink to â€œäº”ã€å…¸å‹åº”ç”¨åœºæ™¯â€">â€‹</a></h3><ol><li><strong>ç»„ä»¶åº“ + åº”ç”¨</strong><ul><li>å¦‚ï¼š<code>@myorg/ui</code> ç»„ä»¶åº“ + <code>dashboard</code> åå°ç³»ç»Ÿã€‚</li></ul></li><li><strong>å¾®å‰ç«¯æ¶æ„</strong><ul><li>ä¸»åº”ç”¨ + å¤šä¸ªå­åº”ç”¨ï¼ˆ<code>app1</code>, <code>app2</code>ï¼‰å…±äº«å·¥å…·å‡½æ•°ã€‚</li></ul></li><li><strong>å…¨æ ˆé¡¹ç›®</strong><ul><li>å‰ç«¯ï¼ˆReactï¼‰ã€åç«¯ï¼ˆNestJSï¼‰ã€CLI å·¥å…·å…±ç”¨ç±»å‹å®šä¹‰å’Œå·¥å…·å‡½æ•°ã€‚</li></ul></li><li><strong>å¤šç«¯åº”ç”¨</strong><ul><li>Web + Mobile (React Native) + Desktop (Electron) å…±äº«ä¸šåŠ¡é€»è¾‘ã€‚</li></ul></li></ol><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-5" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-5" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Monorepo ä¸æ˜¯â€œæŠŠæ‰€æœ‰ä»£ç å¡è¿›ä¸€ä¸ªä»“åº“â€ï¼Œè€Œæ˜¯é€šè¿‡å·¥å…·é“¾å®ç°â€œé«˜å†…èšã€ä½è€¦åˆâ€çš„ååŒå¼€å‘æ¨¡å¼â€”â€”å®ƒç”¨å·¥ç¨‹åŒ–æ‰‹æ®µè§£å†³äº†è·¨é¡¹ç›®åä½œçš„æ‘©æ“¦ï¼Œæ˜¯å¤§å‹å‰ç«¯å›¢é˜Ÿæå‡äº¤ä»˜æ•ˆç‡çš„å…³é”®å®è·µã€‚</strong></p></blockquote><h2 id="ä½ åœ¨é¡¹ç›®æ˜¯æ€ä¹ˆåš-monorepo" tabindex="-1">ä½ åœ¨é¡¹ç›®æ˜¯æ€ä¹ˆåš Monorepoï¼Ÿ <a class="header-anchor" href="#ä½ åœ¨é¡¹ç›®æ˜¯æ€ä¹ˆåš-monorepo" aria-label="Permalink to â€œä½ åœ¨é¡¹ç›®æ˜¯æ€ä¹ˆåš Monorepoï¼Ÿâ€">â€‹</a></h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘é‡‡ç”¨ <strong>â€œpnpm + Turborepo + Changesetsâ€</strong> çš„ç»„åˆæ¥æ­å»ºå’Œç»´æŠ¤ Monorepoï¼Œå…¼é¡¾<strong>å¼€å‘ä½“éªŒã€æ„å»ºæ€§èƒ½ã€ä¾èµ–ç®¡ç†å’Œå‘å¸ƒæµç¨‹</strong>ã€‚ä»¥ä¸‹æ˜¯æˆ‘è½åœ° Monorepo çš„å®Œæ•´å®è·µæ–¹æ¡ˆï¼š</p><hr><h3 id="ä¸€ã€é¡¹ç›®ç»“æ„è®¾è®¡-æ¸…æ™°åˆ†å±‚" tabindex="-1">ä¸€ã€é¡¹ç›®ç»“æ„è®¾è®¡ï¼ˆæ¸…æ™°åˆ†å±‚ï¼‰ <a class="header-anchor" href="#ä¸€ã€é¡¹ç›®ç»“æ„è®¾è®¡-æ¸…æ™°åˆ†å±‚" aria-label="Permalink to â€œä¸€ã€é¡¹ç›®ç»“æ„è®¾è®¡ï¼ˆæ¸…æ™°åˆ†å±‚ï¼‰â€">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-project/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  # åº”ç”¨å±‚ï¼ˆå¯ç‹¬ç«‹éƒ¨ç½²ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # Next.js å‰ç«¯åº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # NestJS åç«¯æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # å…±äº«åŒ…ï¼ˆå¯ç‹¬ç«‹å‘å¸ƒï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ui/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # React ç»„ä»¶åº“ï¼ˆå« Storybookï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> types/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # å…¨å±€ TypeScript ç±»å‹å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # ESLint / TypeScript / Babel å…±äº«é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> utils/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # å·¥å…·å‡½æ•°ï¼ˆå¦‚æ—¥æœŸå¤„ç†ã€API å®¢æˆ·ç«¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # è‡ªå®šä¹‰è„šæœ¬ï¼ˆå¦‚ä»£ç ç”Ÿæˆå™¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package.json</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # æ ¹å·¥ä½œåŒºå£°æ˜</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm-workspace.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # pnpm å·¥ä½œåŒºé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> turbo.json</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # Turborepo ä»»åŠ¡ç¼–æ’</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .changeset/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Changesets å‘å¸ƒé…ç½®</span></span></code></pre></div><blockquote><p>âœ… <strong>åŸåˆ™</strong>ï¼š</p><ul><li><code>apps/</code> åªåŒ…å«å¯è¿è¡Œçš„åº”ç”¨ï¼›</li><li><code>packages/</code> å¿…é¡»æ˜¯<strong>æ— å‰¯ä½œç”¨ã€å¯ç‹¬ç«‹æµ‹è¯•ã€å¯å‘å¸ƒ</strong>çš„æ¨¡å—ã€‚</li></ul></blockquote><hr><h3 id="äºŒã€æ ¸å¿ƒå·¥å…·é“¾é€‰å‹ä¸é…ç½®" tabindex="-1">äºŒã€æ ¸å¿ƒå·¥å…·é“¾é€‰å‹ä¸é…ç½® <a class="header-anchor" href="#äºŒã€æ ¸å¿ƒå·¥å…·é“¾é€‰å‹ä¸é…ç½®" aria-label="Permalink to â€œäºŒã€æ ¸å¿ƒå·¥å…·é“¾é€‰å‹ä¸é…ç½®â€">â€‹</a></h3><h4 id="_1-ä¾èµ–ç®¡ç†-pnpm-workspaces" tabindex="-1">1. <strong>ä¾èµ–ç®¡ç†ï¼špnpm Workspaces</strong> <a class="header-anchor" href="#_1-ä¾èµ–ç®¡ç†-pnpm-workspaces" aria-label="Permalink to â€œ1. ä¾èµ–ç®¡ç†ï¼špnpm Workspacesâ€">â€‹</a></h4><ul><li><p><strong>ä¼˜åŠ¿</strong>ï¼šç¡¬é“¾æ¥ + ç¬¦å·é“¾æ¥ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´ï¼Œé¿å…ä¾èµ–å†²çªã€‚</p></li><li><p><strong>é…ç½®</strong>ï¼š</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pnpm-workspace.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;apps/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;packages/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tools/*&quot;</span></span></code></pre></div></li><li><p><strong>ä½¿ç”¨</strong>ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨ web åº”ç”¨ä¸­æ·»åŠ å¯¹ ui åŒ…çš„ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @myorg/ui</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./apps/web</span></span></code></pre></div></li></ul><h4 id="_2-ä»»åŠ¡ç¼–æ’-turborepo-å…³é”®æé€Ÿ" tabindex="-1">2. <strong>ä»»åŠ¡ç¼–æ’ï¼šTurborepoï¼ˆå…³é”®æé€Ÿï¼‰</strong> <a class="header-anchor" href="#_2-ä»»åŠ¡ç¼–æ’-turborepo-å…³é”®æé€Ÿ" aria-label="Permalink to â€œ2. ä»»åŠ¡ç¼–æ’ï¼šTurborepoï¼ˆå…³é”®æé€Ÿï¼‰â€">â€‹</a></h4><ul><li><p><strong>ä½œç”¨</strong>ï¼šæ™ºèƒ½å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ + è¿œç¨‹ç¼“å­˜ã€‚</p></li><li><p><strong>é…ç½®</strong>ï¼š</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// turbo.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;pipeline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;dependsOn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¾èµ–å…¶ä»–åŒ…çš„ build</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;outputs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.next/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;dependsOn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;outputs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cache&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å‘å‘½ä»¤ä¸ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;persistent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æŒä¹…åŒ–è¿è¡Œï¼ˆå¦‚ dev serverï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>æ•ˆæœ</strong>ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åªæ„å»ºå—å½±å“çš„åŒ…ï¼ˆåˆ©ç”¨ç¼“å­˜ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> turbo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¹¶è¡Œå¯åŠ¨æ‰€æœ‰åº”ç”¨çš„å¼€å‘æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> turbo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --parallel</span></span></code></pre></div></li></ul><h4 id="_3-ç‰ˆæœ¬å‘å¸ƒ-changesets-è‡ªåŠ¨åŒ–è¯­ä¹‰åŒ–å‘å¸ƒ" tabindex="-1">3. <strong>ç‰ˆæœ¬å‘å¸ƒï¼šChangesetsï¼ˆè‡ªåŠ¨åŒ–è¯­ä¹‰åŒ–å‘å¸ƒï¼‰</strong> <a class="header-anchor" href="#_3-ç‰ˆæœ¬å‘å¸ƒ-changesets-è‡ªåŠ¨åŒ–è¯­ä¹‰åŒ–å‘å¸ƒ" aria-label="Permalink to â€œ3. ç‰ˆæœ¬å‘å¸ƒï¼šChangesetsï¼ˆè‡ªåŠ¨åŒ–è¯­ä¹‰åŒ–å‘å¸ƒï¼‰â€">â€‹</a></h4><ul><li><strong>æµç¨‹</strong>ï¼š <ol><li>å¼€å‘è€…æäº¤ PR æ—¶ï¼Œè¿è¡Œ <code>pnpm changeset</code> ç”Ÿæˆå˜æ›´è®°å½•ï¼›</li><li>CI åˆå¹¶ PR åï¼Œè‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬å‘å¸ƒ PRï¼›</li><li>åˆå¹¶å‘å¸ƒ PR â†’ è‡ªåŠ¨æ‰“ tag + å‘å¸ƒ npm åŒ…ã€‚</li></ol></li><li><strong>ä¼˜åŠ¿</strong>ï¼š <ul><li>ç²¾ç¡®æ§åˆ¶æ¯ä¸ªåŒ…çš„ç‰ˆæœ¬ï¼ˆmajor/minor/patchï¼‰ï¼›</li><li>è‡ªåŠ¨ç”Ÿæˆ CHANGELOGã€‚</li></ul></li></ul><hr><h3 id="ä¸‰ã€å…³é”®å®è·µç»†èŠ‚" tabindex="-1">ä¸‰ã€å…³é”®å®è·µç»†èŠ‚ <a class="header-anchor" href="#ä¸‰ã€å…³é”®å®è·µç»†èŠ‚" aria-label="Permalink to â€œä¸‰ã€å…³é”®å®è·µç»†èŠ‚â€">â€‹</a></h3><h4 id="âœ…-1-å…±äº«é…ç½®-é¿å…é‡å¤" tabindex="-1">âœ… 1. <strong>å…±äº«é…ç½®ï¼ˆé¿å…é‡å¤ï¼‰</strong> <a class="header-anchor" href="#âœ…-1-å…±äº«é…ç½®-é¿å…é‡å¤" aria-label="Permalink to â€œâœ… 1. å…±äº«é…ç½®ï¼ˆé¿å…é‡å¤ï¼‰â€">â€‹</a></h4><ul><li>å°† ESLintã€TypeScriptã€Jest é…ç½®æŠ½ç¦»åˆ° <code>packages/config</code>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// apps/web/eslint.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> baseConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@myorg/config/eslint&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">baseConfig, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* é¡¹ç›®ç‰¹æœ‰è§„åˆ™ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre></div></li></ul><h4 id="âœ…-2-ç±»å‹å®‰å…¨è·¨åŒ…å¼•ç”¨" tabindex="-1">âœ… 2. <strong>ç±»å‹å®‰å…¨è·¨åŒ…å¼•ç”¨</strong> <a class="header-anchor" href="#âœ…-2-ç±»å‹å®‰å…¨è·¨åŒ…å¼•ç”¨" aria-label="Permalink to â€œâœ… 2. ç±»å‹å®‰å…¨è·¨åŒ…å¼•ç”¨â€">â€‹</a></h4><ul><li><code>packages/types</code> å¯¼å‡ºå…¨å±€ç±»å‹ï¼š<div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/types/src/user.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// apps/web/src/pages/profile.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { User } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@myorg/types&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç±»å‹å®‰å…¨ï¼</span></span></code></pre></div></li></ul><h4 id="âœ…-3-æœ¬åœ°å¼€å‘è”åŠ¨" tabindex="-1">âœ… 3. <strong>æœ¬åœ°å¼€å‘è”åŠ¨</strong> <a class="header-anchor" href="#âœ…-3-æœ¬åœ°å¼€å‘è”åŠ¨" aria-label="Permalink to â€œâœ… 3. æœ¬åœ°å¼€å‘è”åŠ¨â€">â€‹</a></h4><ul><li>ä¿®æ”¹ <code>packages/ui</code> åï¼Œ<code>apps/web</code> <strong>å®æ—¶çƒ­æ›´æ–°</strong>ï¼ˆæ— éœ€é‡æ–°å®‰è£…ï¼‰ï¼›</li><li>é€šè¿‡ <code>pnpm link</code> æˆ– Turborepo çš„ <code>--continue</code> ä¿è¯ä¸€è‡´æ€§ã€‚</li></ul><h4 id="âœ…-4-ci-ä¼˜åŒ–-åªè·‘å—å½±å“çš„ä»»åŠ¡" tabindex="-1">âœ… 4. <strong>CI ä¼˜åŒ–ï¼ˆåªè·‘å—å½±å“çš„ä»»åŠ¡ï¼‰</strong> <a class="header-anchor" href="#âœ…-4-ci-ä¼˜åŒ–-åªè·‘å—å½±å“çš„ä»»åŠ¡" aria-label="Permalink to â€œâœ… 4. CI ä¼˜åŒ–ï¼ˆåªè·‘å—å½±å“çš„ä»»åŠ¡ï¼‰â€">â€‹</a></h4><ul><li>GitHub Actions ç¤ºä¾‹ï¼š<div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Run affected tests</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    TURBO_TOKEN=\${{ secrets.TURBO_TOKEN }}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    TURBO_TEAM=\${{ vars.TURBO_TEAM }}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    pnpm turbo run test --filter=...</span></span></code></pre></div></li><li>åˆ©ç”¨ Turborepo <strong>è¿œç¨‹ç¼“å­˜</strong>ï¼Œè·³è¿‡å·²æ„å»ºçš„åŒ…ã€‚</li></ul><hr><h3 id="å››ã€é¿å‘ç»éªŒ" tabindex="-1">å››ã€é¿å‘ç»éªŒ <a class="header-anchor" href="#å››ã€é¿å‘ç»éªŒ" aria-label="Permalink to â€œå››ã€é¿å‘ç»éªŒâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>å¾ªç¯ä¾èµ–</strong></td><td>ç”¨ <code>madge</code> æ‰«æä¾èµ–å›¾ï¼Œç¦æ­¢ <code>packages/</code> é—´å¾ªç¯å¼•ç”¨</td></tr><tr><td><strong>å‘å¸ƒæ··ä¹±</strong></td><td>å¼ºåˆ¶ PR å…³è” Changeset æ–‡ä»¶ï¼Œå¦åˆ™ CI å¤±è´¥</td></tr><tr><td><strong>æ„å»ºç¼“æ…¢</strong></td><td>å¯ç”¨ Turborepo è¿œç¨‹ç¼“å­˜ï¼ˆVercel æä¾›å…è´¹é¢åº¦ï¼‰</td></tr><tr><td><strong>IDE å¡é¡¿</strong></td><td>åœ¨ VS Code ä¸­æ’é™¤ <code>node_modules</code> å’Œæ„å»ºäº§ç‰©ç›®å½•</td></tr></tbody></table><hr><h3 id="äº”ã€æ•ˆæœå¯¹æ¯”-çœŸå®é¡¹ç›®æ•°æ®" tabindex="-1">äº”ã€æ•ˆæœå¯¹æ¯”ï¼ˆçœŸå®é¡¹ç›®æ•°æ®ï¼‰ <a class="header-anchor" href="#äº”ã€æ•ˆæœå¯¹æ¯”-çœŸå®é¡¹ç›®æ•°æ®" aria-label="Permalink to â€œäº”ã€æ•ˆæœå¯¹æ¯”ï¼ˆçœŸå®é¡¹ç›®æ•°æ®ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>æŒ‡æ ‡</th><th>Multirepo</th><th>Monorepo (pnpm+Turborepo)</th></tr></thead><tbody><tr><td>é¦–æ¬¡å®‰è£…ä¾èµ–</td><td>8 åˆ†é’Ÿ</td><td>2 åˆ†é’Ÿï¼ˆç¡¬é“¾æ¥å¤ç”¨ï¼‰</td></tr><tr><td>å…¨é‡æ„å»º</td><td>120s</td><td>45sï¼ˆç¼“å­˜ + å¹¶è¡Œï¼‰</td></tr><tr><td>è·¨åŒ…ä¿®æ”¹éªŒè¯</td><td>éœ€æ‰‹åŠ¨ link/å‘ç‰ˆ</td><td>ä¿å­˜å³ç”Ÿæ•ˆ</td></tr><tr><td>æ–°æˆå‘˜ä¸Šæ‰‹</td><td>éœ€é…ç½®å¤šä¸ªä»“åº“</td><td>å…‹éš†ä¸€ä¸ªä»“åº“ + <code>pnpm install</code></td></tr></tbody></table><hr><h3 id="ä¸€å¥è¯æ€»ç»“-4" tabindex="-1">ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#ä¸€å¥è¯æ€»ç»“-4" aria-label="Permalink to â€œä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>æˆ‘çš„ Monorepo å®è·µ = pnpmï¼ˆä¾èµ–ï¼‰ + Turborepoï¼ˆæ„å»ºï¼‰ + Changesetsï¼ˆå‘å¸ƒï¼‰ + ä¸¥æ ¼åˆ†å±‚ï¼ˆæ¶æ„ï¼‰ï¼Œç›®æ ‡æ˜¯è®©è·¨é¡¹ç›®åä½œåƒå•ä½“åº”ç”¨ä¸€æ ·ç®€å•ï¼ŒåŒæ—¶ä¿ç•™å¾®åŒ…çš„çµæ´»æ€§ã€‚</strong></p></blockquote><h2 id="ä¸ºä»€ä¹ˆ-pnpm-æ¯”-npm-å¿«" tabindex="-1">ä¸ºä»€ä¹ˆ pnpm æ¯” npm å¿«ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-pnpm-æ¯”-npm-å¿«" aria-label="Permalink to â€œä¸ºä»€ä¹ˆ pnpm æ¯” npm å¿«ï¼Ÿâ€">â€‹</a></h2><p><code>pnpm</code> æ¯” <code>npm</code> å¿«ï¼Œ<strong>æ ¸å¿ƒåŸå› åœ¨äºå…¶ç‹¬ç‰¹çš„ä¾èµ–å­˜å‚¨å’Œå®‰è£…æœºåˆ¶</strong>â€”â€”å®ƒé€šè¿‡ <strong>ç¡¬é“¾æ¥ï¼ˆhard linksï¼‰ + ç¬¦å·é“¾æ¥ï¼ˆsymlinksï¼‰ + å†…å®¹å¯å¯»å€å­˜å‚¨ï¼ˆContent-Addressable Storeï¼‰</strong>ï¼Œé¿å…äº†é‡å¤ä¸‹è½½å’Œå¤åˆ¶æ–‡ä»¶ï¼Œå¤§å¹…æå‡äº†å®‰è£…é€Ÿåº¦ã€èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¹¶ä¿è¯äº†ä¾èµ–ä¸€è‡´æ€§ã€‚</p><hr><h3 id="ä¸€ã€æ ¹æœ¬åŒºåˆ«-ä¾èµ–å­˜å‚¨æ¨¡å‹" tabindex="-1">ä¸€ã€æ ¹æœ¬åŒºåˆ«ï¼šä¾èµ–å­˜å‚¨æ¨¡å‹ <a class="header-anchor" href="#ä¸€ã€æ ¹æœ¬åŒºåˆ«-ä¾èµ–å­˜å‚¨æ¨¡å‹" aria-label="Permalink to â€œä¸€ã€æ ¹æœ¬åŒºåˆ«ï¼šä¾èµ–å­˜å‚¨æ¨¡å‹â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åŒ…ç®¡ç†å™¨</th><th>ä¾èµ–å­˜å‚¨æ–¹å¼</th><th>ç£ç›˜å ç”¨</th><th>å®‰è£…é€Ÿåº¦</th></tr></thead><tbody><tr><td><strong>npm</strong></td><td>æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ <code>node_modules</code>ï¼ˆåµŒå¥—æˆ–æ‰å¹³ï¼‰</td><td>é«˜ï¼ˆé‡å¤ä¾èµ–å¤šæ¬¡å­˜å‚¨ï¼‰</td><td>æ…¢ï¼ˆå¤§é‡æ–‡ä»¶å¤åˆ¶ï¼‰</td></tr><tr><td><strong>pnpm</strong></td><td>å…¨å±€å†…å®¹å¯å¯»å€å­˜å‚¨ + ç¡¬é“¾æ¥</td><td>æä½ï¼ˆç›¸åŒä¾èµ–åªå­˜ä¸€ä»½ï¼‰</td><td>æå¿«ï¼ˆæ— æ–‡ä»¶å¤åˆ¶ï¼‰</td></tr></tbody></table><hr><h3 id="äºŒã€pnpm-çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯" tabindex="-1">äºŒã€pnpm çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯ <a class="header-anchor" href="#äºŒã€pnpm-çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯" aria-label="Permalink to â€œäºŒã€pnpm çš„ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯â€">â€‹</a></h3><h4 id="_1-å…¨å±€å†…å®¹å¯å¯»å€å­˜å‚¨-store" tabindex="-1">1. <strong>å…¨å±€å†…å®¹å¯å¯»å€å­˜å‚¨ï¼ˆStoreï¼‰</strong> <a class="header-anchor" href="#_1-å…¨å±€å†…å®¹å¯å¯»å€å­˜å‚¨-store" aria-label="Permalink to â€œ1. å…¨å±€å†…å®¹å¯å¯»å€å­˜å‚¨ï¼ˆStoreï¼‰â€">â€‹</a></h4><ul><li>æ‰€æœ‰ä¾èµ–åŒ…è¢«è§£å‹å¹¶å­˜å‚¨åœ¨ <strong>å…¨å±€å”¯ä¸€ä½ç½®</strong>ï¼ˆå¦‚ <code>~/.pnpm-store</code>ï¼‰ï¼›</li><li>è·¯å¾„æŒ‰ <strong>åŒ…å + ç‰ˆæœ¬ + å®Œæ•´ä¾èµ–æ ‘å“ˆå¸Œ</strong> ç”Ÿæˆï¼Œç¡®ä¿<strong>å®Œå…¨ç¡®å®šæ€§</strong>ï¼š<div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>~/.pnpm-store/v3/files/</span></span>
<span class="line"><span>â””â”€â”€ abc123.../         # æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œ</span></span>
<span class="line"><span>    â””â”€â”€ index.js       # å®é™…æ–‡ä»¶å†…å®¹</span></span></code></pre></div></li></ul><h4 id="_2-ç¡¬é“¾æ¥-hard-links-å¤ç”¨æ–‡ä»¶" tabindex="-1">2. <strong>ç¡¬é“¾æ¥ï¼ˆHard Linksï¼‰å¤ç”¨æ–‡ä»¶</strong> <a class="header-anchor" href="#_2-ç¡¬é“¾æ¥-hard-links-å¤ç”¨æ–‡ä»¶" aria-label="Permalink to â€œ2. ç¡¬é“¾æ¥ï¼ˆHard Linksï¼‰å¤ç”¨æ–‡ä»¶â€">â€‹</a></h4><ul><li>å½“é¡¹ç›®éœ€è¦æŸä¸ªä¾èµ–æ—¶ï¼Œpnpm <strong>ä¸åœ¨ <code>node_modules</code> ä¸­å¤åˆ¶æ–‡ä»¶</strong>ï¼Œè€Œæ˜¯åˆ›å»º<strong>ç¡¬é“¾æ¥</strong>æŒ‡å‘å…¨å±€ Store ä¸­çš„æ–‡ä»¶ï¼›</li><li><strong>ç¡¬é“¾æ¥ç‰¹ç‚¹</strong>ï¼š <ul><li>å¤šä¸ªè·¯å¾„æŒ‡å‘åŒä¸€ä»½ç‰©ç†æ•°æ®ï¼›</li><li>ä¿®æ”¹ä»»ä¸€é“¾æ¥ = ä¿®æ”¹æ‰€æœ‰ï¼ˆä½†ä¾èµ–æ˜¯åªè¯»çš„ï¼Œå®‰å…¨ï¼‰ï¼›</li><li>å‡ ä¹é›¶ç£ç›˜å¼€é”€ &amp; é›¶å¤åˆ¶æ—¶é—´ã€‚</li></ul></li></ul><blockquote><p>ğŸ’¡ <strong>å¯¹æ¯” npm</strong>ï¼š<br> npm ä¼šå°†æ¯ä¸ªä¾èµ–å®Œæ•´å¤åˆ¶åˆ° <code>node_modules</code>ï¼Œ10 ä¸ªé¡¹ç›®ç”¨åŒä¸€ä¸ª lodash â†’ ç£ç›˜å­˜ 10 ä»½ã€‚</p></blockquote><h4 id="_3-ç¬¦å·é“¾æ¥-symlinks-æ„å»ºä¾èµ–æ ‘" tabindex="-1">3. <strong>ç¬¦å·é“¾æ¥ï¼ˆSymlinksï¼‰æ„å»ºä¾èµ–æ ‘</strong> <a class="header-anchor" href="#_3-ç¬¦å·é“¾æ¥-symlinks-æ„å»ºä¾èµ–æ ‘" aria-label="Permalink to â€œ3. ç¬¦å·é“¾æ¥ï¼ˆSymlinksï¼‰æ„å»ºä¾èµ–æ ‘â€">â€‹</a></h4><ul><li>pnpm åœ¨é¡¹ç›® <code>node_modules</code> ä¸­åªåˆ›å»º<strong>ç¬¦å·é“¾æ¥</strong>ï¼Œå½¢æˆç¬¦åˆ Node.js è§£æè§„åˆ™çš„ç›®å½•ç»“æ„ï¼š<div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-project/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node_modules/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .pnpm/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # çœŸå®ä¾èµ–å­˜å‚¨åŒºï¼ˆæ‰å¹³åŒ–ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash@4.17.21</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.pnpm-store/...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â”‚</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react@18.2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.pnpm-store/...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .pnpm/lodash@4.17.21/node_modules/lodash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .pnpm/react@18.2.0/node_modules/react</span></span></code></pre></div></li><li><strong>ä¼˜åŠ¿</strong>ï¼š <ul><li>é¿å… npm/yarn çš„â€œå¹½çµä¾èµ–â€ï¼ˆphantom dependenciesï¼‰ï¼›</li><li>ä¸¥æ ¼éµå¾ª <code>package.json</code> å£°æ˜çš„ä¾èµ–å…³ç³»ã€‚</li></ul></li></ul><hr><h3 id="ä¸‰ã€æ€§èƒ½å¯¹æ¯”-å®æµ‹æ•°æ®" tabindex="-1">ä¸‰ã€æ€§èƒ½å¯¹æ¯”ï¼ˆå®æµ‹æ•°æ®ï¼‰ <a class="header-anchor" href="#ä¸‰ã€æ€§èƒ½å¯¹æ¯”-å®æµ‹æ•°æ®" aria-label="Permalink to â€œä¸‰ã€æ€§èƒ½å¯¹æ¯”ï¼ˆå®æµ‹æ•°æ®ï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>npm (v9)</th><th>pnpm (v8)</th><th>æå‡</th></tr></thead><tbody><tr><td><strong>é¦–æ¬¡å®‰è£…</strong>ï¼ˆå¤§å‹é¡¹ç›®ï¼‰</td><td>45s</td><td>22s</td><td>â‰ˆ2x</td></tr><tr><td><strong>äºŒæ¬¡å®‰è£…</strong>ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰</td><td>30s</td><td><strong>3s</strong></td><td><strong>10x</strong></td></tr><tr><td><strong>ç£ç›˜å ç”¨</strong>ï¼ˆ10 ä¸ªç›¸ä¼¼é¡¹ç›®ï¼‰</td><td>1.2 GB</td><td><strong>200 MB</strong></td><td><strong>6x èŠ‚çœ</strong></td></tr><tr><td><strong>CI ç¯å¢ƒå®‰è£…</strong></td><td>æ…¢ï¼ˆéœ€ä¸‹è½½+è§£å‹ï¼‰</td><td>æå¿«ï¼ˆå¤ç”¨ Storeï¼‰</td><td>æ˜¾è‘—æé€Ÿ</td></tr></tbody></table><blockquote><p>ğŸ” <strong>å…³é”®</strong>ï¼špnpm çš„ Store å¯è·¨é¡¹ç›®ã€è·¨ CI Job å¤ç”¨ï¼ˆé…åˆç¼“å­˜ç­–ç•¥ï¼‰ã€‚</p></blockquote><hr><h3 id="å››ã€é¢å¤–ä¼˜åŠ¿-ä¸ä»…æ˜¯å¿«" tabindex="-1">å››ã€é¢å¤–ä¼˜åŠ¿ï¼ˆä¸ä»…æ˜¯å¿«ï¼‰ <a class="header-anchor" href="#å››ã€é¢å¤–ä¼˜åŠ¿-ä¸ä»…æ˜¯å¿«" aria-label="Permalink to â€œå››ã€é¢å¤–ä¼˜åŠ¿ï¼ˆä¸ä»…æ˜¯å¿«ï¼‰â€">â€‹</a></h3><h4 id="âœ…-1-æœç»-å¹½çµä¾èµ–" tabindex="-1">âœ… 1. <strong>æœç»â€œå¹½çµä¾èµ–â€</strong> <a class="header-anchor" href="#âœ…-1-æœç»-å¹½çµä¾èµ–" aria-label="Permalink to â€œâœ… 1. æœç»â€œå¹½çµä¾èµ–â€â€">â€‹</a></h4><ul><li>npm/yarn å…è®¸ä»£ç ç›´æ¥å¼•ç”¨æœªå£°æ˜çš„ä¾èµ–ï¼ˆå›  <code>node_modules</code> æ‰å¹³åŒ–ï¼‰ï¼›</li><li>pnpm çš„ä¸¥æ ¼ç¬¦å·é“¾æ¥ç»“æ„<strong>å¼ºåˆ¶æ˜¾å¼å£°æ˜ä¾èµ–</strong>ï¼Œæå‡é¡¹ç›®å¥å£®æ€§ã€‚</li></ul><h4 id="âœ…-2-monorepo-å‹å¥½" tabindex="-1">âœ… 2. <strong>Monorepo å‹å¥½</strong> <a class="header-anchor" href="#âœ…-2-monorepo-å‹å¥½" aria-label="Permalink to â€œâœ… 2. Monorepo å‹å¥½â€">â€‹</a></h4><ul><li>åœ¨ Monorepo ä¸­ï¼Œæ‰€æœ‰å­é¡¹ç›®å…±äº«åŒä¸€ä¸ª Storeï¼›</li><li><code>pnpm install</code> ä¸€æ¬¡å®‰è£…æ‰€æœ‰ workspace ä¾èµ–ï¼Œæ— é‡å¤ã€‚</li></ul><h4 id="âœ…-3-ç¦»çº¿æ¨¡å¼æ›´å¼º" tabindex="-1">âœ… 3. <strong>ç¦»çº¿æ¨¡å¼æ›´å¼º</strong> <a class="header-anchor" href="#âœ…-3-ç¦»çº¿æ¨¡å¼æ›´å¼º" aria-label="Permalink to â€œâœ… 3. ç¦»çº¿æ¨¡å¼æ›´å¼ºâ€">â€‹</a></h4><ul><li>å…¨å±€ Store ç›¸å½“äºæœ¬åœ°ç¼“å­˜ï¼Œå³ä½¿æ–­ç½‘ä¹Ÿèƒ½å®‰è£…å·²ä¸‹è½½è¿‡çš„ä¾èµ–ã€‚</li></ul><hr><h3 id="äº”ã€ä¸ºä»€ä¹ˆ-npm-ä¸è¿™ä¹ˆè®¾è®¡" tabindex="-1">äº”ã€ä¸ºä»€ä¹ˆ npm ä¸è¿™ä¹ˆè®¾è®¡ï¼Ÿ <a class="header-anchor" href="#äº”ã€ä¸ºä»€ä¹ˆ-npm-ä¸è¿™ä¹ˆè®¾è®¡" aria-label="Permalink to â€œäº”ã€ä¸ºä»€ä¹ˆ npm ä¸è¿™ä¹ˆè®¾è®¡ï¼Ÿâ€">â€‹</a></h3><ul><li><strong>å†å²åŒ…è¢±</strong>ï¼šnpm æ—©æœŸä¸ºç®€å•æ€§é‡‡ç”¨ç›´æ¥å¤åˆ¶ï¼›</li><li><strong>å…¼å®¹æ€§</strong>ï¼šéƒ¨åˆ†å·¥å…·å‡è®¾ <code>node_modules</code> æ˜¯çœŸå®æ–‡ä»¶ï¼ˆpnpm é€šè¿‡ <code>--shamefully-hoist</code> å…¼å®¹ï¼‰ï¼›</li><li><strong>ç”Ÿæ€æƒ¯æ€§</strong>ï¼šæ”¹å˜åº•å±‚æ¨¡å‹é£é™©é«˜ã€‚</li></ul><blockquote><p>ğŸ’¡ <strong>ç°çŠ¶</strong>ï¼šYarn v2+ï¼ˆPnPï¼‰ä¹Ÿé‡‡ç”¨ç±»ä¼¼æ€è·¯ï¼Œä½† pnpm å› <strong>å…¼å®¹ä¼ ç»Ÿ <code>node_modules</code> ç»“æ„</strong>æ›´æ˜“è¿ç§»ã€‚</p></blockquote><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-6" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-6" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>pnpm å¿«åœ¨â€œä¸å¤åˆ¶â€â€”â€”ç”¨ç¡¬é“¾æ¥å…±äº«å…¨å±€å­˜å‚¨çš„ä¾èµ–æ–‡ä»¶ï¼Œç”¨ç¬¦å·é“¾æ¥æ„å»ºç²¾å‡†ä¾èµ–æ ‘ï¼Œæ—¢çœç©ºé—´åˆæé€Ÿï¼Œè¿˜é¡ºæ‰‹è§£å†³äº† npm çš„ä¾èµ–éšæ‚£ã€‚</strong></p></blockquote><h2 id="eslint-æ¦‚å¿µåŠåŸç†" tabindex="-1">ESLint æ¦‚å¿µåŠåŸç† <a class="header-anchor" href="#eslint-æ¦‚å¿µåŠåŸç†" aria-label="Permalink to â€œESLint æ¦‚å¿µåŠåŸç†â€">â€‹</a></h2><p><strong>ESLint</strong> æ˜¯ä¸€ä¸ª<strong>å¯æ’ä»¶åŒ–ã€é«˜åº¦å¯é…ç½®çš„ JavaScript/TypeScript ä»£ç æ£€æŸ¥å·¥å…·</strong>ï¼Œç”¨äºåœ¨å¼€å‘é˜¶æ®µ<strong>é™æ€åˆ†æä»£ç </strong>ï¼Œå‘ç°æ½œåœ¨é”™è¯¯ã€é£æ ¼é—®é¢˜å’Œä¸è§„èŒƒå†™æ³•ï¼Œä»è€Œæå‡ä»£ç è´¨é‡å’Œå›¢é˜Ÿåä½œä¸€è‡´æ€§ã€‚</p><hr><h3 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒæ¦‚å¿µâ€">â€‹</a></h3><h4 id="_1-linter-ä»£ç æ£€æŸ¥å™¨" tabindex="-1">1. <strong>Linterï¼ˆä»£ç æ£€æŸ¥å™¨ï¼‰</strong> <a class="header-anchor" href="#_1-linter-ä»£ç æ£€æŸ¥å™¨" aria-label="Permalink to â€œ1. Linterï¼ˆä»£ç æ£€æŸ¥å™¨ï¼‰â€">â€‹</a></h4><ul><li>é™æ€åˆ†ææºç ï¼ˆæ— éœ€è¿è¡Œï¼‰ï¼Œæ£€æŸ¥ï¼š <ul><li>è¯­æ³•é”™è¯¯ï¼ˆå¦‚æœªå®šä¹‰å˜é‡ï¼‰ï¼›</li><li>æ½œåœ¨ bugï¼ˆå¦‚ <code>==</code> vs <code>===</code>ï¼‰ï¼›</li><li>ä»£ç é£æ ¼ï¼ˆç¼©è¿›ã€å¼•å·ã€åˆ†å·ç­‰ï¼‰ï¼›</li><li>æœ€ä½³å®è·µï¼ˆå¦‚é¿å… <code>console.log</code> ä¸Šçº¿ï¼‰ã€‚</li></ul></li></ul><h4 id="_2-è§„åˆ™-rules" tabindex="-1">2. <strong>è§„åˆ™ï¼ˆRulesï¼‰</strong> <a class="header-anchor" href="#_2-è§„åˆ™-rules" aria-label="Permalink to â€œ2. è§„åˆ™ï¼ˆRulesï¼‰â€">â€‹</a></h4><ul><li>ESLint çš„æœ€å°æ£€æŸ¥å•å…ƒï¼Œæ¯æ¡è§„åˆ™ç‹¬ç«‹å¼€å…³ï¼›</li><li>ç¤ºä¾‹ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;no-console&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;warn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¦æ­¢ consoleï¼ˆè­¦å‘Šï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;semi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;always&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¿…é¡»åŠ åˆ†å·ï¼ˆæŠ¥é”™ï¼‰</span></span></code></pre></div></li></ul><h4 id="_3-é…ç½®æ–‡ä»¶-configuration" tabindex="-1">3. <strong>é…ç½®æ–‡ä»¶ï¼ˆConfigurationï¼‰</strong> <a class="header-anchor" href="#_3-é…ç½®æ–‡ä»¶-configuration" aria-label="Permalink to â€œ3. é…ç½®æ–‡ä»¶ï¼ˆConfigurationï¼‰â€">â€‹</a></h4><ul><li>æ”¯æŒå¤šç§æ ¼å¼ï¼š<code>.eslintrc.js</code>ã€<code>.eslintrc.json</code>ã€<code>package.json</code> ä¸­çš„ <code>eslintConfig</code>ï¼›</li><li>å¯ç»§æ‰¿å…±äº«é…ç½®ï¼ˆå¦‚ <code>eslint:recommended</code>ã€<code>@typescript-eslint/recommended</code>ï¼‰ã€‚</li></ul><h4 id="_4-è§£æå™¨-parser" tabindex="-1">4. <strong>è§£æå™¨ï¼ˆParserï¼‰</strong> <a class="header-anchor" href="#_4-è§£æå™¨-parser" aria-label="Permalink to â€œ4. è§£æå™¨ï¼ˆParserï¼‰â€">â€‹</a></h4><ul><li>é»˜è®¤ä½¿ç”¨ Espreeï¼ˆåŸºäº Acornï¼‰ï¼Œæ”¯æŒ ES5~ES2023ï¼›</li><li>æ‰©å±•åœºæ™¯ï¼š <ul><li>TypeScript â†’ <code>@typescript-eslint/parser</code>ï¼›</li><li>Vue â†’ <code>vue-eslint-parser</code>ã€‚</li></ul></li></ul><h4 id="_5-æ’ä»¶-plugins" tabindex="-1">5. <strong>æ’ä»¶ï¼ˆPluginsï¼‰</strong> <a class="header-anchor" href="#_5-æ’ä»¶-plugins" aria-label="Permalink to â€œ5. æ’ä»¶ï¼ˆPluginsï¼‰â€">â€‹</a></h4><ul><li>æ‰©å±• ESLint èƒ½åŠ›ï¼Œæä¾›<strong>è‡ªå®šä¹‰è§„åˆ™/è§£æå™¨</strong>ï¼›</li><li>å‘½åè§„èŒƒï¼š<code>eslint-plugin-xxx</code>ï¼ˆä½¿ç”¨æ—¶çœç•¥å‰ç¼€ï¼‰ï¼›</li><li>ç¤ºä¾‹ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@typescript-eslint&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><h4 id="_6-å¯å…±äº«é…ç½®-shareable-configs" tabindex="-1">6. <strong>å¯å…±äº«é…ç½®ï¼ˆShareable Configsï¼‰</strong> <a class="header-anchor" href="#_6-å¯å…±äº«é…ç½®-shareable-configs" aria-label="Permalink to â€œ6. å¯å…±äº«é…ç½®ï¼ˆShareable Configsï¼‰â€">â€‹</a></h4><ul><li>å°è£…å¸¸ç”¨è§„åˆ™é›†ï¼Œä¾¿äºå›¢é˜Ÿå¤ç”¨ï¼›</li><li>å‘½åè§„èŒƒï¼š<code>eslint-config-xxx</code>ï¼ˆä½¿ç”¨æ—¶åŠ  <code>xxx</code>ï¼‰ï¼›</li><li>ç¤ºä¾‹ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extends</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;airbnb&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;plugin:react/recommended&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul><hr><h3 id="äºŒã€å·¥ä½œåŸç†-å››æ­¥æµç¨‹" tabindex="-1">äºŒã€å·¥ä½œåŸç†ï¼ˆå››æ­¥æµç¨‹ï¼‰ <a class="header-anchor" href="#äºŒã€å·¥ä½œåŸç†-å››æ­¥æµç¨‹" aria-label="Permalink to â€œäºŒã€å·¥ä½œåŸç†ï¼ˆå››æ­¥æµç¨‹ï¼‰â€">â€‹</a></h3><div class="language-mermaid"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[æºä»£ç ] --&gt; B[è§£æå™¨ Parser]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; C[AST æŠ½è±¡è¯­æ³•æ ‘]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; D[è§„åˆ™éå† AST]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; E[æŠ¥å‘Šé—®é¢˜]</span></span></code></pre></div><h4 id="_1-è§£æä»£ç -â†’-ç”Ÿæˆ-ast" tabindex="-1">1. <strong>è§£æä»£ç  â†’ ç”Ÿæˆ AST</strong> <a class="header-anchor" href="#_1-è§£æä»£ç -â†’-ç”Ÿæˆ-ast" aria-label="Permalink to â€œ1. è§£æä»£ç  â†’ ç”Ÿæˆ ASTâ€">â€‹</a></h4><ul><li>ESLint è°ƒç”¨é…ç½®çš„ <strong>Parser</strong>ï¼ˆå¦‚ <code>@typescript-eslint/parser</code>ï¼‰ï¼›</li><li>å°†æºç è½¬æ¢ä¸º <strong>ASTï¼ˆAbstract Syntax Treeï¼‰</strong>ï¼Œç»“æ„åŒ–è¡¨ç¤ºä»£ç é€»è¾‘ã€‚</li></ul><h4 id="_2-éå†-ast-â†’-è§¦å‘è§„åˆ™" tabindex="-1">2. <strong>éå† AST â†’ è§¦å‘è§„åˆ™</strong> <a class="header-anchor" href="#_2-éå†-ast-â†’-è§¦å‘è§„åˆ™" aria-label="Permalink to â€œ2. éå† AST â†’ è§¦å‘è§„åˆ™â€">â€‹</a></h4><ul><li>ESLint ä½¿ç”¨ <strong>æ·±åº¦ä¼˜å…ˆéå†</strong> ASTï¼›</li><li>æ¯é‡åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚ <code>VariableDeclaration</code>, <code>CallExpression</code>ï¼‰ï¼Œè§¦å‘æ³¨å†Œçš„è§„åˆ™ç›‘å¬å™¨ã€‚</li></ul><h4 id="_3-è§„åˆ™æ‰§è¡Œ-â†’-æ£€æŸ¥é€»è¾‘" tabindex="-1">3. <strong>è§„åˆ™æ‰§è¡Œ â†’ æ£€æŸ¥é€»è¾‘</strong> <a class="header-anchor" href="#_3-è§„åˆ™æ‰§è¡Œ-â†’-æ£€æŸ¥é€»è¾‘" aria-label="Permalink to â€œ3. è§„åˆ™æ‰§è¡Œ â†’ æ£€æŸ¥é€»è¾‘â€">â€‹</a></h4><ul><li>æ¯æ¡è§„åˆ™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ AST èŠ‚ç‚¹å¹¶åˆ¤æ–­æ˜¯å¦è¿è§„ï¼›</li><li>ç¤ºä¾‹ï¼š<code>no-var</code> è§„åˆ™ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ <code>VariableDeclaration</code> ä¸” <code>kind === &#39;var&#39;</code>ã€‚</li></ul><h4 id="_4-ç”ŸæˆæŠ¥å‘Š-â†’-è¾“å‡ºç»“æœ" tabindex="-1">4. <strong>ç”ŸæˆæŠ¥å‘Š â†’ è¾“å‡ºç»“æœ</strong> <a class="header-anchor" href="#_4-ç”ŸæˆæŠ¥å‘Š-â†’-è¾“å‡ºç»“æœ" aria-label="Permalink to â€œ4. ç”ŸæˆæŠ¥å‘Š â†’ è¾“å‡ºç»“æœâ€">â€‹</a></h4><ul><li>æ±‡æ€»æ‰€æœ‰è¿è§„é¡¹ï¼ŒæŒ‰é…ç½®è¾“å‡ºï¼š <ul><li>ç»ˆç«¯é«˜äº®æ˜¾ç¤ºï¼›</li><li>IDE å®æ—¶æ ‡çº¢ï¼ˆé€šè¿‡ ESLint æ’ä»¶ï¼‰ï¼›</li><li>CI å¤±è´¥ï¼ˆè‹¥è®¾ä¸º <code>error</code>ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="ä¸‰ã€å…³é”®ç‰¹æ€§" tabindex="-1">ä¸‰ã€å…³é”®ç‰¹æ€§ <a class="header-anchor" href="#ä¸‰ã€å…³é”®ç‰¹æ€§" aria-label="Permalink to â€œä¸‰ã€å…³é”®ç‰¹æ€§â€">â€‹</a></h3><h4 id="âœ…-1-å¯æ’æ‹”æ¶æ„" tabindex="-1">âœ… 1. <strong>å¯æ’æ‹”æ¶æ„</strong> <a class="header-anchor" href="#âœ…-1-å¯æ’æ‹”æ¶æ„" aria-label="Permalink to â€œâœ… 1. å¯æ’æ‹”æ¶æ„â€">â€‹</a></h4><ul><li>è§£æå™¨ã€è§„åˆ™ã€æ’ä»¶å‡å¯æ›¿æ¢ï¼Œæ”¯æŒä»»æ„è¯­è¨€æ‰©å±•ï¼ˆTS/JSX/Vueï¼‰ã€‚</li></ul><h4 id="âœ…-2-è‡ªåŠ¨ä¿®å¤-fix" tabindex="-1">âœ… 2. <strong>è‡ªåŠ¨ä¿®å¤ï¼ˆ--fixï¼‰</strong> <a class="header-anchor" href="#âœ…-2-è‡ªåŠ¨ä¿®å¤-fix" aria-label="Permalink to â€œâœ… 2. è‡ªåŠ¨ä¿®å¤ï¼ˆ--fixï¼‰â€">â€‹</a></h4><ul><li>éƒ¨åˆ†è§„åˆ™æ”¯æŒè‡ªåŠ¨ä¿®å¤ï¼ˆå¦‚æ ¼å¼é—®é¢˜ï¼‰ï¼š<div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eslint</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/</span></span></code></pre></div></li></ul><h4 id="âœ…-3-ä½œç”¨åŸŸåˆ†æ-scope-analysis" tabindex="-1">âœ… 3. <strong>ä½œç”¨åŸŸåˆ†æï¼ˆScope Analysisï¼‰</strong> <a class="header-anchor" href="#âœ…-3-ä½œç”¨åŸŸåˆ†æ-scope-analysis" aria-label="Permalink to â€œâœ… 3. ä½œç”¨åŸŸåˆ†æï¼ˆScope Analysisï¼‰â€">â€‹</a></h4><ul><li>å†…ç½®ä½œç”¨åŸŸç®¡ç†å™¨ï¼Œç²¾å‡†åˆ¤æ–­å˜é‡å£°æ˜/å¼•ç”¨å…³ç³»ï¼›</li><li>ä¾‹å¦‚ï¼šæ£€æµ‹â€œå˜é‡æœªå®šä¹‰â€æ—¶ï¼Œä¼šæ£€æŸ¥å½“å‰ä½œç”¨åŸŸé“¾ã€‚</li></ul><h4 id="âœ…-4-é…ç½®çº§è”ä¸è¦†ç›–" tabindex="-1">âœ… 4. <strong>é…ç½®çº§è”ä¸è¦†ç›–</strong> <a class="header-anchor" href="#âœ…-4-é…ç½®çº§è”ä¸è¦†ç›–" aria-label="Permalink to â€œâœ… 4. é…ç½®çº§è”ä¸è¦†ç›–â€">â€‹</a></h4><ul><li>æ”¯æŒç›®å½•çº§ <code>.eslintrc</code>ï¼Œå­ç›®å½•è‡ªåŠ¨ç»§æ‰¿çˆ¶çº§é…ç½®ï¼›</li><li>å¯é€šè¿‡ <code>overrides</code> å¯¹ç‰¹å®šæ–‡ä»¶ï¼ˆå¦‚ <code>*.test.js</code>ï¼‰å®šåˆ¶è§„åˆ™ã€‚</li></ul><hr><h3 id="å››ã€å…¸å‹é…ç½®ç¤ºä¾‹" tabindex="-1">å››ã€å…¸å‹é…ç½®ç¤ºä¾‹ <a class="header-anchor" href="#å››ã€å…¸å‹é…ç½®ç¤ºä¾‹" aria-label="Permalink to â€œå››ã€å…¸å‹é…ç½®ç¤ºä¾‹â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .eslintrc.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æŒ‡å®šç¯å¢ƒï¼ˆæ³¨å…¥å…¨å±€å˜é‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  env: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    browser: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    es2021: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    node: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç»§æ‰¿æ¨èè§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  extends: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;eslint:recommended&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;@typescript-eslint/recommended&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æŒ‡å®šè§£æå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  parser: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@typescript-eslint/parser&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åŠ è½½æ’ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@typescript-eslint&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è‡ªå®šä¹‰è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rules: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;no-console&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;warn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;@typescript-eslint/no-explicit-any&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æŒ‡å®šæ–‡ä»¶ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  overrides: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      files: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*.test.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      rules: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;no-unused-expressions&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;off&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h3 id="äº”ã€eslint-vs-å…¶ä»–å·¥å…·" tabindex="-1">äº”ã€ESLint vs å…¶ä»–å·¥å…· <a class="header-anchor" href="#äº”ã€eslint-vs-å…¶ä»–å·¥å…·" aria-label="Permalink to â€œäº”ã€ESLint vs å…¶ä»–å·¥å…·â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å·¥å…·</th><th>å®šä½</th><th>äº’è¡¥æ€§</th></tr></thead><tbody><tr><td><strong>Prettier</strong></td><td>ä»£ç æ ¼å¼åŒ–ï¼ˆç¾è§‚ï¼‰</td><td>âœ… ä¸ ESLint åˆ†å·¥ï¼šESLint ç®¡é€»è¾‘ï¼ŒPrettier ç®¡é£æ ¼</td></tr><tr><td><strong>TypeScript</strong></td><td>ç±»å‹æ£€æŸ¥</td><td>âœ… ESLint è¡¥å…… TS æ— æ³•è¦†ç›–çš„è¿è¡Œæ—¶é—®é¢˜ï¼ˆå¦‚ <code>no-param-reassign</code>ï¼‰</td></tr><tr><td><strong>JSHint</strong></td><td>è€ä¸€ä»£ Linter</td><td>âŒ åŠŸèƒ½å¼±äº ESLintï¼Œå·²åŸºæœ¬æ·˜æ±°</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>æœ€ä½³å®è·µ</strong>ï¼š<br> ESLint + Prettier + TypeScript = ç°ä»£å‰ç«¯ä»£ç è´¨é‡é“ä¸‰è§’ã€‚</p></blockquote><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-7" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-7" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>ESLint é€šè¿‡è§£æä»£ç ä¸º ASTï¼Œéå†èŠ‚ç‚¹è§¦å‘è§„åˆ™æ£€æŸ¥ï¼Œåœ¨ç¼–ç é˜¶æ®µæ‹¦æˆªé—®é¢˜â€”â€”å®ƒæ˜¯ JavaScript ç”Ÿæ€ä¸­ä¸å¯æˆ–ç¼ºçš„â€œä»£ç å®ˆé—¨å‘˜â€ã€‚</strong></p></blockquote><h2 id="babel-æ¦‚å¿µåŠåŸç†" tabindex="-1">Babel æ¦‚å¿µåŠåŸç† <a class="header-anchor" href="#babel-æ¦‚å¿µåŠåŸç†" aria-label="Permalink to â€œBabel æ¦‚å¿µåŠåŸç†â€">â€‹</a></h2><p><strong>Babel</strong> æ˜¯ä¸€ä¸ª <strong>JavaScript ç¼–è¯‘å™¨ï¼ˆCompilerï¼‰</strong>ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯å°†<strong>æ–°ç‰ˆæˆ–å®éªŒæ€§ JavaScript ä»£ç </strong>ï¼ˆå¦‚ ES2023ã€TypeScriptã€JSXï¼‰<strong>è½¬æ¢ä¸ºå‘åå…¼å®¹çš„æ—§ç‰ˆ JavaScript</strong>ï¼ˆå¦‚ ES5ï¼‰ï¼Œä»¥ç¡®ä¿ä»£ç èƒ½åœ¨ä¸æ”¯æŒæ–°ç‰¹æ€§çš„æµè§ˆå™¨æˆ–ç¯å¢ƒä¸­è¿è¡Œã€‚</p><blockquote><p>ğŸ“Œ <strong>å®šä½</strong>ï¼šä¸æ˜¯æ‰“åŒ…å·¥å…·ï¼ˆå¦‚ Webpackï¼‰ï¼Œè€Œæ˜¯<strong>æºç è½¬æ¢å·¥å…·</strong>ï¼ˆTranspilerï¼‰ã€‚</p></blockquote><hr><h3 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ-1" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ-1" aria-label="Permalink to â€œä¸€ã€æ ¸å¿ƒæ¦‚å¿µâ€">â€‹</a></h3><h4 id="_1-è½¬è¯‘-transpilation" tabindex="-1">1. <strong>è½¬è¯‘ï¼ˆTranspilationï¼‰</strong> <a class="header-anchor" href="#_1-è½¬è¯‘-transpilation" aria-label="Permalink to â€œ1. è½¬è¯‘ï¼ˆTranspilationï¼‰â€">â€‹</a></h4><ul><li>å°†ä¸€ç§ JavaScript è¯­æ³•ï¼ˆé«˜ç‰ˆæœ¬/æ‰©å±•è¯­æ³•ï¼‰ â†’ è½¬æ¢ä¸ºå¦ä¸€ç§ç­‰æ•ˆçš„ä½ç‰ˆæœ¬è¯­æ³•ï¼›</li><li>ç¤ºä¾‹ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å…¥ï¼ˆES2020ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Babel è¾“å‡ºï¼ˆES5ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li></ul><h4 id="_2-é¢„è®¾-presets" tabindex="-1">2. <strong>é¢„è®¾ï¼ˆPresetsï¼‰</strong> <a class="header-anchor" href="#_2-é¢„è®¾-presets" aria-label="Permalink to â€œ2. é¢„è®¾ï¼ˆPresetsï¼‰â€">â€‹</a></h4><ul><li>ä¸€ç»„<strong>æ’ä»¶çš„é›†åˆ</strong>ï¼Œç”¨äºå¤„ç†ç‰¹å®šåœºæ™¯ï¼›</li><li>å¸¸ç”¨é¢„è®¾ï¼š <ul><li><code>@babel/preset-env</code>ï¼šæ™ºèƒ½è½¬æ¢ ES6+ è¯­æ³•ï¼ˆæŒ‰ç›®æ ‡ç¯å¢ƒï¼‰ï¼›</li><li><code>@babel/preset-react</code>ï¼šè½¬æ¢ JSXï¼›</li><li><code>@babel/preset-typescript</code>ï¼šç§»é™¤ TypeScript ç±»å‹æ³¨è§£ã€‚</li></ul></li></ul><h4 id="_3-æ’ä»¶-plugins" tabindex="-1">3. <strong>æ’ä»¶ï¼ˆPluginsï¼‰</strong> <a class="header-anchor" href="#_3-æ’ä»¶-plugins" aria-label="Permalink to â€œ3. æ’ä»¶ï¼ˆPluginsï¼‰â€">â€‹</a></h4><ul><li>æ‰§è¡Œ<strong>å•ä¸€è½¬æ¢ä»»åŠ¡</strong>çš„æ¨¡å—ï¼›</li><li>ç¤ºä¾‹ï¼š <ul><li><code>@babel/plugin-transform-arrow-functions</code>ï¼šè½¬æ¢ç®­å¤´å‡½æ•°ï¼›</li><li><code>@babel/plugin-proposal-class-properties</code>ï¼šæ”¯æŒ class å­—æ®µï¼ˆ<code>class A { x = 1 }</code>ï¼‰ã€‚</li></ul></li></ul><h4 id="_4-polyfill-å«ç‰‡" tabindex="-1">4. <strong>Polyfillï¼ˆå«ç‰‡ï¼‰</strong> <a class="header-anchor" href="#_4-polyfill-å«ç‰‡" aria-label="Permalink to â€œ4. Polyfillï¼ˆå«ç‰‡ï¼‰â€">â€‹</a></h4><ul><li>Babel <strong>åªè½¬æ¢è¯­æ³•</strong>ï¼Œä¸æä¾›æ–° APIï¼ˆå¦‚ <code>Promise</code>, <code>Array.from</code>ï¼‰ï¼›</li><li>éœ€é…åˆ <code>core-js</code> ç­‰ Polyfill åº“è¡¥å……ç¼ºå¤±çš„å…¨å±€å¯¹è±¡/æ–¹æ³•ã€‚</li></ul><hr><h3 id="äºŒã€å·¥ä½œåŸç†-ä¸‰æ­¥ç¼–è¯‘æµç¨‹" tabindex="-1">äºŒã€å·¥ä½œåŸç†ï¼ˆä¸‰æ­¥ç¼–è¯‘æµç¨‹ï¼‰ <a class="header-anchor" href="#äºŒã€å·¥ä½œåŸç†-ä¸‰æ­¥ç¼–è¯‘æµç¨‹" aria-label="Permalink to â€œäºŒã€å·¥ä½œåŸç†ï¼ˆä¸‰æ­¥ç¼–è¯‘æµç¨‹ï¼‰â€">â€‹</a></h3><p><img src="`+h+`" alt="An Image"></p><h4 id="_1-è§£æ-parsing" tabindex="-1">1. <strong>è§£æï¼ˆParsingï¼‰</strong> <a class="header-anchor" href="#_1-è§£æ-parsing" aria-label="Permalink to â€œ1. è§£æï¼ˆParsingï¼‰â€">â€‹</a></h4><ul><li>ä½¿ç”¨ <strong>è§£æå™¨</strong>ï¼ˆé»˜è®¤ <code>@babel/parser</code>ï¼ŒåŸå Babylonï¼‰å°†æºç è½¬æ¢ä¸º <strong>ASTï¼ˆAbstract Syntax Treeï¼‰</strong>ï¼›</li><li>AST æ˜¯ä»£ç çš„ç»“æ„åŒ–è¡¨ç¤ºï¼Œä¾¿äºåˆ†æå’Œä¿®æ”¹ã€‚</li></ul><h4 id="_2-è½¬æ¢-transformation" tabindex="-1">2. <strong>è½¬æ¢ï¼ˆTransformationï¼‰</strong> <a class="header-anchor" href="#_2-è½¬æ¢-transformation" aria-label="Permalink to â€œ2. è½¬æ¢ï¼ˆTransformationï¼‰â€">â€‹</a></h4><ul><li>éå† ASTï¼Œåº”ç”¨é…ç½®çš„ <strong>æ’ä»¶/é¢„è®¾</strong> å¯¹èŠ‚ç‚¹è¿›è¡Œå¢åˆ æ”¹ï¼›</li><li>æ¯ä¸ªæ’ä»¶é€šè¿‡ <strong>è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰</strong> ç›‘å¬ç‰¹å®š AST èŠ‚ç‚¹ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ’ä»¶ç¤ºä¾‹ï¼šå°† console.log æ›¿æ¢ä¸º alert</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    visitor: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      CallExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (path.node.callee.object?.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;console&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            path.node.callee.property?.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replaceWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            t.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">identifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;alert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), path.node.arguments)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="_3-ç”Ÿæˆ-code-generation" tabindex="-1">3. <strong>ç”Ÿæˆï¼ˆCode Generationï¼‰</strong> <a class="header-anchor" href="#_3-ç”Ÿæˆ-code-generation" aria-label="Permalink to â€œ3. ç”Ÿæˆï¼ˆCode Generationï¼‰â€">â€‹</a></h4><ul><li>ä½¿ç”¨ <strong>ä»£ç ç”Ÿæˆå™¨</strong>ï¼ˆ<code>@babel/generator</code>ï¼‰å°†ä¿®æ”¹åçš„ AST è½¬å›å­—ç¬¦ä¸²å½¢å¼çš„ JavaScript ä»£ç ã€‚</li></ul><hr><h3 id="ä¸‰ã€å…³é”®ç‰¹æ€§-1" tabindex="-1">ä¸‰ã€å…³é”®ç‰¹æ€§ <a class="header-anchor" href="#ä¸‰ã€å…³é”®ç‰¹æ€§-1" aria-label="Permalink to â€œä¸‰ã€å…³é”®ç‰¹æ€§â€">â€‹</a></h3><h4 id="âœ…-1-æŒ‰éœ€è½¬æ¢-babel-preset-env" tabindex="-1">âœ… 1. <strong>æŒ‰éœ€è½¬æ¢ï¼ˆ@babel/preset-envï¼‰</strong> <a class="header-anchor" href="#âœ…-1-æŒ‰éœ€è½¬æ¢-babel-preset-env" aria-label="Permalink to â€œâœ… 1. æŒ‰éœ€è½¬æ¢ï¼ˆ@babel/preset-envï¼‰â€">â€‹</a></h4><ul><li>é€šè¿‡ <code>browserslist</code> é…ç½®ç›®æ ‡ç¯å¢ƒï¼Œ<strong>åªè½¬æ¢ä¸æ”¯æŒçš„è¯­æ³•</strong>ï¼š<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .browserslistrc</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">not dead</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// babel.config.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">presets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { targets: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;defaults&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li>ç»“åˆ <code>useBuiltIns: &#39;usage&#39;</code> å®ç°<strong>æŒ‰éœ€æ³¨å…¥ Polyfill</strong>ã€‚</li></ul><h4 id="âœ…-2-æ”¯æŒæ‰©å±•è¯­æ³•" tabindex="-1">âœ… 2. <strong>æ”¯æŒæ‰©å±•è¯­æ³•</strong> <a class="header-anchor" href="#âœ…-2-æ”¯æŒæ‰©å±•è¯­æ³•" aria-label="Permalink to â€œâœ… 2. æ”¯æŒæ‰©å±•è¯­æ³•â€">â€‹</a></h4><ul><li>JSX â†’ React.createElement()</li><li>TypeScript â†’ ç§»é™¤ç±»å‹æ³¨è§£ï¼ˆä¿ç•™è¿è¡Œæ—¶é€»è¾‘ï¼‰</li><li>Flow â†’ ç±»å‹æ“¦é™¤</li></ul><h4 id="âœ…-3-æ’ä»¶åŒ–æ¶æ„" tabindex="-1">âœ… 3. <strong>æ’ä»¶åŒ–æ¶æ„</strong> <a class="header-anchor" href="#âœ…-3-æ’ä»¶åŒ–æ¶æ„" aria-label="Permalink to â€œâœ… 3. æ’ä»¶åŒ–æ¶æ„â€">â€‹</a></h4><ul><li>ç¤¾åŒºæä¾›æ•°åƒæ’ä»¶ï¼Œæ”¯æŒå®éªŒæ€§ææ¡ˆï¼ˆå¦‚è£…é¥°å™¨ã€ç®¡é“æ“ä½œç¬¦ï¼‰ï¼›</li><li>å¯è‡ªå®šä¹‰æ’ä»¶å®ç°ä»£ç ä¼˜åŒ–ã€åŸ‹ç‚¹æ³¨å…¥ç­‰ã€‚</li></ul><hr><h3 id="å››ã€å…¸å‹é…ç½®ç¤ºä¾‹-1" tabindex="-1">å››ã€å…¸å‹é…ç½®ç¤ºä¾‹ <a class="header-anchor" href="#å››ã€å…¸å‹é…ç½®ç¤ºä¾‹-1" aria-label="Permalink to â€œå››ã€å…¸å‹é…ç½®ç¤ºä¾‹â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// babel.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  presets: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ™ºèƒ½è½¬æ¢ ES6+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-env&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      targets: { browsers: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&gt; 1%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;not ie &lt;= 11&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      useBuiltIns: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;usage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‰éœ€å¼•å…¥ core-js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      corejs: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è½¬æ¢ JSX</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@babel/preset-react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { runtime: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;automatic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç§»é™¤ TS ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;@babel/preset-typescript&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ”¯æŒ class å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;@babel/plugin-proposal-class-properties&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è‡ªåŠ¨å¼•å…¥ Polyfillï¼ˆå·²ç”± preset-env å¤„ç†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h3 id="äº”ã€babel-vs-å…¶ä»–å·¥å…·" tabindex="-1">äº”ã€Babel vs å…¶ä»–å·¥å…· <a class="header-anchor" href="#äº”ã€babel-vs-å…¶ä»–å·¥å…·" aria-label="Permalink to â€œäº”ã€Babel vs å…¶ä»–å·¥å…·â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å·¥å…·</th><th>å®šä½</th><th>ä¸ Babel å…³ç³»</th></tr></thead><tbody><tr><td><strong>TypeScript Compiler (tsc)</strong></td><td>ç±»å‹æ£€æŸ¥ + è½¬è¯‘</td><td>Babel <strong>ä¸æ£€æŸ¥ç±»å‹</strong>ï¼Œä»…æ“¦é™¤ TS è¯­æ³•ï¼›å¸¸æ­é…ä½¿ç”¨ï¼ˆtsc ç±»å‹æ£€æŸ¥ + Babel è½¬è¯‘ï¼‰</td></tr><tr><td><strong>SWC / esbuild</strong></td><td>è¶…å¿« JS è½¬è¯‘å™¨</td><td>Babel çš„é«˜æ€§èƒ½æ›¿ä»£å“ï¼ˆRust/Go ç¼–å†™ï¼‰ï¼Œä½†æ’ä»¶ç”Ÿæ€è¾ƒå¼±</td></tr><tr><td><strong>Webpack</strong></td><td>æ¨¡å—æ‰“åŒ…å™¨</td><td>Webpack é€šè¿‡ <code>babel-loader</code> è°ƒç”¨ Babel è½¬è¯‘æ¨¡å—</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>ç°ä»£è¶‹åŠ¿</strong>ï¼š<br> å¼€å‘ç¯å¢ƒç”¨ <strong>esbuild/SWC</strong> æé€Ÿï¼Œç”Ÿäº§ç¯å¢ƒç”¨ <strong>Babel</strong> ä¿è¯å…¼å®¹æ€§ã€‚</p></blockquote><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-8" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-8" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>Babel æ˜¯ JavaScript çš„â€œè¯­æ³•ç¿»è¯‘å®˜â€â€”â€”å®ƒé€šè¿‡è§£æâ†’è½¬æ¢â†’ç”Ÿæˆä¸‰æ­¥ï¼Œå°†å‰æ²¿ä»£ç å®‰å…¨é™çº§ä¸ºå¹¿æ³›å…¼å®¹çš„ç‰ˆæœ¬ï¼Œæ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„åŸºçŸ³å·¥å…·ã€‚</strong></p></blockquote><h2 id="npm-install-çš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1">npm install çš„æ‰§è¡Œè¿‡ç¨‹ <a class="header-anchor" href="#npm-install-çš„æ‰§è¡Œè¿‡ç¨‹" aria-label="Permalink to â€œnpm install çš„æ‰§è¡Œè¿‡ç¨‹â€">â€‹</a></h2><p><code>npm install</code> çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸€ä¸ª<strong>å¤šé˜¶æ®µã€é«˜åº¦ååŒçš„ä¾èµ–è§£æä¸å®‰è£…æµç¨‹</strong>ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>æ ¹æ® <code>package.json</code> å’Œ <code>package-lock.json</code>ï¼Œåœ¨æœ¬åœ°æ„å»ºå‡ºä¸€ä¸ªç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„åˆ™ï¼ˆSemVerï¼‰ä¸”å¯å¤ç°çš„ <code>node_modules</code> ç›®å½•ç»“æ„</strong>ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>npm install</code>ï¼ˆä»¥ npm v7+ ä¸ºä¾‹ï¼‰çš„è¯¦ç»†æ‰§è¡Œæ­¥éª¤ï¼š</p><hr><h3 id="ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ" tabindex="-1">ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ <a class="header-anchor" href="#ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ" aria-label="Permalink to â€œä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆâ€">â€‹</a></h3><p><img src="`+k+`" alt="An Image"></p><hr><h3 id="äºŒã€è¯¦ç»†æ‰§è¡Œæ­¥éª¤" tabindex="-1">äºŒã€è¯¦ç»†æ‰§è¡Œæ­¥éª¤ <a class="header-anchor" href="#äºŒã€è¯¦ç»†æ‰§è¡Œæ­¥éª¤" aria-label="Permalink to â€œäºŒã€è¯¦ç»†æ‰§è¡Œæ­¥éª¤â€">â€‹</a></h3><h4 id="_1-è¯»å–é…ç½®ä¸æ¸…å•æ–‡ä»¶" tabindex="-1">1. <strong>è¯»å–é…ç½®ä¸æ¸…å•æ–‡ä»¶</strong> <a class="header-anchor" href="#_1-è¯»å–é…ç½®ä¸æ¸…å•æ–‡ä»¶" aria-label="Permalink to â€œ1. è¯»å–é…ç½®ä¸æ¸…å•æ–‡ä»¶â€">â€‹</a></h4><ul><li>è¯»å–å½“å‰ç›®å½•çš„ <code>package.json</code>ï¼Œè·å–ï¼š <ul><li><code>dependencies</code></li><li><code>devDependencies</code></li><li><code>optionalDependencies</code></li><li><code>engines</code>ï¼ˆNode/npm ç‰ˆæœ¬è¦æ±‚ï¼‰</li></ul></li><li>è¯»å– <code>.npmrc</code> é…ç½®ï¼ˆå¦‚ registry æºã€ç¼“å­˜è·¯å¾„ï¼‰ã€‚</li></ul><h4 id="_2-åŠ è½½æˆ–ç”Ÿæˆä¾èµ–æ ‘-arborist-ç®—æ³•" tabindex="-1">2. <strong>åŠ è½½æˆ–ç”Ÿæˆä¾èµ–æ ‘ï¼ˆArborist ç®—æ³•ï¼‰</strong> <a class="header-anchor" href="#_2-åŠ è½½æˆ–ç”Ÿæˆä¾èµ–æ ‘-arborist-ç®—æ³•" aria-label="Permalink to â€œ2. åŠ è½½æˆ–ç”Ÿæˆä¾èµ–æ ‘ï¼ˆArborist ç®—æ³•ï¼‰â€">â€‹</a></h4><ul><li>npm v7+ ä½¿ç”¨ <strong>Arborist</strong>ï¼ˆâ€œå›­ä¸â€ï¼‰å¼•æ“è¿›è¡Œä¾èµ–è§£æï¼›</li><li><strong>å…³é”®é€»è¾‘</strong>ï¼š <ul><li>è‹¥å­˜åœ¨ <code>package-lock.json</code> ä¸”ä¸ <code>package.json</code> å…¼å®¹ â†’ <strong>ç›´æ¥ä½¿ç”¨ lock æ–‡ä»¶ä¸­çš„ç²¾ç¡®ç‰ˆæœ¬</strong>ï¼›</li><li>è‹¥ lock æ–‡ä»¶ç¼ºå¤±/è¿‡æœŸ â†’ <strong>é‡æ–°è®¡ç®—ä¾èµ–æ ‘</strong>ï¼Œéµå¾ª SemVer è§„åˆ™ï¼ˆå¦‚ <code>^1.2.3</code> å…è®¸ <code>1.x.x</code> æœ€æ–°ï¼‰ã€‚</li></ul></li></ul><blockquote><p>ğŸ”‘ <strong>SemVer è§„åˆ™ç¤ºä¾‹</strong>ï¼š</p><ul><li><code>^1.2.3</code> â†’ å…è®¸ <code>1.2.4</code>, <code>1.3.0</code>ï¼Œä½†ä¸å…è®¸ <code>2.0.0</code></li><li><code>~1.2.3</code> â†’ å…è®¸ <code>1.2.4</code>ï¼Œä½†ä¸å…è®¸ <code>1.3.0</code></li></ul></blockquote><h4 id="_3-ä¾èµ–å»é‡ä¸æ‰å¹³åŒ–-npm-v2-vs-v3" tabindex="-1">3. <strong>ä¾èµ–å»é‡ä¸æ‰å¹³åŒ–ï¼ˆnpm v2 vs v3+ï¼‰</strong> <a class="header-anchor" href="#_3-ä¾èµ–å»é‡ä¸æ‰å¹³åŒ–-npm-v2-vs-v3" aria-label="Permalink to â€œ3. ä¾èµ–å»é‡ä¸æ‰å¹³åŒ–ï¼ˆnpm v2 vs v3+ï¼‰â€">â€‹</a></h4><ul><li><strong>npm v2</strong>ï¼šåµŒå¥—å®‰è£…ï¼ˆ<code>node_modules/a/node_modules/b</code>ï¼‰ï¼Œå¯¼è‡´é‡å¤ä¾èµ–ã€è·¯å¾„è¿‡é•¿ï¼›</li><li><strong>npm v3+</strong>ï¼š<strong>æ‰å¹³åŒ–ç­–ç•¥</strong>ï¼ˆå°½å¯èƒ½å°†ä¾èµ–æå‡åˆ°é¡¶å±‚ï¼‰ï¼š<div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node_modules/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash@4.17.21</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # è¢«å¤šä¸ªåŒ…ä¾èµ–ï¼Œåªå®‰è£…ä¸€ä»½</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react@18.2.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react-dom@18.2.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node_modules/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react@18.2.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # è‹¥ç‰ˆæœ¬å†²çªï¼Œæ‰åµŒå¥—</span></span></code></pre></div></li><li><strong>ç›®çš„</strong>ï¼šå‡å°‘ç£ç›˜å ç”¨ï¼Œé¿å…â€œä¾èµ–åœ°ç‹±â€ã€‚</li></ul><h4 id="_4-ä»ç¼“å­˜æˆ–ç½‘ç»œè·å–åŒ…" tabindex="-1">4. <strong>ä»ç¼“å­˜æˆ–ç½‘ç»œè·å–åŒ…</strong> <a class="header-anchor" href="#_4-ä»ç¼“å­˜æˆ–ç½‘ç»œè·å–åŒ…" aria-label="Permalink to â€œ4. ä»ç¼“å­˜æˆ–ç½‘ç»œè·å–åŒ…â€">â€‹</a></h4><ul><li><strong>ä¼˜å…ˆä½¿ç”¨æœ¬åœ°ç¼“å­˜</strong>ï¼ˆ<code>~/.npm</code> æˆ–é¡¹ç›®çº§ç¼“å­˜ï¼‰ï¼›</li><li>è‹¥ç¼“å­˜æœªå‘½ä¸­ï¼š <ul><li>ä»é…ç½®çš„ registryï¼ˆå¦‚ <code>https://registry.npmjs.org</code>ï¼‰ä¸‹è½½ tarballï¼›</li><li>éªŒè¯åŒ…å®Œæ•´æ€§ï¼ˆé€šè¿‡ <code>integrity</code> å­—æ®µçš„ SHA å“ˆå¸Œï¼‰ã€‚</li></ul></li></ul><h4 id="_5-è§£å‹å¹¶æ„å»º-node-modules" tabindex="-1">5. <strong>è§£å‹å¹¶æ„å»º <code>node_modules</code></strong> <a class="header-anchor" href="#_5-è§£å‹å¹¶æ„å»º-node-modules" aria-label="Permalink to â€œ5. è§£å‹å¹¶æ„å»º node_modulesâ€">â€‹</a></h4><ul><li>å°† tarball è§£å‹åˆ° <code>node_modules</code> å¯¹åº”ä½ç½®ï¼›</li><li>æ‰§è¡ŒåŒ…çš„ <strong><code>preinstall</code> / <code>install</code> / <code>postinstall</code> è„šæœ¬</strong>ï¼ˆå¦‚ <code>node-gyp</code> ç¼–è¯‘åŸç”Ÿæ¨¡å—ï¼‰ã€‚</li></ul><h4 id="_6-æ›´æ–°æˆ–ç”Ÿæˆ-package-lock-json" tabindex="-1">6. <strong>æ›´æ–°æˆ–ç”Ÿæˆ <code>package-lock.json</code></strong> <a class="header-anchor" href="#_6-æ›´æ–°æˆ–ç”Ÿæˆ-package-lock-json" aria-label="Permalink to â€œ6. æ›´æ–°æˆ–ç”Ÿæˆ package-lock.jsonâ€">â€‹</a></h4><ul><li><strong>lock æ–‡ä»¶ä½œç”¨</strong>ï¼š <ul><li>é”å®šæ‰€æœ‰ä¾èµ–çš„<strong>ç²¾ç¡®ç‰ˆæœ¬ + å®Œæ•´ä¾èµ–æ ‘ + integrity å“ˆå¸Œ</strong>ï¼›</li><li>ç¡®ä¿å›¢é˜Ÿæˆå‘˜å’Œ CI ç¯å¢ƒå®‰è£…<strong>å®Œå…¨ä¸€è‡´</strong>çš„ä¾èµ–ã€‚</li></ul></li><li>è‹¥ <code>package.json</code> æœ‰å˜æ›´ â†’ ç”Ÿæˆæ–° lock æ–‡ä»¶ï¼›</li><li>è‹¥æ— å˜æ›´ â†’ ä»…éªŒè¯ lock æ–‡ä»¶æœ‰æ•ˆæ€§ã€‚</li></ul><h4 id="_7-è¿è¡Œé¡¹ç›®ç”Ÿå‘½å‘¨æœŸè„šæœ¬" tabindex="-1">7. <strong>è¿è¡Œé¡¹ç›®ç”Ÿå‘½å‘¨æœŸè„šæœ¬</strong> <a class="header-anchor" href="#_7-è¿è¡Œé¡¹ç›®ç”Ÿå‘½å‘¨æœŸè„šæœ¬" aria-label="Permalink to â€œ7. è¿è¡Œé¡¹ç›®ç”Ÿå‘½å‘¨æœŸè„šæœ¬â€">â€‹</a></h4><ul><li>æ‰§è¡Œ <code>package.json</code> ä¸­å®šä¹‰çš„ï¼š <ul><li><code>prepare</code>ï¼ˆåœ¨æ‰“åŒ…å‰è¿è¡Œï¼‰</li><li><code>prepublishOnly</code>ï¼ˆä»…å‘å¸ƒæ—¶è¿è¡Œï¼‰</li></ul></li></ul><hr><h3 id="ä¸‰ã€å…³é”®æœºåˆ¶è§£æ" tabindex="-1">ä¸‰ã€å…³é”®æœºåˆ¶è§£æ <a class="header-anchor" href="#ä¸‰ã€å…³é”®æœºåˆ¶è§£æ" aria-label="Permalink to â€œä¸‰ã€å…³é”®æœºåˆ¶è§£æâ€">â€‹</a></h3><h4 id="âœ…-1-ç¡®å®šæ€§å®‰è£…-deterministic-install" tabindex="-1">âœ… 1. <strong>ç¡®å®šæ€§å®‰è£…ï¼ˆDeterministic Installï¼‰</strong> <a class="header-anchor" href="#âœ…-1-ç¡®å®šæ€§å®‰è£…-deterministic-install" aria-label="Permalink to â€œâœ… 1. ç¡®å®šæ€§å®‰è£…ï¼ˆDeterministic Installï¼‰â€">â€‹</a></h4><ul><li><code>package-lock.json</code> ç¡®ä¿ï¼š<br><strong>æ— è®ºä½•æ—¶ã€ä½•åœ°æ‰§è¡Œ <code>npm install</code>ï¼Œç»“æœéƒ½å®Œå…¨ä¸€è‡´</strong>ã€‚<br> ï¼ˆå¯¹æ¯”ï¼š<code>yarn</code> ç”¨ <code>yarn.lock</code>ï¼Œ<code>pnpm</code> ç”¨ <code>pnpm-lock.yaml</code>ï¼‰</li></ul><h4 id="âœ…-2-ç¼“å­˜æœºåˆ¶" tabindex="-1">âœ… 2. <strong>ç¼“å­˜æœºåˆ¶</strong> <a class="header-anchor" href="#âœ…-2-ç¼“å­˜æœºåˆ¶" aria-label="Permalink to â€œâœ… 2. ç¼“å­˜æœºåˆ¶â€">â€‹</a></h4><ul><li><strong>HTTP ç¼“å­˜</strong>ï¼šé¿å…é‡å¤è¯·æ±‚ registryï¼›</li><li><strong>å†…å®¹ç¼“å­˜</strong>ï¼šç›¸åŒ integrity çš„åŒ…åªå­˜å‚¨ä¸€ä»½ï¼›</li><li><strong>CI ä¼˜åŒ–</strong>ï¼šå¯ç¼“å­˜ <code>~/.npm</code> ç›®å½•åŠ é€Ÿåç»­æ„å»ºã€‚</li></ul><h4 id="âœ…-3-å®‰å…¨æ ¡éªŒ" tabindex="-1">âœ… 3. <strong>å®‰å…¨æ ¡éªŒ</strong> <a class="header-anchor" href="#âœ…-3-å®‰å…¨æ ¡éªŒ" aria-label="Permalink to â€œâœ… 3. å®‰å…¨æ ¡éªŒâ€">â€‹</a></h4><ul><li>æ¯ä¸ªåŒ…çš„ <code>integrity</code> å­—æ®µï¼ˆSHA-512ï¼‰ç”¨äºéªŒè¯ä¸‹è½½å†…å®¹æœªè¢«ç¯¡æ”¹ï¼›</li><li>è‹¥æ ¡éªŒå¤±è´¥ï¼Œå®‰è£…ä¸­æ­¢ã€‚</li></ul><hr><h3 id="å››ã€å¸¸è§é—®é¢˜ä¸è¡Œä¸º" tabindex="-1">å››ã€å¸¸è§é—®é¢˜ä¸è¡Œä¸º <a class="header-anchor" href="#å››ã€å¸¸è§é—®é¢˜ä¸è¡Œä¸º" aria-label="Permalink to â€œå››ã€å¸¸è§é—®é¢˜ä¸è¡Œä¸ºâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>npm è¡Œä¸º</th></tr></thead><tbody><tr><td><strong><code>npm install</code>ï¼ˆæ— å‚æ•°ï¼‰</strong></td><td>æŒ‰ <code>package-lock.json</code> å®‰è£…ï¼Œå¿½ç•¥ <code>package.json</code> ä¸­çš„ç‰ˆæœ¬èŒƒå›´</td></tr><tr><td><strong><code>npm install pkg</code></strong></td><td>æ›´æ–° <code>package.json</code> + <code>package-lock.json</code>ï¼Œå®‰è£…æœ€æ–°å…¼å®¹ç‰ˆæœ¬</td></tr><tr><td><strong>åˆ é™¤ <code>node_modules</code> åé‡è£…</strong></td><td>ç»“æœä¸ä¹‹å‰å®Œå…¨ä¸€è‡´ï¼ˆå›  lock æ–‡ä»¶å­˜åœ¨ï¼‰</td></tr><tr><td><strong>ä¿®æ”¹ <code>package.json</code> å install</strong></td><td>é‡æ–°è®¡ç®—å—å½±å“å­æ ‘ï¼Œæ›´æ–° lock æ–‡ä»¶</td></tr></tbody></table><hr><h3 id="äº”ã€ä¸å…¶ä»–åŒ…ç®¡ç†å™¨å¯¹æ¯”" tabindex="-1">äº”ã€ä¸å…¶ä»–åŒ…ç®¡ç†å™¨å¯¹æ¯” <a class="header-anchor" href="#äº”ã€ä¸å…¶ä»–åŒ…ç®¡ç†å™¨å¯¹æ¯”" aria-label="Permalink to â€œäº”ã€ä¸å…¶ä»–åŒ…ç®¡ç†å™¨å¯¹æ¯”â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>npm</th><th>Yarn</th><th>pnpm</th></tr></thead><tbody><tr><td><strong>ä¾èµ–ç»“æ„</strong></td><td>æ‰å¹³åŒ–ï¼ˆå¯èƒ½é‡å¤ï¼‰</td><td>æ‰å¹³åŒ–</td><td><strong>ç¡¬é“¾æ¥ + ç¬¦å·é“¾æ¥</strong>ï¼ˆæ— é‡å¤ï¼‰</td></tr><tr><td><strong>lock æ–‡ä»¶</strong></td><td><code>package-lock.json</code></td><td><code>yarn.lock</code></td><td><code>pnpm-lock.yaml</code></td></tr><tr><td><strong>å®‰è£…é€Ÿåº¦</strong></td><td>ä¸­ç­‰</td><td>å¿«ï¼ˆå¹¶è¡Œä¸‹è½½ï¼‰</td><td><strong>æå¿«</strong>ï¼ˆæ— æ–‡ä»¶å¤åˆ¶ï¼‰</td></tr><tr><td><strong>ç£ç›˜å ç”¨</strong></td><td>é«˜</td><td>ä¸­</td><td><strong>æä½</strong></td></tr></tbody></table><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-9" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-9" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong><code>npm install</code> çš„æœ¬è´¨æ˜¯ä¸€æ¬¡â€œä¾èµ–å†³è®® + å®‰å…¨åˆ†å‘ + çŠ¶æ€å›ºåŒ–â€çš„è¿‡ç¨‹â€”â€”å®ƒé€šè¿‡ lock æ–‡ä»¶ç¡®ä¿å¯å¤ç°æ€§ï¼Œé€šè¿‡æ‰å¹³åŒ–å‡å°‘å†—ä½™ï¼Œé€šè¿‡ç¼“å­˜å’Œæ ¡éªŒå¹³è¡¡é€Ÿåº¦ä¸å®‰å…¨ã€‚</strong></p></blockquote><h2 id="npm-run-start-çš„æ•´ä¸ªè¿‡ç¨‹" tabindex="-1">npm run start çš„æ•´ä¸ªè¿‡ç¨‹ï¼Ÿ <a class="header-anchor" href="#npm-run-start-çš„æ•´ä¸ªè¿‡ç¨‹" aria-label="Permalink to â€œnpm run start çš„æ•´ä¸ªè¿‡ç¨‹ï¼Ÿâ€">â€‹</a></h2><p><code>npm run start</code> çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ <strong>Node.js è°ƒç”¨ npm CLIï¼Œè§£æå¹¶è¿è¡Œ <code>package.json</code> ä¸­å®šä¹‰çš„ <code>start</code> è„šæœ¬å‘½ä»¤</strong>ã€‚æ•´ä¸ªæµç¨‹æ¶‰åŠ <strong>Shell ç¯å¢ƒã€è„šæœ¬æ‰§è¡Œã€è¿›ç¨‹ç®¡ç†</strong> ç­‰å¤šä¸ªç¯èŠ‚ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†åˆ†è§£ï¼š</p><hr><h3 id="ä¸€ã€æ•´ä½“æ‰§è¡Œæµç¨‹" tabindex="-1">ä¸€ã€æ•´ä½“æ‰§è¡Œæµç¨‹ <a class="header-anchor" href="#ä¸€ã€æ•´ä½“æ‰§è¡Œæµç¨‹" aria-label="Permalink to â€œä¸€ã€æ•´ä½“æ‰§è¡Œæµç¨‹â€">â€‹</a></h3><p><img src="`+p+`" alt="An Image"></p><hr><h3 id="äºŒã€è¯¦ç»†æ­¥éª¤è§£æ" tabindex="-1">äºŒã€è¯¦ç»†æ­¥éª¤è§£æ <a class="header-anchor" href="#äºŒã€è¯¦ç»†æ­¥éª¤è§£æ" aria-label="Permalink to â€œäºŒã€è¯¦ç»†æ­¥éª¤è§£æâ€">â€‹</a></h3><h4 id="_1-è§£æå‘½ä»¤" tabindex="-1">1. <strong>è§£æå‘½ä»¤</strong> <a class="header-anchor" href="#_1-è§£æå‘½ä»¤" aria-label="Permalink to â€œ1. è§£æå‘½ä»¤â€">â€‹</a></h4><ul><li>ç»ˆç«¯ï¼ˆå¦‚ Bashã€Zshã€PowerShellï¼‰å°† <code>npm run start</code> äº¤ç»™ <strong>npm CLI</strong>ï¼ˆå…¨å±€å®‰è£…çš„ <code>npm</code> å‘½ä»¤ï¼‰ï¼›</li><li><code>run</code> æ˜¯ npm çš„å­å‘½ä»¤ï¼Œ<code>start</code> æ˜¯ä¼ é€’ç»™å®ƒçš„å‚æ•°ã€‚</li></ul><h4 id="_2-å®šä½é¡¹ç›®æ ¹ç›®å½•" tabindex="-1">2. <strong>å®šä½é¡¹ç›®æ ¹ç›®å½•</strong> <a class="header-anchor" href="#_2-å®šä½é¡¹ç›®æ ¹ç›®å½•" aria-label="Permalink to â€œ2. å®šä½é¡¹ç›®æ ¹ç›®å½•â€">â€‹</a></h4><ul><li>npm ä»å½“å‰ç›®å½•å‘ä¸Šé€’å½’æŸ¥æ‰¾ <strong><code>package.json</code> æ–‡ä»¶</strong>ï¼Œç¡®å®šé¡¹ç›®æ ¹è·¯å¾„ï¼›</li><li>è‹¥æ‰¾ä¸åˆ° â†’ æŠ¥é”™ï¼š<code>No package.json found</code>ã€‚</li></ul><h4 id="_3-è¯»å–-scripts-é…ç½®" tabindex="-1">3. <strong>è¯»å– <code>scripts</code> é…ç½®</strong> <a class="header-anchor" href="#_3-è¯»å–-scripts-é…ç½®" aria-label="Permalink to â€œ3. è¯»å– scripts é…ç½®â€">â€‹</a></h4><ul><li>è§£æ <code>package.json</code> ä¸­çš„ <code>scripts</code> å­—æ®µï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æˆ– &quot;react-scripts start&quot;, &quot;node server.js&quot; ç­‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li>å¦‚æœ <code>scripts.start</code> ä¸å­˜åœ¨ï¼Œnpm <strong>ä¸ä¼šæŠ¥é”™</strong>ï¼ˆç‰¹æ®Šè¡Œä¸ºï¼ï¼‰ï¼Œè€Œæ˜¯å°è¯•è¿è¡Œé»˜è®¤å‘½ä»¤ï¼š <ul><li><strong>Node.js é¡¹ç›®</strong>ï¼š<code>node server.js</code></li><li><strong>ä½†ç°ä»£é¡¹ç›®é€šå¸¸æ˜¾å¼å®šä¹‰ <code>start</code>ï¼Œé¿å…æ­§ä¹‰</strong>ã€‚</li></ul></li></ul><blockquote><p>âš ï¸ æ³¨æ„ï¼š<br><code>npm start</code> æ˜¯ <code>npm run start</code> çš„ç®€å†™ï¼Œä¸¤è€…ç­‰ä»·ã€‚</p></blockquote><h4 id="_4-å‡†å¤‡æ‰§è¡Œç¯å¢ƒ" tabindex="-1">4. <strong>å‡†å¤‡æ‰§è¡Œç¯å¢ƒ</strong> <a class="header-anchor" href="#_4-å‡†å¤‡æ‰§è¡Œç¯å¢ƒ" aria-label="Permalink to â€œ4. å‡†å¤‡æ‰§è¡Œç¯å¢ƒâ€">â€‹</a></h4><p>npm ä¼šä¸ºè„šæœ¬è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼ˆä¾›è„šæœ¬å†…éƒ¨ä½¿ç”¨ï¼‰ï¼š</p><ul><li><code>npm_config_*</code>ï¼šnpm é…ç½®é¡¹ï¼ˆå¦‚ <code>npm_config_registry</code>ï¼‰</li><li><code>npm_package_*</code>ï¼š<code>package.json</code> ä¸­çš„å­—æ®µï¼ˆå¦‚ <code>npm_package_name</code>ï¼‰</li><li><code>PATH</code>ï¼šè‡ªåŠ¨åŠ å…¥ <code>node_modules/.bin</code>ï¼Œä½¿æœ¬åœ°å®‰è£…çš„ CLIï¼ˆå¦‚ <code>vite</code>, <code>webpack</code>ï¼‰å¯ç›´æ¥è°ƒç”¨ã€‚</li></ul><blockquote><p>âœ… ä¾‹å¦‚ï¼šå³ä½¿æœªå…¨å±€å®‰è£… <code>vite</code>ï¼Œä¹Ÿèƒ½åœ¨è„šæœ¬ä¸­ç›´æ¥å†™ <code>vite</code>ã€‚</p></blockquote><h4 id="_5-åœ¨å­-shell-ä¸­æ‰§è¡Œå‘½ä»¤" tabindex="-1">5. <strong>åœ¨å­ Shell ä¸­æ‰§è¡Œå‘½ä»¤</strong> <a class="header-anchor" href="#_5-åœ¨å­-shell-ä¸­æ‰§è¡Œå‘½ä»¤" aria-label="Permalink to â€œ5. åœ¨å­ Shell ä¸­æ‰§è¡Œå‘½ä»¤â€">â€‹</a></h4><ul><li>npm å¯åŠ¨ä¸€ä¸ª <strong>æ–°çš„å­è¿›ç¨‹ï¼ˆchild processï¼‰</strong>ï¼Œé€šè¿‡ç³»ç»Ÿ Shellï¼ˆå¦‚ <code>/bin/sh</code>ï¼‰æ‰§è¡Œè„šæœ¬å†…å®¹ï¼›</li><li>ç¤ºä¾‹ï¼š<div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®é™…æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä¼ªä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/bin/sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span></code></pre></div></li><li>è„šæœ¬ä¸­çš„å¤šä¸ªå‘½ä»¤å¯ç”¨ <code>&amp;&amp;</code>ã€<code>||</code>ã€<code>&amp;</code> è¿æ¥ï¼ˆå¦‚ <code>&quot;start&quot;: &quot;npm run clean &amp;&amp; vite&quot;</code>ï¼‰ã€‚</li></ul><h4 id="_6-è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†" tabindex="-1">6. <strong>è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong> <a class="header-anchor" href="#_6-è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†" aria-label="Permalink to â€œ6. è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†â€">â€‹</a></h4><ul><li>å­è¿›ç¨‹ï¼ˆå¦‚ Vite å¼€å‘æœåŠ¡å™¨ï¼‰æ¥ç®¡ç»ˆç«¯è¾“å…¥/è¾“å‡ºï¼›</li><li><strong>Ctrl+C</strong> ä¼šå‘å­è¿›ç¨‹å‘é€ <code>SIGINT</code> ä¿¡å·ï¼Œè§¦å‘ä¼˜é›…å…³é—­ï¼›</li><li>è‹¥è„šæœ¬é€€å‡ºç é <code>0</code>ï¼Œnpm ä¼šè®¤ä¸ºæ‰§è¡Œå¤±è´¥ï¼ˆCI ä¸­ä¼šå¯¼è‡´ pipeline ä¸­æ–­ï¼‰ã€‚</li></ul><hr><h3 id="ä¸‰ã€å…¸å‹-start-è„šæœ¬ç¤ºä¾‹" tabindex="-1">ä¸‰ã€å…¸å‹ <code>start</code> è„šæœ¬ç¤ºä¾‹ <a class="header-anchor" href="#ä¸‰ã€å…¸å‹-start-è„šæœ¬ç¤ºä¾‹" aria-label="Permalink to â€œä¸‰ã€å…¸å‹ start è„šæœ¬ç¤ºä¾‹â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é¡¹ç›®ç±»å‹</th><th><code>start</code> è„šæœ¬</th><th>å®é™…å¯åŠ¨è¿›ç¨‹</th></tr></thead><tbody><tr><td><strong>Vite</strong></td><td><code>&quot;start&quot;: &quot;vite&quot;</code></td><td>å¯åŠ¨åŸºäº ESBuild çš„å¼€å‘æœåŠ¡å™¨</td></tr><tr><td><strong>Create React App</strong></td><td><code>&quot;start&quot;: &quot;react-scripts start&quot;</code></td><td>å¯åŠ¨ Webpack Dev Server</td></tr><tr><td><strong>Next.js</strong></td><td><code>&quot;start&quot;: &quot;next start&quot;</code></td><td>å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨ï¼ˆéœ€å…ˆ buildï¼‰<br>ï¼ˆå¼€å‘ç”¨ <code>dev</code> è„šæœ¬ï¼‰</td></tr><tr><td><strong>è‡ªå®šä¹‰ Node æœåŠ¡</strong></td><td><code>&quot;start&quot;: &quot;node src/server.js&quot;</code></td><td>ç›´æ¥è¿è¡Œ Node.js åº”ç”¨</td></tr></tbody></table><blockquote><p>ğŸ’¡ æ³¨æ„ï¼š</p><ul><li><strong>å¼€å‘æœåŠ¡å™¨é€šå¸¸ç”¨ <code>dev</code> è„šæœ¬</strong>ï¼ˆå¦‚ <code>&quot;dev&quot;: &quot;vite&quot;</code>ï¼‰ï¼Œè€Œ <code>start</code> å¤šç”¨äº<strong>ç”Ÿäº§å¯åŠ¨</strong>ï¼›</li><li>ä½† CRA ç­‰å·¥å…·é“¾å°† <code>start</code> ç”¨äºå¼€å‘ï¼Œå±å†å²çº¦å®šã€‚</li></ul></blockquote><hr><h3 id="å››ã€å…³é”®ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹" tabindex="-1">å››ã€å…³é”®ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#å››ã€å…³é”®ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹" aria-label="Permalink to â€œå››ã€å…³é”®ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹â€">â€‹</a></h3><h4 id="âœ…-1-è‡ªåŠ¨æ³¨å…¥-node-modules-bin-åˆ°-path" tabindex="-1">âœ… 1. <strong>è‡ªåŠ¨æ³¨å…¥ <code>node_modules/.bin</code> åˆ° PATH</strong> <a class="header-anchor" href="#âœ…-1-è‡ªåŠ¨æ³¨å…¥-node-modules-bin-åˆ°-path" aria-label="Permalink to â€œâœ… 1. è‡ªåŠ¨æ³¨å…¥ node_modules/.bin åˆ° PATHâ€">â€‹</a></h4><ul><li>æ— éœ€å†™å®Œæ•´è·¯å¾„ï¼š<br> âŒ <code>&quot;start&quot;: &quot;./node_modules/.bin/vite&quot;</code><br> âœ… <code>&quot;start&quot;: &quot;vite&quot;</code></li></ul><h4 id="âœ…-2-æ”¯æŒè·¨å¹³å°è„šæœ¬-è°¨æ…" tabindex="-1">âœ… 2. <strong>æ”¯æŒè·¨å¹³å°è„šæœ¬ï¼ˆè°¨æ…ï¼‰</strong> <a class="header-anchor" href="#âœ…-2-æ”¯æŒè·¨å¹³å°è„šæœ¬-è°¨æ…" aria-label="Permalink to â€œâœ… 2. æ”¯æŒè·¨å¹³å°è„šæœ¬ï¼ˆè°¨æ…ï¼‰â€">â€‹</a></h4><ul><li>ç®€å•å‘½ä»¤ï¼ˆå¦‚ <code>vite</code>ï¼‰è·¨å¹³å°ï¼›</li><li>å¤æ‚ Shell æ“ä½œï¼ˆå¦‚ <code>rm -rf</code>ï¼‰éœ€ç”¨è·¨å¹³å°åº“ï¼ˆå¦‚ <code>rimraf</code>ï¼‰ï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rimraf dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="âœ…-3-ç¯å¢ƒå˜é‡ä¼ é€’" tabindex="-1">âœ… 3. <strong>ç¯å¢ƒå˜é‡ä¼ é€’</strong> <a class="header-anchor" href="#âœ…-3-ç¯å¢ƒå˜é‡ä¼ é€’" aria-label="Permalink to â€œâœ… 3. ç¯å¢ƒå˜é‡ä¼ é€’â€">â€‹</a></h4><ul><li>å¯åœ¨å‘½ä»¤å‰åŠ ç¯å¢ƒå˜é‡ï¼ˆUnix-likeï¼‰ï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NODE_ENV=production node server.js&quot;</span></span></code></pre></div></li><li>Windows éœ€ç”¨ <code>cross-env</code>ï¼š<div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cross-env NODE_ENV=production node server.js&quot;</span></span></code></pre></div></li></ul><h4 id="âŒ-4-ä¸è¦åœ¨-start-ä¸­è¿è¡Œé•¿æ—¶é—´åå°ä»»åŠ¡" tabindex="-1">âŒ 4. <strong>ä¸è¦åœ¨ <code>start</code> ä¸­è¿è¡Œé•¿æ—¶é—´åå°ä»»åŠ¡</strong> <a class="header-anchor" href="#âŒ-4-ä¸è¦åœ¨-start-ä¸­è¿è¡Œé•¿æ—¶é—´åå°ä»»åŠ¡" aria-label="Permalink to â€œâŒ 4. ä¸è¦åœ¨ start ä¸­è¿è¡Œé•¿æ—¶é—´åå°ä»»åŠ¡â€">â€‹</a></h4><ul><li><code>npm run start</code> ä¼š<strong>é˜»å¡ç»ˆç«¯</strong>ï¼Œé€‚åˆå‰å°æœåŠ¡ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰ï¼›</li><li>åå°ä»»åŠ¡åº”ä½¿ç”¨ <code>pm2</code> æˆ–ç³»ç»ŸæœåŠ¡ç®¡ç†ã€‚</li></ul><hr><h3 id="äº”ã€è°ƒè¯•æŠ€å·§" tabindex="-1">äº”ã€è°ƒè¯•æŠ€å·§ <a class="header-anchor" href="#äº”ã€è°ƒè¯•æŠ€å·§" aria-label="Permalink to â€œäº”ã€è°ƒè¯•æŠ€å·§â€">â€‹</a></h3><h4 id="_1-æŸ¥çœ‹å®é™…æ‰§è¡Œå‘½ä»¤" tabindex="-1">1. <strong>æŸ¥çœ‹å®é™…æ‰§è¡Œå‘½ä»¤</strong> <a class="header-anchor" href="#_1-æŸ¥çœ‹å®é™…æ‰§è¡Œå‘½ä»¤" aria-label="Permalink to â€œ1. æŸ¥çœ‹å®é™…æ‰§è¡Œå‘½ä»¤â€">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–å¯ç”¨ verbose æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --loglevel=silly</span></span></code></pre></div><h4 id="_2-æ£€æŸ¥-path-æ˜¯å¦åŒ…å«-bin" tabindex="-1">2. <strong>æ£€æŸ¥ PATH æ˜¯å¦åŒ…å« .bin</strong> <a class="header-anchor" href="#_2-æ£€æŸ¥-path-æ˜¯å¦åŒ…å«-bin" aria-label="Permalink to â€œ2. æ£€æŸ¥ PATH æ˜¯å¦åŒ…å« .binâ€">â€‹</a></h4><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;debug-path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;echo $PATH&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3-æ‰‹åŠ¨æ¨¡æ‹Ÿæ‰§è¡Œ" tabindex="-1">3. <strong>æ‰‹åŠ¨æ¨¡æ‹Ÿæ‰§è¡Œ</strong> <a class="header-anchor" href="#_3-æ‰‹åŠ¨æ¨¡æ‹Ÿæ‰§è¡Œ" aria-label="Permalink to â€œ3. æ‰‹åŠ¨æ¨¡æ‹Ÿæ‰§è¡Œâ€">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›å…¥é¡¹ç›®ç›®å½•å</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ç­‰ä»·äº npm run startï¼ˆè‹¥ start=viteï¼‰</span></span></code></pre></div><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-10" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-10" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong><code>npm run start</code> æ˜¯ npm æ ¹æ® <code>package.json</code> å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿è¡Œå¼€å‘æˆ–ç”Ÿäº§æœåŠ¡å™¨â€”â€”å®ƒè‡ªåŠ¨é…ç½®ç¯å¢ƒã€æ³¨å…¥æœ¬åœ° CLIï¼Œå¹¶å°†æ§åˆ¶æƒäº¤ç»™å®é™…çš„æ„å»ºå·¥å…·ï¼ˆå¦‚ Vite/Webpackï¼‰ï¼Œæ˜¯å‰ç«¯é¡¹ç›®å¯åŠ¨çš„æ ‡å‡†å…¥å£ã€‚</strong></p></blockquote><h2 id="å¯¹-css-å·¥ç¨‹åŒ–çš„ç†è§£" tabindex="-1">å¯¹ CSS å·¥ç¨‹åŒ–çš„ç†è§£ <a class="header-anchor" href="#å¯¹-css-å·¥ç¨‹åŒ–çš„ç†è§£" aria-label="Permalink to â€œå¯¹ CSS å·¥ç¨‹åŒ–çš„ç†è§£â€">â€‹</a></h2><p><strong>CSS å·¥ç¨‹åŒ–</strong>æ˜¯æŒ‡å°† CSS ä»£ç çº³å…¥ç°ä»£è½¯ä»¶å·¥ç¨‹ä½“ç³»ï¼Œé€šè¿‡<strong>æ¨¡å—åŒ–ã€è‡ªåŠ¨åŒ–ã€å¯ç»´æŠ¤æ€§è®¾è®¡å’Œå·¥å…·é“¾æ”¯æŒ</strong>ï¼Œè§£å†³ä¼ ç»Ÿ CSS åœ¨å¤§å‹é¡¹ç›®ä¸­é¢ä¸´çš„<strong>å…¨å±€æ±¡æŸ“ã€å‘½åå†²çªã€å¤ç”¨å›°éš¾ã€ç»´æŠ¤æˆæœ¬é«˜</strong>ç­‰é—®é¢˜ï¼Œä½¿å…¶å…·å¤‡ä¸ JavaScript ç›¸åŒçš„å·¥ç¨‹èƒ½åŠ›ã€‚</p><hr><h3 id="ä¸€ã€ä¼ ç»Ÿ-css-çš„ç—›ç‚¹-ä¸ºä»€ä¹ˆéœ€è¦å·¥ç¨‹åŒ–" tabindex="-1">ä¸€ã€ä¼ ç»Ÿ CSS çš„ç—›ç‚¹ï¼ˆä¸ºä»€ä¹ˆéœ€è¦å·¥ç¨‹åŒ–ï¼Ÿï¼‰ <a class="header-anchor" href="#ä¸€ã€ä¼ ç»Ÿ-css-çš„ç—›ç‚¹-ä¸ºä»€ä¹ˆéœ€è¦å·¥ç¨‹åŒ–" aria-label="Permalink to â€œä¸€ã€ä¼ ç»Ÿ CSS çš„ç—›ç‚¹ï¼ˆä¸ºä»€ä¹ˆéœ€è¦å·¥ç¨‹åŒ–ï¼Ÿï¼‰â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th></tr></thead><tbody><tr><td><strong>å…¨å±€ä½œç”¨åŸŸ</strong></td><td><code>.button { ... }</code> ä¼šæ±¡æŸ“æ•´ä¸ªé¡µé¢</td></tr><tr><td><strong>å‘½åå†²çª</strong></td><td>å¤šäººåä½œæ—¶ç±»åé‡å¤è¦†ç›–</td></tr><tr><td><strong>å¤ç”¨å›°éš¾</strong></td><td>ç›¸åŒæ ·å¼éœ€å¤åˆ¶ç²˜è´´ï¼ˆè¿å DRYï¼‰</td></tr><tr><td><strong>æ— é€»è¾‘èƒ½åŠ›</strong></td><td>æ— æ³•ä½¿ç”¨å˜é‡ã€å‡½æ•°ã€æ¡ä»¶ç­‰ç¼–ç¨‹ç‰¹æ€§</td></tr><tr><td><strong>ä¾èµ–ä¸æ˜ç¡®</strong></td><td>ä¸æ¸…æ¥šæŸä¸ª CSS æ–‡ä»¶è¢«å“ªäº›ç»„ä»¶ä½¿ç”¨</td></tr></tbody></table><hr><h3 id="äºŒã€css-å·¥ç¨‹åŒ–çš„æ ¸å¿ƒç›®æ ‡" tabindex="-1">äºŒã€CSS å·¥ç¨‹åŒ–çš„æ ¸å¿ƒç›®æ ‡ <a class="header-anchor" href="#äºŒã€css-å·¥ç¨‹åŒ–çš„æ ¸å¿ƒç›®æ ‡" aria-label="Permalink to â€œäºŒã€CSS å·¥ç¨‹åŒ–çš„æ ¸å¿ƒç›®æ ‡â€">â€‹</a></h3><ol><li><strong>å±€éƒ¨ä½œç”¨åŸŸï¼ˆScoped Stylesï¼‰</strong><br> â†’ æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚</li><li><strong>æ¨¡å—åŒ–ä¸å¤ç”¨</strong><br> â†’ åƒ JS æ¨¡å—ä¸€æ ·å¯¼å…¥/å¯¼å‡ºæ ·å¼ã€‚</li><li><strong>æå‡å¼€å‘ä½“éªŒ</strong><br> â†’ æ”¯æŒå˜é‡ã€åµŒå¥—ã€å‡½æ•°ç­‰ç¼–ç¨‹ç‰¹æ€§ã€‚</li><li><strong>å¯ç»´æŠ¤æ€§ä¸å¯æ‰©å±•æ€§</strong><br> â†’ ç»“æ„æ¸…æ™°ï¼Œæ˜“äºå›¢é˜Ÿåä½œã€‚</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong><br> â†’ è‡ªåŠ¨å‹ç¼©ã€æå–å…³é”® CSSã€æŒ‰éœ€åŠ è½½ã€‚</li></ol><hr><h3 id="ä¸‰ã€ä¸»æµ-css-å·¥ç¨‹åŒ–æ–¹æ¡ˆ" tabindex="-1">ä¸‰ã€ä¸»æµ CSS å·¥ç¨‹åŒ–æ–¹æ¡ˆ <a class="header-anchor" href="#ä¸‰ã€ä¸»æµ-css-å·¥ç¨‹åŒ–æ–¹æ¡ˆ" aria-label="Permalink to â€œä¸‰ã€ä¸»æµ CSS å·¥ç¨‹åŒ–æ–¹æ¡ˆâ€">â€‹</a></h3><h4 id="âœ…-1-css-modules-åŸºäºæ–‡ä»¶çš„å±€éƒ¨ä½œç”¨åŸŸ" tabindex="-1">âœ… 1. <strong>CSS Modulesï¼ˆåŸºäºæ–‡ä»¶çš„å±€éƒ¨ä½œç”¨åŸŸï¼‰</strong> <a class="header-anchor" href="#âœ…-1-css-modules-åŸºäºæ–‡ä»¶çš„å±€éƒ¨ä½œç”¨åŸŸ" aria-label="Permalink to â€œâœ… 1. CSS Modulesï¼ˆåŸºäºæ–‡ä»¶çš„å±€éƒ¨ä½œç”¨åŸŸï¼‰â€">â€‹</a></h4><ul><li><strong>åŸç†</strong>ï¼šæ„å»ºæ—¶å°†ç±»åå“ˆå¸ŒåŒ–ï¼Œç”Ÿæˆå”¯ä¸€æ ‡è¯†ã€‚<div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* button.module.css */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">blue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> styles </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./button.module.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®é™…ç±»å â†’ primary__aB3cD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{styles.primary}&gt;Click&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ã€å…¼å®¹æ‰€æœ‰æ¡†æ¶ï¼›</li><li><strong>ç¼ºç‚¹</strong>ï¼šåŠ¨æ€ç±»åå¤„ç†éº»çƒ¦ï¼Œè°ƒè¯•æ—¶ç±»åä¸å¯è¯»ã€‚</li></ul><h4 id="âœ…-2-css-in-js-æ ·å¼å†™åœ¨-js-ä¸­" tabindex="-1">âœ… 2. <strong>CSS-in-JSï¼ˆæ ·å¼å†™åœ¨ JS ä¸­ï¼‰</strong> <a class="header-anchor" href="#âœ…-2-css-in-js-æ ·å¼å†™åœ¨-js-ä¸­" aria-label="Permalink to â€œâœ… 2. CSS-in-JSï¼ˆæ ·å¼å†™åœ¨ JS ä¸­ï¼‰â€">â€‹</a></h4><ul><li><strong>ä»£è¡¨åº“</strong>ï¼šstyled-componentsï¼ˆReactï¼‰ã€Emotionï¼›</li><li><strong>ç¤ºä¾‹</strong>ï¼š<div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Button</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> styled.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">button</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  color: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">primary</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;blue&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;gray&#39;};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  padding: 8px 16px;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>å®Œå…¨å±€éƒ¨ä½œç”¨åŸŸï¼›</li><li>æ”¯æŒ JS é€»è¾‘ï¼ˆpropsã€çŠ¶æ€ï¼‰ï¼›</li><li>è‡ªåŠ¨ vendor prefixã€ä¸»é¢˜åˆ‡æ¢ã€‚</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š <ul><li>è¿è¡Œæ—¶å¼€é”€ï¼›</li><li>SSR éœ€é¢å¤–å¤„ç†ï¼›</li><li>å­¦ä¹ æˆæœ¬é«˜ã€‚</li></ul></li></ul><h4 id="âœ…-3-scoped-css-å•æ–‡ä»¶ç»„ä»¶æ–¹æ¡ˆ" tabindex="-1">âœ… 3. <strong>Scoped CSSï¼ˆå•æ–‡ä»¶ç»„ä»¶æ–¹æ¡ˆï¼‰</strong> <a class="header-anchor" href="#âœ…-3-scoped-css-å•æ–‡ä»¶ç»„ä»¶æ–¹æ¡ˆ" aria-label="Permalink to â€œâœ… 3. Scoped CSSï¼ˆå•æ–‡ä»¶ç»„ä»¶æ–¹æ¡ˆï¼‰â€">â€‹</a></h4><ul><li><strong>ä»£è¡¨</strong>ï¼šVue SFCã€Svelteï¼›</li><li><strong>åŸç†</strong>ï¼šç¼–è¯‘æ—¶ä¸ºç»„ä»¶å†… CSS æ·»åŠ å±æ€§é€‰æ‹©å™¨ã€‚<div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">blue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- ç¼–è¯‘å --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;button&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-v-f3f3eg9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Click&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data-v-f3f3eg9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">blue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><strong>ä¼˜ç‚¹</strong>ï¼šå¼€å‘ä½“éªŒæ— ç¼ï¼Œé›¶é…ç½®ï¼›</li><li><strong>ç¼ºç‚¹</strong>ï¼šä»…é™ç‰¹å®šæ¡†æ¶ã€‚</li></ul><h4 id="âœ…-4-åŸå­åŒ–-css-utility-first" tabindex="-1">âœ… 4. <strong>åŸå­åŒ– CSSï¼ˆUtility-Firstï¼‰</strong> <a class="header-anchor" href="#âœ…-4-åŸå­åŒ–-css-utility-first" aria-label="Permalink to â€œâœ… 4. åŸå­åŒ– CSSï¼ˆUtility-Firstï¼‰â€">â€‹</a></h4><ul><li><strong>ä»£è¡¨</strong>ï¼šTailwind CSSã€Windi CSSï¼›</li><li><strong>æ€æƒ³</strong>ï¼šç”¨åŸå­ç±»ç»„åˆæ ·å¼ï¼Œè€Œéè¯­ä¹‰åŒ–ç±»åã€‚<div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text-blue-500 px-4 py-2 rounded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Click&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><strong>ä¼˜ç‚¹</strong>ï¼š <ul><li>æè‡´å¤ç”¨ï¼Œæ— å†—ä½™ CSSï¼›</li><li>è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§é«˜ï¼›</li><li>Tree Shaking ç§»é™¤æœªç”¨æ ·å¼ã€‚</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š <ul><li>HTML å¯è¯»æ€§ä¸‹é™ï¼›</li><li>éœ€è¦å­¦ä¹ æ–°è¯­ä¹‰ã€‚</li></ul></li></ul><hr><h3 id="å››ã€é…å¥—å·¥ç¨‹åŒ–èƒ½åŠ›" tabindex="-1">å››ã€é…å¥—å·¥ç¨‹åŒ–èƒ½åŠ› <a class="header-anchor" href="#å››ã€é…å¥—å·¥ç¨‹åŒ–èƒ½åŠ›" aria-label="Permalink to â€œå››ã€é…å¥—å·¥ç¨‹åŒ–èƒ½åŠ›â€">â€‹</a></h3><h4 id="ğŸ”§-1-é¢„å¤„ç†å™¨-preprocessors" tabindex="-1">ğŸ”§ 1. <strong>é¢„å¤„ç†å™¨ï¼ˆPreprocessorsï¼‰</strong> <a class="header-anchor" href="#ğŸ”§-1-é¢„å¤„ç†å™¨-preprocessors" aria-label="Permalink to â€œğŸ”§ 1. é¢„å¤„ç†å™¨ï¼ˆPreprocessorsï¼‰â€">â€‹</a></h4><ul><li><strong>Sass/Less/Stylus</strong>ï¼šæä¾›å˜é‡ã€åµŒå¥—ã€æ··åˆï¼ˆmixinï¼‰ç­‰ï¼›<div class="language-scss"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#007bff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.btn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">:hover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">opacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h4 id="ğŸ”§-2-postcss-css-åå¤„ç†" tabindex="-1">ğŸ”§ 2. <strong>PostCSSï¼ˆCSS åå¤„ç†ï¼‰</strong> <a class="header-anchor" href="#ğŸ”§-2-postcss-css-åå¤„ç†" aria-label="Permalink to â€œğŸ”§ 2. PostCSSï¼ˆCSS åå¤„ç†ï¼‰â€">â€‹</a></h4><ul><li><strong>ä½œç”¨</strong>ï¼šå¯¹ç¼–è¯‘åçš„ CSS è¿›è¡Œè½¬æ¢ï¼›</li><li><strong>å¸¸ç”¨æ’ä»¶</strong>ï¼š <ul><li><code>autoprefixer</code>ï¼šè‡ªåŠ¨åŠ æµè§ˆå™¨å‰ç¼€ï¼›</li><li><code>postcss-preset-env</code>ï¼šä½¿ç”¨æœªæ¥ CSS è¯­æ³•ï¼›</li><li><code>cssnano</code>ï¼šå‹ç¼© CSSã€‚</li></ul></li></ul><h4 id="ğŸ”§-3-æ„å»ºé›†æˆ" tabindex="-1">ğŸ”§ 3. <strong>æ„å»ºé›†æˆ</strong> <a class="header-anchor" href="#ğŸ”§-3-æ„å»ºé›†æˆ" aria-label="Permalink to â€œğŸ”§ 3. æ„å»ºé›†æˆâ€">â€‹</a></h4><ul><li>Webpack / Vite é€šè¿‡ loader/plugin å¤„ç† CSSï¼š <ul><li><code>css-loader</code>ï¼šè§£æ <code>@import</code> å’Œ <code>url()</code>ï¼›</li><li><code>MiniCssExtractPlugin</code>ï¼šæå– CSS åˆ°ç‹¬ç«‹æ–‡ä»¶ï¼›</li><li><code>PurgeCSS</code>ï¼šç§»é™¤æœªä½¿ç”¨çš„ CSSï¼ˆé…åˆ Tailwindï¼‰ã€‚</li></ul></li></ul><h4 id="ğŸ”§-4-è®¾è®¡ç³»ç»Ÿä¸ä¸»é¢˜" tabindex="-1">ğŸ”§ 4. <strong>è®¾è®¡ç³»ç»Ÿä¸ä¸»é¢˜</strong> <a class="header-anchor" href="#ğŸ”§-4-è®¾è®¡ç³»ç»Ÿä¸ä¸»é¢˜" aria-label="Permalink to â€œğŸ”§ 4. è®¾è®¡ç³»ç»Ÿä¸ä¸»é¢˜â€">â€‹</a></h4><ul><li>é€šè¿‡ CSS Variables å®ç°åŠ¨æ€ä¸»é¢˜ï¼š<div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">:root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  --color-primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#007bff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.dark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  --color-primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#4da6ff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">--color-primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }</span></span></code></pre></div></li></ul><hr><h3 id="äº”ã€é€‰å‹å»ºè®®" tabindex="-1">äº”ã€é€‰å‹å»ºè®® <a class="header-anchor" href="#äº”ã€é€‰å‹å»ºè®®" aria-label="Permalink to â€œäº”ã€é€‰å‹å»ºè®®â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>é¡¹ç›®ç±»å‹</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>React æ–°é¡¹ç›®</strong></td><td>Tailwind CSS + CSS Modulesï¼ˆæˆ– Emotionï¼‰</td></tr><tr><td><strong>Vue é¡¹ç›®</strong></td><td>Scoped CSS + Sass</td></tr><tr><td><strong>è®¾è®¡é©±åŠ¨äº§å“</strong></td><td>Tailwind CSSï¼ˆå¿«é€Ÿå®ç° UI ä¸€è‡´æ€§ï¼‰</td></tr><tr><td><strong>é«˜å®šåˆ¶åŒ–ç»„ä»¶åº“</strong></td><td>CSS Modules + PostCSS</td></tr><tr><td><strong>è¿½æ±‚æè‡´æ€§èƒ½</strong></td><td>åŸå­åŒ– CSS + PurgeCSS</td></tr></tbody></table><hr><h3 id="å…­ã€ä¸€å¥è¯æ€»ç»“-11" tabindex="-1">å…­ã€ä¸€å¥è¯æ€»ç»“ <a class="header-anchor" href="#å…­ã€ä¸€å¥è¯æ€»ç»“-11" aria-label="Permalink to â€œå…­ã€ä¸€å¥è¯æ€»ç»“â€">â€‹</a></h3><blockquote><p><strong>CSS å·¥ç¨‹åŒ–ä¸æ˜¯â€œç”¨ä»€ä¹ˆå·¥å…·â€ï¼Œè€Œæ˜¯â€œå¦‚ä½•è®©æ ·å¼å…·å¤‡æ¨¡å—åŒ–ã€å¯ç»´æŠ¤ã€å¯åä½œçš„å·¥ç¨‹å±æ€§â€â€”â€”å®ƒé€šè¿‡ä½œç”¨åŸŸéš”ç¦»ã€ç¼–ç¨‹èƒ½åŠ›å¢å¼ºå’Œè‡ªåŠ¨åŒ–å·¥å…·é“¾ï¼Œå°† CSS ä»â€œå…¨å±€è„šæœ¬â€å‡çº§ä¸ºâ€œä¸€ç­‰å…¬æ°‘æ¨¡å—â€ã€‚</strong></p></blockquote>`,718)])])}const F=i(r,[["render",d]]);export{u as __pageData,F as default};
